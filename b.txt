{"severity":"ERROR","time":"2025-05-29T08:46:43.165Z","correlation_id":"01JWDKHSBF2SX5ZF5BPZPGZRX0","meta.caller_id":"POST /api/:version/internal/allowed","meta.remote_ip":"127.0.0.1","meta.feature_category":"source_code_management","meta.project":"ida/8620/mcu/chery_e01_mcu","meta.root_namespace":"ida","meta.client_id":"user/2637","meta.organization_id":1,"exception.class":"GRPC::Internal","exception.message":"13:creating object reader: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/2b/77/2b770daa4098fa7625b336436ae435dbd37491c1d542c55951964d533f590ce5.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"creating object reader: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/2b/77/2b770daa4098fa7625b336436ae435dbd37491c1d542c55951964d533f590ce5.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:46:43.161929346+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 18: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/blob_service.rb:229:in `each'","lib/gitlab/gitaly_client/blob_service.rb:229:in `each'","lib/gitlab/gitaly_client/blob_service.rb:229:in `flat_map'","lib/gitlab/gitaly_client/blob_service.rb:229:in `map_lfs_pointers'","lib/gitlab/gitaly_client/blob_service.rb:131:in `get_new_lfs_pointers'","lib/gitlab/git/lfs_changes.rb:12:in `new_pointers'","lib/gitlab/checks/lfs_integrity.rb:19:in `objects_missing?'","lib/gitlab/checks/lfs_check.rb:16:in `block in validate!'","lib/gitlab/checks/timed_logger.rb:27:in `log_timed'","lib/gitlab/checks/lfs_check.rb:12:in `validate!'","lib/gitlab/checks/changes_access.rb:120:in `bulk_access_checks!'","ee/lib/ee/gitlab/checks/changes_access.rb:12:in `bulk_access_checks!'","lib/gitlab/checks/changes_access.rb:29:in `block in validate!'","lib/gitlab/checks/timed_logger.rb:27:in `log_timed'","lib/gitlab/checks/changes_access.rb:28:in `validate!'","lib/gitlab/git_access.rb:390:in `check_access!'","lib/gitlab/git_access.rb:378:in `check_change_access!'","ee/lib/ee/gitlab/git_access.rb:98:in `check_change_access!'","lib/gitlab/git_access.rb:359:in `check_push_access!'","lib/gitlab/git_access.rb:96:in `check'","ee/lib/ee/gitlab/git_access.rb:20:in `check'","lib/api/helpers/internal_helpers.rb:54:in `access_check!'","lib/api/helpers/internal_helpers.rb:35:in `block in access_check_result'","lib/api/helpers/internal_helpers.rb:128:in `with_admin_mode_bypass!'","lib/api/helpers/internal_helpers.rb:34:in `access_check_result'","lib/api/internal/base.rb:64:in `check_allowed'","ee/lib/ee/api/internal/base.rb:22:in `block in check_allowed'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/lib/ee/api/internal/base.rb:21:in `check_allowed'","lib/api/internal/base.rb:141:in `block (2 levels) in \u003cclass:Base\u003e'","grape (2.0.0) lib/grape/endpoint.rb:58:in `call'","grape (2.0.0) lib/grape/endpoint.rb:58:in `block (2 levels) in generate_api_method'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","grape (2.0.0) lib/grape/endpoint.rb:57:in `block in generate_api_method'","grape (2.0.0) lib/grape/endpoint.rb:328:in `execute'","grape (2.0.0) lib/grape/endpoint.rb:260:in `block in run'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","grape (2.0.0) lib/grape/endpoint.rb:240:in `run'","grape (2.0.0) lib/grape/endpoint.rb:316:in `block in build_stack'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","ee/lib/gitlab/middleware/ip_restrictor.rb:11:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","lib/api/api_guard.rb:219:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/resource.rb:20:in `_call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/resource/bearer.rb:8:in `_call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/abstract/handler.rb:17:in `call'","grape (2.0.0) lib/grape/middleware/error.rb:39:in `block in call!'","grape (2.0.0) lib/grape/middleware/error.rb:38:in `catch'","grape (2.0.0) lib/grape/middleware/error.rb:38:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:60:in `block in call!'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:58:in `catch'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:58:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","grape (2.0.0) lib/grape/endpoint.rb:224:in `call!'","grape (2.0.0) lib/grape/endpoint.rb:218:in `call'","grape (2.0.0) lib/grape/router/route.rb:58:in `exec'","grape (2.0.0) lib/grape/router.rb:120:in `process_route'","grape (2.0.0) lib/grape/router.rb:74:in `block in identity'","grape (2.0.0) lib/grape/router.rb:94:in `transaction'","grape (2.0.0) lib/grape/router.rb:72:in `identity'","grape (2.0.0) lib/grape/router.rb:56:in `block in call'","grape (2.0.0) lib/grape/router.rb:136:in `with_optimization'","grape (2.0.0) lib/grape/router.rb:55:in `call'","grape (2.0.0) lib/grape/api/instance.rb:165:in `call'","grape (2.0.0) lib/grape/api/instance.rb:70:in `call!'","grape (2.0.0) lib/grape/api/instance.rb:65:in `call'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:19:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:blob_service, :rpc=\u003e:list_all_lfs_pointers}","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDKHSBF2SX5ZF5BPZPGZRX0"}
{"severity":"ERROR","time":"2025-05-29T08:47:55.097Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"1920b9471bd0ee4fc03980885c80d2df","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/bd/75/bd7534f063593d4e6d6e5d9e92f87c82464894749a1659f666a83c4dcd319513.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/ae46ad79fb680d3d5e4895afbd55434c1fcd9bb5]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"e8b43d529afa17f0970ec1c9","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"1920b9471bd0ee4fc03980885c80d2df","extra.object_id":"ae46ad79fb680d3d5e4895afbd55434c1fcd9bb5"}
{"severity":"ERROR","time":"2025-05-29T08:47:56.096Z","correlation_id":"01JWDJWPM4M2ZXSCYTC82C7HQX","meta.caller_id":"MergeRequests::DeleteSourceBranchWorker","meta.remote_ip":"10.133.71.211","meta.feature_category":"code_review_workflow","meta.user":"uidp5170","meta.user_id":302,"meta.project":"svs/common/qnx/services/camera/camera","meta.root_namespace":"svs","meta.client_id":"user/302","meta.subscription_plan":"default","meta.root_caller_id":"PUT /api/:version/projects/:id/merge_requests/:merge_request_iid/merge","exception.class":"Projects::DeleteBranchWorker::GitReferenceLockedError","exception.message":"7:deletion denied by access checks: running pre-receive hooks: GitLab: 500 Internal Server Error.","user.username":"uidp5170","tags.queue":"default","tags.jid":"d6866bad87dc564508bdb1d8","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDJWPM4M2ZXSCYTC82C7HQX"}
{"severity":"ERROR","time":"2025-05-29T08:47:56.108Z","correlation_id":"01JWDKM0KA0MP50FRBMCKBV11G","meta.caller_id":"GET /api/:version/projects/:id/repository/commits/:sha/diff","meta.remote_ip":"10.133.71.211","meta.feature_category":"source_code_management","meta.user":"uidp5170","meta.user_id":302,"meta.project":"svs/common/qnx/services/camera/camera","meta.root_namespace":"svs","meta.client_id":"user/302","exception.class":"GRPC::Internal","exception.message":"13:cmd: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a7/d6/a7d68297aef03803575eea7d9dfb36ff3dbcd946e5ed0316b521befeb4a5c3ef.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c diff.noprefix=false -c attr.tree=HEAD diff --patch --raw --abbrev=40 --full-index --find-renames=30% --end-of-options 5e67720785a96d696718e2002a6ea8b0e838047c 422a46fce8a73aa66c23df18b6afccb45745a0d0]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"cmd: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a7/d6/a7d68297aef03803575eea7d9dfb36ff3dbcd946e5ed0316b521befeb4a5c3ef.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c diff.noprefix=false -c attr.tree=HEAD diff --patch --raw --abbrev=40 --full-index --find-renames=30% --end-of-options 5e67720785a96d696718e2002a6ea8b0e838047c 422a46fce8a73aa66c23df18b6afccb45745a0d0]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:47:56.09641889+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 45: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/diff_stitcher.rb:17:in `each'","lib/gitlab/gitaly_client/diff_stitcher.rb:17:in `each'","lib/gitlab/gitaly_client/diff_stitcher.rb:17:in `each'","lib/gitlab/git/diff_collection.rb:165:in `each_with_index'","lib/gitlab/git/diff_collection.rb:165:in `each_gitaly_patch'","lib/gitlab/git/diff_collection.rb:58:in `each'","lib/api/commits.rb:293:in `to_a'","lib/api/commits.rb:293:in `block (2 levels) in \u003cclass:Commits\u003e'","grape (2.0.0) lib/grape/endpoint.rb:58:in `call'","grape (2.0.0) lib/grape/endpoint.rb:58:in `block (2 levels) in generate_api_method'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","grape (2.0.0) lib/grape/endpoint.rb:57:in `block in generate_api_method'","grape (2.0.0) lib/grape/endpoint.rb:328:in `execute'","grape (2.0.0) lib/grape/endpoint.rb:260:in `block in run'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","grape (2.0.0) lib/grape/endpoint.rb:240:in `run'","grape (2.0.0) lib/grape/endpoint.rb:316:in `block in build_stack'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","ee/lib/gitlab/middleware/ip_restrictor.rb:14:in `block in call'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/lib/gitlab/middleware/ip_restrictor.rb:13:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","lib/api/api_guard.rb:219:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/resource.rb:20:in `_call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/resource/bearer.rb:8:in `_call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/abstract/handler.rb:17:in `call'","grape (2.0.0) lib/grape/middleware/error.rb:39:in `block in call!'","grape (2.0.0) lib/grape/middleware/error.rb:38:in `catch'","grape (2.0.0) lib/grape/middleware/error.rb:38:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:60:in `block in call!'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:58:in `catch'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:58:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","grape (2.0.0) lib/grape/endpoint.rb:224:in `call!'","grape (2.0.0) lib/grape/endpoint.rb:218:in `call'","grape (2.0.0) lib/grape/router/route.rb:58:in `exec'","grape (2.0.0) lib/grape/router.rb:120:in `process_route'","grape (2.0.0) lib/grape/router.rb:74:in `block in identity'","grape (2.0.0) lib/grape/router.rb:94:in `transaction'","grape (2.0.0) lib/grape/router.rb:72:in `identity'","grape (2.0.0) lib/grape/router.rb:56:in `block in call'","grape (2.0.0) lib/grape/router.rb:136:in `with_optimization'","grape (2.0.0) lib/grape/router.rb:55:in `call'","grape (2.0.0) lib/grape/api/instance.rb:165:in `call'","grape (2.0.0) lib/grape/api/instance.rb:70:in `call!'","grape (2.0.0) lib/grape/api/instance.rb:65:in `call'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:19:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:diff_service, :rpc=\u003e:commit_diff}","user.username":"uidp5170","tags.program":"web","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDKM0KA0MP50FRBMCKBV11G"}
{"severity":"ERROR","time":"2025-05-29T08:47:56.417Z","correlation_id":"01JWDKM0BYA6F2QDF5KGERM7G7","meta.caller_id":"GET /api/:version/projects/:id/repository/commits/:sha/diff","meta.remote_ip":"10.133.71.211","meta.feature_category":"source_code_management","meta.user":"uidp5170","meta.user_id":302,"meta.project":"svs/hqx4560/system_oss/platform/hardware/interfaces","meta.root_namespace":"svs","meta.client_id":"user/302","exception.class":"GRPC::Internal","exception.message":"13:cmd: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/2c/8b/2c8b29085a49715333f00f38aa67b2a129e116299e6cd49f44892c6d76032625.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c diff.noprefix=false -c attr.tree=HEAD diff --patch --raw --abbrev=40 --full-index --find-renames=30% --end-of-options 31ee9c5b6261e78297746e6f0e41071d49c66de0 4b8d7f4e4e330dd2c93fa790334fc90994af3555]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {created_time:\"2025-05-29T16:47:56.386579201+08:00\", grpc_status:13, grpc_message:\"cmd: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/2c/8b/2c8b29085a49715333f00f38aa67b2a129e116299e6cd49f44892c6d76032625.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c diff.noprefix=false -c attr.tree=HEAD diff --patch --raw --abbrev=40 --full-index --find-renames=30% --end-of-options 31ee9c5b6261e78297746e6f0e41071d49c66de0 4b8d7f4e4e330dd2c93fa790334fc90994af3555]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 35: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/diff_stitcher.rb:17:in `each'","lib/gitlab/gitaly_client/diff_stitcher.rb:17:in `each'","lib/gitlab/gitaly_client/diff_stitcher.rb:17:in `each'","lib/gitlab/git/diff_collection.rb:165:in `each_with_index'","lib/gitlab/git/diff_collection.rb:165:in `each_gitaly_patch'","lib/gitlab/git/diff_collection.rb:58:in `each'","lib/api/commits.rb:293:in `to_a'","lib/api/commits.rb:293:in `block (2 levels) in \u003cclass:Commits\u003e'","grape (2.0.0) lib/grape/endpoint.rb:58:in `call'","grape (2.0.0) lib/grape/endpoint.rb:58:in `block (2 levels) in generate_api_method'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","grape (2.0.0) lib/grape/endpoint.rb:57:in `block in generate_api_method'","grape (2.0.0) lib/grape/endpoint.rb:328:in `execute'","grape (2.0.0) lib/grape/endpoint.rb:260:in `block in run'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","grape (2.0.0) lib/grape/endpoint.rb:240:in `run'","grape (2.0.0) lib/grape/endpoint.rb:316:in `block in build_stack'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","ee/lib/gitlab/middleware/ip_restrictor.rb:14:in `block in call'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/lib/gitlab/middleware/ip_restrictor.rb:13:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","lib/api/api_guard.rb:219:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/resource.rb:20:in `_call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/resource/bearer.rb:8:in `_call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/abstract/handler.rb:17:in `call'","grape (2.0.0) lib/grape/middleware/error.rb:39:in `block in call!'","grape (2.0.0) lib/grape/middleware/error.rb:38:in `catch'","grape (2.0.0) lib/grape/middleware/error.rb:38:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:60:in `block in call!'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:58:in `catch'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:58:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","grape (2.0.0) lib/grape/endpoint.rb:224:in `call!'","grape (2.0.0) lib/grape/endpoint.rb:218:in `call'","grape (2.0.0) lib/grape/router/route.rb:58:in `exec'","grape (2.0.0) lib/grape/router.rb:120:in `process_route'","grape (2.0.0) lib/grape/router.rb:74:in `block in identity'","grape (2.0.0) lib/grape/router.rb:94:in `transaction'","grape (2.0.0) lib/grape/router.rb:72:in `identity'","grape (2.0.0) lib/grape/router.rb:56:in `block in call'","grape (2.0.0) lib/grape/router.rb:136:in `with_optimization'","grape (2.0.0) lib/grape/router.rb:55:in `call'","grape (2.0.0) lib/grape/api/instance.rb:165:in `call'","grape (2.0.0) lib/grape/api/instance.rb:70:in `call!'","grape (2.0.0) lib/grape/api/instance.rb:65:in `call'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:19:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:diff_service, :rpc=\u003e:commit_diff}","user.username":"uidp5170","tags.program":"web","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDKM0BYA6F2QDF5KGERM7G7"}
{"severity":"ERROR","time":"2025-05-29T08:47:57.732Z","meta.feature_category":"observability","correlation_id":"aa063881f3708d9717f5251ec85383a9","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"a8aa1c39df9c75814a5636bb","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"aa063881f3708d9717f5251ec85383a9"}
{"severity":"ERROR","time":"2025-05-29T08:47:58.760Z","correlation_id":"01JWDJF87R77R9A0M1XNDKS413","meta.caller_id":"WebHookWorker","meta.remote_ip":"127.0.0.1","meta.feature_category":"webhooks","meta.user":"uidq5204","meta.user_id":2221,"meta.project":"svs/g7phr2/qnx/qnx_ap","meta.root_namespace":"svs","meta.client_id":"user/2221","meta.organization_id":1,"meta.root_caller_id":"POST /api/:version/internal/post_receive","meta.related_class":"ProjectHook","meta.subscription_plan":"default","exception.class":"Errno::ECONNREFUSED","exception.message":"Failed to open TCP connection to 10.218.15.38:8080 (Connection refused - connect(2) for \"10.218.15.38\" port 8080)","exception.backtrace":["gems/gitlab-http/lib/net_http/connect_patch.rb:52:in `initialize'","gems/gitlab-http/lib/net_http/connect_patch.rb:52:in `open'","gems/gitlab-http/lib/net_http/connect_patch.rb:52:in `block in connect'","timeout (0.3.2) lib/timeout.rb:189:in `block in timeout'","timeout (0.3.2) lib/timeout.rb:196:in `timeout'","gems/gitlab-http/lib/net_http/connect_patch.rb:50:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:542:in `post'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `post'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","app/services/web_hook_service.rb:147:in `make_request'","app/services/web_hook_service.rb:86:in `execute'","app/workers/web_hook_worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"Errno::ECONNREFUSED","user.username":"uidq5204","tags.queue":"default","tags.jid":"98cb681739693fb5c0b9c6b2","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"webhooks","tags.correlation_id":"01JWDJF87R77R9A0M1XNDKS413"}
{"severity":"ERROR","time":"2025-05-29T08:47:59.959Z","meta.feature_category":"observability","correlation_id":"b2d659994ef4f217abc192fd88c71069","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"5f60f3089b574dac0a856ab1","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"b2d659994ef4f217abc192fd88c71069"}
{"severity":"ERROR","time":"2025-05-29T08:48:02.520Z","correlation_id":"01JWDJW6HFNZ3WGKFJDC7SDYFH","meta.caller_id":"ActionMailer::MailDeliveryJob","meta.remote_ip":"10.133.71.211","meta.feature_category":"team_planning","meta.user":"uidp5170","meta.user_id":302,"meta.project":"svs/hqx4560/system_oss/platform/hardware/interfaces","meta.root_namespace":"svs","meta.client_id":"user/302","meta.root_caller_id":"POST /api/:version/projects/:id/merge_requests/:noteable_id/notes","exception.class":"Timeout::Error","exception.message":"execution expired","exception.backtrace":["fast_gettext (2.3.0) lib/fast_gettext/storage.rb:37:in `to_s'","fast_gettext (2.3.0) lib/fast_gettext/storage.rb:37:in `map'","fast_gettext (2.3.0) lib/fast_gettext/storage.rb:37:in `available_locales'","fast_gettext (2.3.0) lib/fast_gettext/storage.rb:139:in `block in best_locale_in'","fast_gettext (2.3.0) lib/fast_gettext/storage.rb:137:in `each'","fast_gettext (2.3.0) lib/fast_gettext/storage.rb:137:in `best_locale_in'","fast_gettext (2.3.0) lib/fast_gettext/storage.rb:117:in `set_locale'","fast_gettext (2.3.0) lib/fast_gettext/storage.rb:110:in `locale='","gettext_i18n_rails (1.13.0) lib/gettext_i18n_rails/i18n_hacks.rb:10:in `locale='","actionview (7.0.8.4) lib/action_view/lookup_context.rb:277:in `locale='","actionview (7.0.8.4) lib/action_view/rendering.rb:21:in `locale='","i18n (1.14.4) lib/i18n.rb:74:in `locale='","i18n (1.14.4) lib/i18n.rb:324:in `with_locale'","tanuki_emoji (0.13.0) lib/tanuki_emoji/db/emoji_test_parser.rb:74:in `block in load!'","tanuki_emoji (0.13.0) lib/tanuki_emoji/db/emoji_test_parser.rb:73:in `each'","tanuki_emoji (0.13.0) lib/tanuki_emoji/db/emoji_test_parser.rb:73:in `load!'","tanuki_emoji (0.13.0) lib/tanuki_emoji/index.rb:116:in `load_data_files'","tanuki_emoji (0.13.0) lib/tanuki_emoji/index.rb:107:in `initialize'","/opt/gitlab/embedded/lib/ruby/3.2.0/singleton.rb:127:in `new'","/opt/gitlab/embedded/lib/ruby/3.2.0/singleton.rb:127:in `block in instance'","/opt/gitlab/embedded/lib/ruby/3.2.0/singleton.rb:125:in `synchronize'","/opt/gitlab/embedded/lib/ruby/3.2.0/singleton.rb:125:in `instance'","tanuki_emoji (0.13.0) lib/tanuki_emoji.rb:33:in `index'","lib/banzai/filter/emoji_filter.rb:81:in `emoji_pattern'","lib/banzai/filter/emoji_filter.rb:93:in `emoji_pattern'","lib/banzai/filter/emoji_filter.rb:43:in `emoji_name_element_unicode_filter'","lib/banzai/filter/emoji_filter.rb:26:in `block in call'","nokogiri-1.16.7-x86_64 (linux) lib/nokogiri/xml/node_set.rb:235:in `block in each'","nokogiri-1.16.7-x86_64 (linux) lib/nokogiri/xml/node_set.rb:234:in `upto'","nokogiri-1.16.7-x86_64 (linux) lib/nokogiri/xml/node_set.rb:234:in `each'","lib/banzai/filter/emoji_filter.rb:19:in `call'","lib/banzai/filter/concerns/timeout_filter_handler.rb:37:in `block in call'","timeout (0.3.2) lib/timeout.rb:189:in `block in timeout'","timeout (0.3.2) lib/timeout.rb:36:in `block in catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:198:in `timeout'","lib/gitlab/render_timeout.rb:11:in `timeout'","lib/banzai/filter/concerns/timeout_filter_handler.rb:37:in `call'","lib/banzai/filter/concerns/pipeline_timing_check.rb:26:in `call'","html-pipeline (2.14.3) lib/html/pipeline/filter.rb:129:in `call'","html-pipeline (2.14.3) lib/html/pipeline.rb:134:in `block in perform_filter'","html-pipeline (2.14.3) lib/html/pipeline.rb:174:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","html-pipeline (2.14.3) lib/html/pipeline.rb:173:in `instrument'","html-pipeline (2.14.3) lib/html/pipeline.rb:133:in `perform_filter'","html-pipeline (2.14.3) lib/html/pipeline.rb:119:in `block (2 levels) in call'","html-pipeline (2.14.3) lib/html/pipeline.rb:118:in `each'","html-pipeline (2.14.3) lib/html/pipeline.rb:118:in `inject'","html-pipeline (2.14.3) lib/html/pipeline.rb:118:in `block in call'","html-pipeline (2.14.3) lib/html/pipeline.rb:174:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","html-pipeline (2.14.3) lib/html/pipeline.rb:173:in `instrument'","html-pipeline (2.14.3) lib/html/pipeline.rb:116:in `call'","lib/banzai/pipeline/base_pipeline.rb:26:in `block (2 levels) in singleton class'","lib/banzai/renderer.rb:131:in `block in render_result'","lib/banzai/renderer.rb:221:in `instrument_filters'","lib/banzai/renderer.rb:129:in `render_result'","lib/banzai/renderer.rb:165:in `cacheless_render'","lib/banzai/renderer.rb:31:in `render'","lib/banzai.rb:16:in `render'","app/services/markup/rendering_service.rb:40:in `markdown_unsafe'","app/services/markup/rendering_service.rb:26:in `markup_unsafe'","app/services/markup/rendering_service.rb:16:in `execute'","app/helpers/markup_helper.rb:93:in `markdown'","app/views/notify/_note_email.html.haml:39","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/notify/note_merge_request_email.html.haml:1","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:75:in `block in render_with_layout'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:74:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/rendering.rb:117:in `block in _render_template'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/rendering.rb:116:in `_render_template'","actionview (7.0.8.4) lib/action_view/rendering.rb:103:in `render_to_body'","actionpack (7.0.8.4) lib/abstract_controller/rendering.rb:27:in `render'","actionmailer (7.0.8.4) lib/action_mailer/base.rb:992:in `block in collect_responses_from_templates'","actionmailer (7.0.8.4) lib/action_mailer/base.rb:989:in `each'","actionmailer (7.0.8.4) lib/action_mailer/base.rb:989:in `each'","actionmailer (7.0.8.4) lib/action_mailer/base.rb:989:in `map'","actionmailer (7.0.8.4) lib/action_mailer/base.rb:989:in `collect_responses_from_templates'","actionmailer (7.0.8.4) lib/action_mailer/base.rb:967:in `collect_responses'","actionmailer (7.0.8.4) lib/action_mailer/base.rb:875:in `mail'","app/mailers/application_mailer.rb:42:in `block in mail_with_locale'","lib/gitlab/i18n.rb:114:in `with_locale'","app/mailers/application_mailer.rb:41:in `mail_with_locale'","app/mailers/notify.rb:155:in `mail_thread'","app/mailers/notify.rb:201:in `mail_answer_note_thread'","app/mailers/emails/notes.rb:33:in `note_merge_request_email'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:124:in `with_default_locale'","app/mailers/application_mailer.rb:23:in `render_with_default_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionmailer (7.0.8.4) lib/action_mailer/rescuable.rb:27:in `block in process'","actionmailer (7.0.8.4) lib/action_mailer/rescuable.rb:19:in `handle_exceptions'","actionmailer (7.0.8.4) lib/action_mailer/rescuable.rb:26:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionmailer (7.0.8.4) lib/action_mailer/base.rb:646:in `block in process'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionmailer (7.0.8.4) lib/action_mailer/base.rb:645:in `process'","actionmailer (7.0.8.4) lib/action_mailer/message_delivery.rb:128:in `block in processed_mailer'","\u003cinternal:kernel\u003e:90:in `tap'","actionmailer (7.0.8.4) lib/action_mailer/message_delivery.rb:127:in `processed_mailer'","actionmailer (7.0.8.4) lib/action_mailer/message_delivery.rb:118:in `deliver_now'","actionmailer (7.0.8.4) lib/action_mailer/mail_delivery_job.rb:23:in `perform'","activejob (7.0.8.4) lib/active_job/execution.rb:65:in `block in _perform_job'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia/railtie.rb:32:in `block (2 levels) in insert_into_active_job'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `instance_exec'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","i18n (1.14.4) lib/i18n.rb:322:in `with_locale'","activejob (7.0.8.4) lib/active_job/translation.rb:9:in `block (2 levels) in \u003cmodule:Translation\u003e'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `instance_exec'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/core_ext/time/zones.rb:65:in `use_zone'","activejob (7.0.8.4) lib/active_job/timezones.rb:9:in `block (2 levels) in \u003cmodule:Timezones\u003e'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `instance_exec'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","activejob (7.0.8.4) lib/active_job/execution.rb:64:in `_perform_job'","activejob (7.0.8.4) lib/active_job/instrumentation.rb:20:in `_perform_job'","activejob (7.0.8.4) lib/active_job/execution.rb:52:in `perform_now'","activejob (7.0.8.4) lib/active_job/instrumentation.rb:14:in `block in perform_now'","activejob (7.0.8.4) lib/active_job/instrumentation.rb:25:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","activejob (7.0.8.4) lib/active_job/instrumentation.rb:35:in `instrument'","activejob (7.0.8.4) lib/active_job/instrumentation.rb:14:in `perform_now'","activejob (7.0.8.4) lib/active_job/logging.rb:18:in `block in perform_now'","activejob (7.0.8.4) lib/active_job/logging.rb:27:in `tag_logger'","activejob (7.0.8.4) lib/active_job/logging.rb:18:in `perform_now'","sentry-rails (5.21.0) lib/sentry/rails/active_job.rb:8:in `perform_now'","activejob (7.0.8.4) lib/active_job/execution.rb:30:in `block in execute'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","activejob (7.0.8.4) lib/active_job/railtie.rb:54:in `block (4 levels) in \u003cclass:Railtie\u003e'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:88:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","activejob (7.0.8.4) lib/active_job/railtie.rb:53:in `block (3 levels) in \u003cclass:Railtie\u003e'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `instance_exec'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","activejob (7.0.8.4) lib/active_job/execution.rb:28:in `execute'","activejob (7.0.8.4) lib/active_job/queue_adapters/sidekiq_adapter.rb:42:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":"uidp5170","tags.queue":"mailers","tags.jid":"0c3f88a1c98e54b3e15b2eb8","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"team_planning","tags.correlation_id":"01JWDJW6HFNZ3WGKFJDC7SDYFH","extra.project_id":28250,"extra.group_id":null,"extra.class_name":"EmojiFilter"}
{"severity":"ERROR","time":"2025-05-29T08:48:02.634Z","correlation_id":"01JWDJG38WK0FZ7HDAE5FK2XWR","meta.caller_id":"WebHookWorker","meta.feature_category":"webhooks","meta.organization_id":1,"meta.remote_ip":"10.218.12.18","meta.user":"uidq5204","meta.user_id":2221,"meta.project":"svs/g7phr2/qnx/qnx_ap","meta.root_namespace":"svs","meta.client_id":"user/2221","meta.root_caller_id":"Projects::MergeRequests::CreationsController#create","meta.related_class":"ProjectHook","meta.subscription_plan":"default","exception.class":"Errno::ECONNREFUSED","exception.message":"Failed to open TCP connection to 10.218.15.38:8080 (Connection refused - connect(2) for \"10.218.15.38\" port 8080)","exception.backtrace":["gems/gitlab-http/lib/net_http/connect_patch.rb:52:in `initialize'","gems/gitlab-http/lib/net_http/connect_patch.rb:52:in `open'","gems/gitlab-http/lib/net_http/connect_patch.rb:52:in `block in connect'","timeout (0.3.2) lib/timeout.rb:189:in `block in timeout'","timeout (0.3.2) lib/timeout.rb:196:in `timeout'","gems/gitlab-http/lib/net_http/connect_patch.rb:50:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:542:in `post'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `post'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","app/services/web_hook_service.rb:147:in `make_request'","app/services/web_hook_service.rb:86:in `execute'","app/workers/web_hook_worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"Errno::ECONNREFUSED","user.username":"uidq5204","tags.queue":"default","tags.jid":"28b6bc84f4be2002db9148ab","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"webhooks","tags.correlation_id":"01JWDJG38WK0FZ7HDAE5FK2XWR"}
{"severity":"ERROR","time":"2025-05-29T08:48:10.889Z","correlation_id":"01JWDKMEX2W3K3ZRG20EG8Q8TE","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.132.10.196","meta.user":"uidq4979","meta.user_id":2188,"meta.client_id":"user/2188","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/7d/2a/7d2a98bbfbed7dd0fdb2f51ed0cde8f1b3a540c9f96e1fa43fdbc8224d8a1672.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {created_time:\"2025-05-29T16:48:10.883043987+08:00\", grpc_status:13, grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/7d/2a/7d2a98bbfbed7dd0fdb2f51ed0cde8f1b3a540c9f96e1fa43fdbc8224d8a1672.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 45: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uidq4979","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKMEX2W3K3ZRG20EG8Q8TE"}
{"severity":"ERROR","time":"2025-05-29T08:48:11.689Z","correlation_id":"01JWDKGEWN782JA73KX82E1AA6","meta.caller_id":"MergeRequestMergeabilityCheckWorker","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.219.45.198","meta.user":"uidq9294","meta.user_id":3275,"meta.project":"svs/common/qnx/device/chery","meta.root_namespace":"svs","meta.client_id":"user/3275","meta.ai_resource":"gid://gitlab/MergeRequest/302962","meta.root_caller_id":"Projects::MergeRequestsController#show","exception.class":"Gitlab::Git::CommandError","exception.message":"13:spawning diff: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/26/11/2611797732f70b9a5ada68f4529c4e6328cd128c4f3513a0b9f7f9200a793eae.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD diff --full-index --end-of-options e5703b801f31c432314afe1399aadec3843d1f9e df6ea1a0d85676e8e4795cdf5ee5ffdc30410214]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:1191:in `get_patch_id'","app/models/repository.rb:1262:in `get_patch_id'","app/models/merge_request_diff.rb:245:in `set_patch_id_sha'","app/models/merge_request_diff.rb:226:in `save_git_content'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:236:in `block in halting_and_conditional'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `block in invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `each'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:108:in `run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:929:in `_run_create_callbacks'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:459:in `_create_record'","activerecord (7.0.8.4) lib/active_record/timestamp.rb:108:in `_create_record'","activerecord (7.0.8.4) lib/active_record/persistence.rb:1069:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:455:in `block in create_or_update'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","activerecord (7.0.8.4) lib/active_record/autosave_association.rb:370:in `around_save_collection_association'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:929:in `_run_save_callbacks'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:455:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/timestamp.rb:126:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/persistence.rb:615:in `save'","activerecord (7.0.8.4) lib/active_record/validations.rb:47:in `save'","activerecord (7.0.8.4) lib/active_record/transactions.rb:298:in `block in save'","activerecord (7.0.8.4) lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:316:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:350:in `with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/transactions.rb:298:in `save'","activerecord (7.0.8.4) lib/active_record/suppressor.rb:50:in `save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:511:in `block in save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:530:in `block in around_save'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:150:in `block in run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:170:in `catch_exceptions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:148:in `run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:133:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:212:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `block (2 levels) in perform'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `catch'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `block in perform'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:186:in `within_transaction'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:62:in `perform'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:530:in `around_save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:511:in `save'","activerecord (7.0.8.4) lib/active_record/associations/singular_association.rb:58:in `_create_record'","activerecord (7.0.8.4) lib/active_record/associations/has_one_association.rb:131:in `_create_record'","activerecord (7.0.8.4) lib/active_record/associations/association.rb:208:in `create!'","activerecord (7.0.8.4) lib/active_record/associations/builder/singular_association.rb:37:in `create_merge_head_diff!'","app/services/merge_requests/reload_merge_head_diff_service.rb:30:in `block in recreate_merge_head_diff'","lib/gitlab/gitaly_client.rb:457:in `allow_n_plus_1_calls'","app/services/merge_requests/reload_merge_head_diff_service.rb:29:in `recreate_merge_head_diff'","app/services/merge_requests/reload_merge_head_diff_service.rb:14:in `execute'","ee/app/services/ee/merge_requests/reload_merge_head_diff_service.rb:10:in `execute'","app/services/merge_requests/mergeability_check_service.rb:128:in `reload_merge_head_diff'","app/services/merge_requests/mergeability_check_service.rb:121:in `update_merge_status'","app/services/merge_requests/mergeability_check_service.rb:60:in `check_mergeability'","app/services/merge_requests/mergeability_check_service.rb:48:in `block in execute'","lib/gitlab/exclusive_lease_helpers.rb:43:in `block in in_lock'","lib/gitlab/exclusive_lease_helpers.rb:53:in `with_instrumentation'","lib/gitlab/exclusive_lease_helpers.rb:42:in `in_lock'","app/services/merge_requests/mergeability_check_service.rb:86:in `in_write_lock'","app/services/merge_requests/mergeability_check_service.rb:42:in `execute'","app/workers/merge_request_mergeability_check_worker.rb:28:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:diff_service, :rpc=\u003e:get_patch_id}","user.username":"uidq9294","tags.queue":"default","tags.jid":"0419101332ecd18eb07d21ba","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKGEWN782JA73KX82E1AA6","extra.project_id":33500,"extra.old_revision":"e5703b801f31c432314afe1399aadec3843d1f9e","extra.new_revision":"df6ea1a0d85676e8e4795cdf5ee5ffdc30410214"}
{"severity":"ERROR","time":"2025-05-29T08:48:12.306Z","correlation_id":"01JWDK5DQTNY59FCT64H1C8BMK","meta.caller_id":"NewMergeRequestWorker","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.129.18.33","meta.user":"uidq2411","meta.user_id":1196,"meta.project":"svs/a2000/sv-scripts-kit","meta.root_namespace":"svs","meta.client_id":"user/1196","meta.root_caller_id":"Projects::MergeRequests::CreationsController#create","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/26/3d/263d9a5fa843afcb65bef807f7606e4eb0326201cfee9dbe5caa3e63484e77d6.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/a4e6c68c2fecaf0ebb1e433c8954ed0390e424a5]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/models/note.rb:749:in `keep_around_commit'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:236:in `block in halting_and_conditional'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `block in invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `each'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:132:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:929:in `_run_save_callbacks'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:455:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/timestamp.rb:126:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/persistence.rb:615:in `save'","activerecord (7.0.8.4) lib/active_record/validations.rb:47:in `save'","activerecord (7.0.8.4) lib/active_record/transactions.rb:298:in `block in save'","activerecord (7.0.8.4) lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:316:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:350:in `with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/transactions.rb:298:in `save'","activerecord (7.0.8.4) lib/active_record/suppressor.rb:50:in `save'","activerecord (7.0.8.4) lib/active_record/persistence.rb:38:in `create'","app/services/system_notes/base_service.rb:22:in `create_note'","app/services/system_notes/issuables_service.rb:268:in `cross_reference'","app/services/system_note_service.rb:277:in `cross_reference'","app/models/concerns/mentionable.rb:150:in `block in create_cross_references!'","app/models/concerns/mentionable.rb:149:in `each'","app/models/concerns/mentionable.rb:149:in `create_cross_references!'","app/services/merge_requests/after_create_service.rb:39:in `prepare_merge_request'","ee/app/services/ee/merge_requests/after_create_service.rb:12:in `prepare_merge_request'","app/services/merge_requests/after_create_service.rb:11:in `execute'","app/workers/new_merge_request_worker.rb:27:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executed.rb:17:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":"uidq2411","tags.queue":"default","tags.jid":"9e0b805a0b6d8b902d11e732","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDK5DQTNY59FCT64H1C8BMK","extra.object_id":"a4e6c68c2fecaf0ebb1e433c8954ed0390e424a5"}
{"severity":"ERROR","time":"2025-05-29T08:48:16.676Z","correlation_id":"01JWDJF87R77R9A0M1XNDKS413","meta.caller_id":"WebHookWorker","meta.remote_ip":"127.0.0.1","meta.feature_category":"webhooks","meta.user":"uidq5204","meta.user_id":2221,"meta.project":"svs/g7phr2/qnx/qnx_ap","meta.root_namespace":"svs","meta.client_id":"user/2221","meta.organization_id":1,"meta.root_caller_id":"POST /api/:version/internal/post_receive","meta.related_class":"ProjectHook","exception.class":"Errno::ECONNREFUSED","exception.message":"Failed to open TCP connection to 10.218.15.38:8080 (Connection refused - connect(2) for \"10.218.15.38\" port 8080)","exception.backtrace":["gems/gitlab-http/lib/net_http/connect_patch.rb:52:in `initialize'","gems/gitlab-http/lib/net_http/connect_patch.rb:52:in `open'","gems/gitlab-http/lib/net_http/connect_patch.rb:52:in `block in connect'","timeout (0.3.2) lib/timeout.rb:189:in `block in timeout'","timeout (0.3.2) lib/timeout.rb:196:in `timeout'","gems/gitlab-http/lib/net_http/connect_patch.rb:50:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:542:in `post'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `post'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","app/services/web_hook_service.rb:147:in `make_request'","app/services/web_hook_service.rb:86:in `execute'","app/workers/web_hook_worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"Errno::ECONNREFUSED","user.username":"uidq5204","tags.queue":"default","tags.jid":"f73ecb3f5a5146e73897bd10","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"webhooks","tags.correlation_id":"01JWDJF87R77R9A0M1XNDKS413"}
{"severity":"ERROR","time":"2025-05-29T08:48:16.775Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"dbb5758a3715ac484708e8bdffa38036","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/83/93/839352895b33f071b3a72c35a8a444cb43a9579fe410b173076bf7786a943ced.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/75f4fef520035b06d6949a2ddf9503a3cc038307]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"6c37b5930b24969e8009a402","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"dbb5758a3715ac484708e8bdffa38036","extra.object_id":"75f4fef520035b06d6949a2ddf9503a3cc038307"}
{"severity":"ERROR","time":"2025-05-29T08:48:16.850Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"dbb5758a3715ac484708e8bdffa38036","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/83/93/839352895b33f071b3a72c35a8a444cb43a9579fe410b173076bf7786a943ced.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/d1decbd156cd5342761b54e770457bb855622670]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"6c37b5930b24969e8009a402","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"dbb5758a3715ac484708e8bdffa38036","extra.object_id":"d1decbd156cd5342761b54e770457bb855622670"}
{"severity":"ERROR","time":"2025-05-29T08:48:16.953Z","correlation_id":"01JWDKMMTSNC9E78AY7YQ96XR4","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.217.8.170","meta.user":"uid00744","meta.user_id":3939,"meta.client_id":"user/3939","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/71/1c/711ce9ec0c6582b5f0565b4c90a99799ae5c0651c88aeb872d3a0a6e69aa3cc1.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/71/1c/711ce9ec0c6582b5f0565b4c90a99799ae5c0651c88aeb872d3a0a6e69aa3cc1.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:48:16.946346199+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 31: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uid00744","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKMMTSNC9E78AY7YQ96XR4"}
{"severity":"ERROR","time":"2025-05-29T08:48:17.216Z","meta.feature_category":"observability","correlation_id":"37ddf19f2dd915d2f2b90852b667bd34","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"216772db7205cf917c20d6ef","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"37ddf19f2dd915d2f2b90852b667bd34"}
{"severity":"ERROR","time":"2025-05-29T08:48:17.415Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4933af85689a0294add77b9872cbe70e","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/83/93/839352895b33f071b3a72c35a8a444cb43a9579fe410b173076bf7786a943ced.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/75f4fef520035b06d6949a2ddf9503a3cc038307]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"20456d4fea18a7e71d64855d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4933af85689a0294add77b9872cbe70e","extra.object_id":"75f4fef520035b06d6949a2ddf9503a3cc038307"}
{"severity":"ERROR","time":"2025-05-29T08:48:17.445Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4933af85689a0294add77b9872cbe70e","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/83/93/839352895b33f071b3a72c35a8a444cb43a9579fe410b173076bf7786a943ced.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/d1decbd156cd5342761b54e770457bb855622670]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"20456d4fea18a7e71d64855d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4933af85689a0294add77b9872cbe70e","extra.object_id":"d1decbd156cd5342761b54e770457bb855622670"}
{"severity":"ERROR","time":"2025-05-29T08:48:17.522Z","correlation_id":"01JWDKBDRSHXAQZ07GV0DFW287","meta.caller_id":"ProcessCommitWorker","meta.remote_ip":"127.0.0.1","meta.feature_category":"source_code_management","meta.user":"uidq5157","meta.user_id":2227,"meta.project":"svs/hgy5170/vendor_oss/platform/vendor/qcom-proprietary/prebuilt_hy11","meta.root_namespace":"svs","meta.client_id":"user/2227","meta.organization_id":1,"meta.root_caller_id":"POST /api/:version/internal/post_receive","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/c1/e2/c1e20d7cfc154317fe4c769cca710227240f32856c0d2845a6e5635d9a3919d2.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/1fa82d4a4739f8f7b19d0dce8f83bd0096c66a21]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/models/note.rb:749:in `keep_around_commit'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:236:in `block in halting_and_conditional'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `block in invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `each'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:132:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:929:in `_run_save_callbacks'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:455:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/timestamp.rb:126:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/persistence.rb:615:in `save'","activerecord (7.0.8.4) lib/active_record/validations.rb:47:in `save'","activerecord (7.0.8.4) lib/active_record/transactions.rb:298:in `block in save'","activerecord (7.0.8.4) lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:316:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:350:in `with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/transactions.rb:298:in `save'","activerecord (7.0.8.4) lib/active_record/suppressor.rb:50:in `save'","activerecord (7.0.8.4) lib/active_record/persistence.rb:38:in `create'","app/services/system_notes/base_service.rb:22:in `create_note'","app/services/system_notes/issuables_service.rb:268:in `cross_reference'","app/services/system_note_service.rb:277:in `cross_reference'","app/models/concerns/mentionable.rb:150:in `block in create_cross_references!'","app/models/concerns/mentionable.rb:149:in `each'","app/models/concerns/mentionable.rb:149:in `create_cross_references!'","app/workers/process_commit_worker.rb:55:in `process_commit_message'","app/workers/process_commit_worker.rb:43:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":"uidq5157","tags.queue":"default","tags.jid":"e6d757f2fefe1c2581406ecf","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDKBDRSHXAQZ07GV0DFW287","extra.object_id":"1fa82d4a4739f8f7b19d0dce8f83bd0096c66a21"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.537Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/83/93/839352895b33f071b3a72c35a8a444cb43a9579fe410b173076bf7786a943ced.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/75f4fef520035b06d6949a2ddf9503a3cc038307]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"7b946447ba635137a1b14478","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"75f4fef520035b06d6949a2ddf9503a3cc038307"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.551Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/83/93/839352895b33f071b3a72c35a8a444cb43a9579fe410b173076bf7786a943ced.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/d1decbd156cd5342761b54e770457bb855622670]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"7b946447ba635137a1b14478","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"d1decbd156cd5342761b54e770457bb855622670"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.702Z","meta.feature_category":"observability","correlation_id":"aa063881f3708d9717f5251ec85383a9","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"a8aa1c39df9c75814a5636bb","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"aa063881f3708d9717f5251ec85383a9"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.716Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a4/c3/a4c3f7fe4bb1c583c72a14cfa4152e7eb28c596fb50e2f4e7800742d0245ff86.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/e0f1aafa3728f250502b74fa6f8deea428c11880]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"2962055ddf345b5a6988b914","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"e0f1aafa3728f250502b74fa6f8deea428c11880"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.717Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/ab/c9/abc9f91be5b16b673b527fc797b4ce1504f81ea000d907d867c16655e2a507c7.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/256a3178c644232ce5b3d1c1a89aaee152fd6527]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"194e0c2c21b71da804f1b620","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"256a3178c644232ce5b3d1c1a89aaee152fd6527"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.727Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/ab/c9/abc9f91be5b16b673b527fc797b4ce1504f81ea000d907d867c16655e2a507c7.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/4bc74dc02745da5e842fe990ce50d83b46d53059]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"194e0c2c21b71da804f1b620","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"4bc74dc02745da5e842fe990ce50d83b46d53059"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.790Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a4/c3/a4c3f7fe4bb1c583c72a14cfa4152e7eb28c596fb50e2f4e7800742d0245ff86.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/24559decfb2d22ba34dc509798a164192a02e3fa]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"84ec990a879b585d6226aa1c","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"24559decfb2d22ba34dc509798a164192a02e3fa"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.801Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a4/c3/a4c3f7fe4bb1c583c72a14cfa4152e7eb28c596fb50e2f4e7800742d0245ff86.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/e0f1aafa3728f250502b74fa6f8deea428c11880]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"84ec990a879b585d6226aa1c","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"e0f1aafa3728f250502b74fa6f8deea428c11880"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.803Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/ab/c9/abc9f91be5b16b673b527fc797b4ce1504f81ea000d907d867c16655e2a507c7.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/256a3178c644232ce5b3d1c1a89aaee152fd6527]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"90a742886e880919d95b3d67","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"256a3178c644232ce5b3d1c1a89aaee152fd6527"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.807Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/ab/c9/abc9f91be5b16b673b527fc797b4ce1504f81ea000d907d867c16655e2a507c7.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/4bc74dc02745da5e842fe990ce50d83b46d53059]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"90a742886e880919d95b3d67","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"4bc74dc02745da5e842fe990ce50d83b46d53059"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.912Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a4/c3/a4c3f7fe4bb1c583c72a14cfa4152e7eb28c596fb50e2f4e7800742d0245ff86.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/24559decfb2d22ba34dc509798a164192a02e3fa]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"3ab40bd0f9921c0a83fc4d44","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"24559decfb2d22ba34dc509798a164192a02e3fa"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.925Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a4/c3/a4c3f7fe4bb1c583c72a14cfa4152e7eb28c596fb50e2f4e7800742d0245ff86.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/e0f1aafa3728f250502b74fa6f8deea428c11880]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"3ab40bd0f9921c0a83fc4d44","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"e0f1aafa3728f250502b74fa6f8deea428c11880"}
{"severity":"ERROR","time":"2025-05-29T08:48:18.997Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4933af85689a0294add77b9872cbe70e","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/ab/c9/abc9f91be5b16b673b527fc797b4ce1504f81ea000d907d867c16655e2a507c7.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/256a3178c644232ce5b3d1c1a89aaee152fd6527]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"9c62fa34e587ad7ebc5a2870","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4933af85689a0294add77b9872cbe70e","extra.object_id":"256a3178c644232ce5b3d1c1a89aaee152fd6527"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.003Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4933af85689a0294add77b9872cbe70e","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/ab/c9/abc9f91be5b16b673b527fc797b4ce1504f81ea000d907d867c16655e2a507c7.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/4bc74dc02745da5e842fe990ce50d83b46d53059]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"9c62fa34e587ad7ebc5a2870","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4933af85689a0294add77b9872cbe70e","extra.object_id":"4bc74dc02745da5e842fe990ce50d83b46d53059"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.169Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4933af85689a0294add77b9872cbe70e","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/ab/c9/abc9f91be5b16b673b527fc797b4ce1504f81ea000d907d867c16655e2a507c7.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/256a3178c644232ce5b3d1c1a89aaee152fd6527]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"53fbc2861eacd80caa2eb160","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4933af85689a0294add77b9872cbe70e","extra.object_id":"256a3178c644232ce5b3d1c1a89aaee152fd6527"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.188Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4933af85689a0294add77b9872cbe70e","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/ab/c9/abc9f91be5b16b673b527fc797b4ce1504f81ea000d907d867c16655e2a507c7.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/4bc74dc02745da5e842fe990ce50d83b46d53059]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"53fbc2861eacd80caa2eb160","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4933af85689a0294add77b9872cbe70e","extra.object_id":"4bc74dc02745da5e842fe990ce50d83b46d53059"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.316Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"1920b9471bd0ee4fc03980885c80d2df","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a4/c3/a4c3f7fe4bb1c583c72a14cfa4152e7eb28c596fb50e2f4e7800742d0245ff86.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/3f082092f69e49bff188db9123e43a78135aaba8]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"274a50c51331725147767793","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"1920b9471bd0ee4fc03980885c80d2df","extra.object_id":"3f082092f69e49bff188db9123e43a78135aaba8"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.325Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"1920b9471bd0ee4fc03980885c80d2df","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a4/c3/a4c3f7fe4bb1c583c72a14cfa4152e7eb28c596fb50e2f4e7800742d0245ff86.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/e1e86b1bb2432fc968d52c9fb95fcdb10341911e]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"274a50c51331725147767793","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"1920b9471bd0ee4fc03980885c80d2df","extra.object_id":"e1e86b1bb2432fc968d52c9fb95fcdb10341911e"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.469Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"1920b9471bd0ee4fc03980885c80d2df","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a4/c3/a4c3f7fe4bb1c583c72a14cfa4152e7eb28c596fb50e2f4e7800742d0245ff86.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/3f082092f69e49bff188db9123e43a78135aaba8]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"b687778cda209284d89fac71","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"1920b9471bd0ee4fc03980885c80d2df","extra.object_id":"3f082092f69e49bff188db9123e43a78135aaba8"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.509Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"1920b9471bd0ee4fc03980885c80d2df","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a4/c3/a4c3f7fe4bb1c583c72a14cfa4152e7eb28c596fb50e2f4e7800742d0245ff86.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/e1e86b1bb2432fc968d52c9fb95fcdb10341911e]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"b687778cda209284d89fac71","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"1920b9471bd0ee4fc03980885c80d2df","extra.object_id":"e1e86b1bb2432fc968d52c9fb95fcdb10341911e"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.872Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/0a/65/0a655b7a3d39410fdb3f0c578fd5f11b4192a5d2fa91c45ca4cc7cfd789565fd.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/a221cb02432c8a6490a401b5c473fd7d54ca3e57]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"e9ecf013b8b1d62ed91f83e2","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"a221cb02432c8a6490a401b5c473fd7d54ca3e57"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.883Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/0a/65/0a655b7a3d39410fdb3f0c578fd5f11b4192a5d2fa91c45ca4cc7cfd789565fd.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/27bce128d92a59e0d3279f6d3baf5a2be6d0ad46]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"e9ecf013b8b1d62ed91f83e2","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"27bce128d92a59e0d3279f6d3baf5a2be6d0ad46"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.940Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/0a/65/0a655b7a3d39410fdb3f0c578fd5f11b4192a5d2fa91c45ca4cc7cfd789565fd.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/a221cb02432c8a6490a401b5c473fd7d54ca3e57]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"173c967a6c371d60a5a39565","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"a221cb02432c8a6490a401b5c473fd7d54ca3e57"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.945Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4d344f842993b0aa93f34273bb26533c","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/0a/65/0a655b7a3d39410fdb3f0c578fd5f11b4192a5d2fa91c45ca4cc7cfd789565fd.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/27bce128d92a59e0d3279f6d3baf5a2be6d0ad46]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"173c967a6c371d60a5a39565","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4d344f842993b0aa93f34273bb26533c","extra.object_id":"27bce128d92a59e0d3279f6d3baf5a2be6d0ad46"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.981Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4933af85689a0294add77b9872cbe70e","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/0a/65/0a655b7a3d39410fdb3f0c578fd5f11b4192a5d2fa91c45ca4cc7cfd789565fd.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/a221cb02432c8a6490a401b5c473fd7d54ca3e57]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"5a4c466eae429c5b51986c10","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4933af85689a0294add77b9872cbe70e","extra.object_id":"a221cb02432c8a6490a401b5c473fd7d54ca3e57"}
{"severity":"ERROR","time":"2025-05-29T08:48:19.985Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4933af85689a0294add77b9872cbe70e","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/0a/65/0a655b7a3d39410fdb3f0c578fd5f11b4192a5d2fa91c45ca4cc7cfd789565fd.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/27bce128d92a59e0d3279f6d3baf5a2be6d0ad46]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"5a4c466eae429c5b51986c10","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4933af85689a0294add77b9872cbe70e","extra.object_id":"27bce128d92a59e0d3279f6d3baf5a2be6d0ad46"}
{"severity":"ERROR","time":"2025-05-29T08:48:20.058Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4933af85689a0294add77b9872cbe70e","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a8/a8/a8a80b55661c279337793ace00015c7a02e24a79f1e5cbeb561abb88fb957e15.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/3a7f4163c28004bae5753ee7d785cca6e4c86f06]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"dd67af546d209b7b8002ee40","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4933af85689a0294add77b9872cbe70e","extra.object_id":"3a7f4163c28004bae5753ee7d785cca6e4c86f06"}
{"severity":"ERROR","time":"2025-05-29T08:48:20.066Z","meta.caller_id":"MergeRequestCleanupRefsWorker","correlation_id":"4933af85689a0294add77b9872cbe70e","meta.root_caller_id":"Cronjob","meta.feature_category":"code_review_workflow","meta.client_id":"ip/","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a8/a8/a8a80b55661c279337793ace00015c7a02e24a79f1e5cbeb561abb88fb957e15.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 show-ref --verify --quiet --end-of-options refs/keep-around/0fbe04b13f531b2fecfe2dd1278d6983025cbe5b]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:214:in `ref_exists?'","app/models/repository.rb:313:in `ref_exists?'","lib/gitlab/git/keep_around.rb:59:in `ref_exists?'","lib/gitlab/git/keep_around.rb:56:in `kept_around?'","lib/gitlab/git/keep_around.rb:40:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:69:in `keep_around'","app/services/merge_requests/cleanup_refs_service.rb:28:in `execute'","app/workers/merge_request_cleanup_refs_worker.rb:28:in `perform_work'","app/workers/concerns/limited_capacity/worker.rb:58:in `perform_registered'","app/workers/concerns/limited_capacity/worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/none.rb:14:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:ref_service, :rpc=\u003e:ref_exists}","user.username":null,"tags.queue":"default","tags.jid":"dd67af546d209b7b8002ee40","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"4933af85689a0294add77b9872cbe70e","extra.object_id":"0fbe04b13f531b2fecfe2dd1278d6983025cbe5b"}
{"severity":"ERROR","time":"2025-05-29T08:48:28.248Z","correlation_id":"01JWDKN01FQ6VTSDT5466YR3CA","exception.class":"ActiveRecord::DatabaseConnectionError","exception.message":"There is an issue connecting to your database with your username/password, username: gitlab.\n\nPlease check your database configuration to ensure the username/password are valid.\n","exception.backtrace":["activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'","activerecord (7.0.8.4) lib/active_record/connection_handling.rb:313:in `retrieve_connection'","lib/feature.rb:15:in `connection'","activerecord (7.0.8.4) lib/active_record/model_schema.rb:407:in `table_exists?'","lib/gitlab/database/query_analyzers/gitlab_schemas_metrics.rb:16:in `enabled?'","lib/gitlab/database/query_analyzer.rb:95:in `block in begin!'","lib/gitlab/database/query_analyzer.rb:92:in `select'","lib/gitlab/database/query_analyzer.rb:92:in `begin!'","lib/gitlab/database/query_analyzer.rb:80:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"PG::ConnectionBad","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":null,"tags.correlation_id":"01JWDKN01FQ6VTSDT5466YR3CA"}
{"severity":"ERROR","time":"2025-05-29T08:48:28.256Z","correlation_id":"01JWDKN01FQ6VTSDT5466YR3CA","exception.class":"ActiveRecord::DatabaseConnectionError","exception.message":"There is an issue connecting to your database with your username/password, username: gitlab.\n\nPlease check your database configuration to ensure the username/password are valid.\n","exception.backtrace":["activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'","activerecord (7.0.8.4) lib/active_record/connection_handling.rb:313:in `retrieve_connection'","lib/feature.rb:15:in `connection'","activerecord (7.0.8.4) lib/active_record/model_schema.rb:407:in `table_exists?'","lib/gitlab/database/query_analyzers/prevent_cross_database_modification.rb:52:in `enabled?'","lib/gitlab/database/query_analyzer.rb:95:in `block in begin!'","lib/gitlab/database/query_analyzer.rb:92:in `select'","lib/gitlab/database/query_analyzer.rb:92:in `begin!'","lib/gitlab/database/query_analyzer.rb:80:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"PG::ConnectionBad","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":null,"tags.correlation_id":"01JWDKN01FQ6VTSDT5466YR3CA"}
{"severity":"ERROR","time":"2025-05-29T08:48:28.265Z","correlation_id":"01JWDKN01FQ6VTSDT5466YR3CA","exception.class":"ActiveRecord::DatabaseConnectionError","exception.message":"There is an issue connecting to your database with your username/password, username: gitlab.\n\nPlease check your database configuration to ensure the username/password are valid.\n","exception.backtrace":["activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'","activerecord (7.0.8.4) lib/active_record/connection_handling.rb:313:in `retrieve_connection'","lib/feature.rb:15:in `connection'","activerecord (7.0.8.4) lib/active_record/model_schema.rb:407:in `table_exists?'","lib/gitlab/database/query_analyzers/ci/partitioning_routing_analyzer.rb:22:in `enabled?'","lib/gitlab/database/query_analyzer.rb:95:in `block in begin!'","lib/gitlab/database/query_analyzer.rb:92:in `select'","lib/gitlab/database/query_analyzer.rb:92:in `begin!'","lib/gitlab/database/query_analyzer.rb:80:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"PG::ConnectionBad","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":null,"tags.correlation_id":"01JWDKN01FQ6VTSDT5466YR3CA"}
{"severity":"ERROR","time":"2025-05-29T08:48:28.279Z","correlation_id":"01JWDKN01FQ6VTSDT5466YR3CA","exception.class":"ActiveRecord::DatabaseConnectionError","exception.message":"There is an issue connecting to your database with your username/password, username: gitlab.\n\nPlease check your database configuration to ensure the username/password are valid.\n","exception.backtrace":["activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'","activerecord (7.0.8.4) lib/active_record/connection_handling.rb:313:in `retrieve_connection'","lib/feature.rb:15:in `connection'","activerecord (7.0.8.4) lib/active_record/model_schema.rb:407:in `table_exists?'","lib/gitlab/database/query_analyzers/log_large_in_lists.rb:24:in `enabled?'","lib/gitlab/database/query_analyzer.rb:95:in `block in begin!'","lib/gitlab/database/query_analyzer.rb:92:in `select'","lib/gitlab/database/query_analyzer.rb:92:in `begin!'","lib/gitlab/database/query_analyzer.rb:80:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"PG::ConnectionBad","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":null,"tags.correlation_id":"01JWDKN01FQ6VTSDT5466YR3CA"}
{"severity":"ERROR","time":"2025-05-29T08:48:28.300Z","correlation_id":"01JWDKN01FQ6VTSDT5466YR3CA","meta.caller_id":"POST /api/:version/internal/allowed","meta.remote_ip":"127.0.0.1","meta.feature_category":"source_code_management","meta.client_id":"ip/127.0.0.1","exception.class":"ActiveRecord::DatabaseConnectionError","exception.message":"There is an issue connecting to your database with your username/password, username: gitlab.\n\nPlease check your database configuration to ensure the username/password are valid.\n","exception.backtrace":["activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'","lib/gitlab/database/load_balancing/primary_host.rb:44:in `connection'","lib/gitlab/database/load_balancing/load_balancer.rb:64:in `read'","lib/gitlab/database/load_balancing/connection_proxy.rb:110:in `read_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:54:in `block (2 levels) in \u003cclass:ConnectionProxy\u003e'","activerecord (7.0.8.4) lib/active_record/relation/query_methods.rb:1383:in `build_arel'","config/initializers/postgresql_cte.rb:103:in `build_arel'","activerecord (7.0.8.4) lib/active_record/relation/query_methods.rb:1301:in `arel'","activerecord (7.0.8.4) lib/active_record/relation.rb:942:in `block in exec_main_query'","activerecord (7.0.8.4) lib/active_record/relation.rb:962:in `skip_query_cache_if_necessary'","activerecord (7.0.8.4) lib/active_record/relation.rb:928:in `exec_main_query'","activerecord (7.0.8.4) lib/active_record/relation.rb:914:in `block in exec_queries'","activerecord (7.0.8.4) lib/active_record/relation.rb:962:in `skip_query_cache_if_necessary'","activerecord (7.0.8.4) lib/active_record/relation.rb:908:in `exec_queries'","gems/activerecord-gitlab/lib/active_record/gitlab_patches/rescue_from.rb:31:in `exec_queries'","activerecord (7.0.8.4) lib/active_record/relation.rb:695:in `load'","activerecord (7.0.8.4) lib/active_record/relation.rb:250:in `records'","activerecord (7.0.8.4) lib/active_record/relation/finder_methods.rb:520:in `find_take'","activerecord (7.0.8.4) lib/active_record/relation/finder_methods.rb:98:in `take'","activerecord (7.0.8.4) lib/active_record/relation/finder_methods.rb:81:in `find_by'","activerecord (7.0.8.4) lib/active_record/querying.rb:22:in `find_by'","activerecord (7.0.8.4) lib/active_record/core.rb:288:in `find_by'","activerecord (7.0.8.4) lib/active_record/dynamic_matchers.rb:66:in `find_by_id'","activerecord (7.0.8.4) lib/active_record/relation/delegation.rb:67:in `block in find_by_id'","activerecord (7.0.8.4) lib/active_record/relation.rb:881:in `_scoping'","activerecord (7.0.8.4) lib/active_record/relation.rb:428:in `scoping'","activerecord (7.0.8.4) lib/active_record/relation/delegation.rb:67:in `find_by_id'","lib/api/support/git_access_actor.rb:19:in `from_params'","ee/lib/ee/api/support/git_access_actor.rb:17:in `from_params'","lib/api/helpers/internal_helpers.rb:13:in `actor'","lib/api/internal/base.rb:15:in `block in \u003cclass:Base\u003e'","grape (2.0.0) lib/grape/endpoint.rb:368:in `instance_eval'","grape (2.0.0) lib/grape/endpoint.rb:368:in `block (2 levels) in run_filters'","grape (2.0.0) lib/grape/endpoint.rb:368:in `each'","grape (2.0.0) lib/grape/endpoint.rb:368:in `block in run_filters'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","grape (2.0.0) lib/grape/endpoint.rb:367:in `run_filters'","grape (2.0.0) lib/grape/endpoint.rb:248:in `block in run'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","grape (2.0.0) lib/grape/endpoint.rb:240:in `run'","grape (2.0.0) lib/grape/endpoint.rb:316:in `block in build_stack'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","ee/lib/gitlab/middleware/ip_restrictor.rb:11:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","lib/api/api_guard.rb:219:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/resource.rb:20:in `_call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/resource/bearer.rb:8:in `_call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/abstract/handler.rb:17:in `call'","grape (2.0.0) lib/grape/middleware/error.rb:39:in `block in call!'","grape (2.0.0) lib/grape/middleware/error.rb:38:in `catch'","grape (2.0.0) lib/grape/middleware/error.rb:38:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:60:in `block in call!'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:58:in `catch'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:58:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","grape (2.0.0) lib/grape/endpoint.rb:224:in `call!'","grape (2.0.0) lib/grape/endpoint.rb:218:in `call'","grape (2.0.0) lib/grape/router/route.rb:58:in `exec'","grape (2.0.0) lib/grape/router.rb:120:in `process_route'","grape (2.0.0) lib/grape/router.rb:74:in `block in identity'","grape (2.0.0) lib/grape/router.rb:94:in `transaction'","grape (2.0.0) lib/grape/router.rb:72:in `identity'","grape (2.0.0) lib/grape/router.rb:56:in `block in call'","grape (2.0.0) lib/grape/router.rb:136:in `with_optimization'","grape (2.0.0) lib/grape/router.rb:55:in `call'","grape (2.0.0) lib/grape/api/instance.rb:165:in `call'","grape (2.0.0) lib/grape/api/instance.rb:70:in `call!'","grape (2.0.0) lib/grape/api/instance.rb:65:in `call'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:19:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"PG::ConnectionBad","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDKN01FQ6VTSDT5466YR3CA"}
{"severity":"ERROR","time":"2025-05-29T08:48:31.983Z","correlation_id":"01JWDKN39GAMBE9VMSYXZNDCR9","meta.caller_id":"ProjectsController#show","meta.feature_category":"groups_and_projects","meta.organization_id":1,"meta.remote_ip":"10.216.38.123","meta.user":"uidq9868","meta.user_id":3224,"meta.project":"ida/ad_alg_dev/codes/fusion/fusion_se_group/alg_fusion_sr","meta.root_namespace":"ida","meta.client_id":"user/3224","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/90/60/9060e74b567bdc31e0f9b0ddd43a738a235dc59dae2fb9041d0fb177f6d0ebf2.wiki.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 for-each-ref --format=%(refname)%00%(objectname)%00%(symref) --count=1 --end-of-options refs/heads/]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:1329:in `uncached_has_local_branches?'","lib/gitlab/git/repository.rb:179:in `block in has_local_branches?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","lib/gitlab/git/repository.rb:178:in `has_local_branches?'","app/models/repository.rb:614:in `has_visible_content?'","lib/gitlab/repository_cache_adapter.rb:95:in `block (2 levels) in cache_method_asymmetrically'","lib/gitlab/repository_cache.rb:44:in `fetch_without_caching_false'","lib/gitlab/repository_cache_adapter.rb:190:in `block (2 levels) in cache_method_output_asymmetrically'","request_store (1.5.1) lib/request_store.rb:51:in `fetch'","/opt/gitlab/embedded/lib/ruby/3.2.0/forwardable.rb:240:in `fetch'","lib/gitlab/repository_cache.rb:25:in `fetch'","lib/gitlab/repository_cache_adapter.rb:189:in `block in cache_method_output_asymmetrically'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","lib/gitlab/repository_cache_adapter.rb:203:in `block in memoize_method_output'","lib/gitlab/repository_cache_adapter.rb:212:in `no_repository_fallback'","lib/gitlab/repository_cache_adapter.rb:202:in `memoize_method_output'","lib/gitlab/repository_cache_adapter.rb:188:in `cache_method_output_asymmetrically'","lib/gitlab/repository_cache_adapter.rb:94:in `block in cache_method_asymmetrically'","app/models/repository.rb:582:in `empty?'","app/models/concerns/has_repository.rb:79:in `default_branch'","app/models/wiki.rb:416:in `block in default_branch'","lib/gitlab/git/wraps_gitaly_errors.rb:7:in `wrapped_gitaly_errors'","app/models/wiki.rb:445:in `capture_git_error'","app/models/wiki.rb:415:in `default_branch'","app/models/wiki.rb:261:in `block in find_page'","lib/gitlab/git/wraps_gitaly_errors.rb:7:in `wrapped_gitaly_errors'","app/models/wiki.rb:445:in `capture_git_error'","app/models/wiki.rb:258:in `find_page'","app/models/wiki.rb:190:in `has_home_page?'","app/presenters/project_presenter.rb:409:in `wiki_anchor_data'","app/presenters/project_presenter.rb:73:in `empty_repo_statistics_buttons'","app/views/projects/_sidebar.html.haml:4","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/show.html.haml:21","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:75:in `block in render_with_layout'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:74:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/rendering.rb:117:in `block in _render_template'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/rendering.rb:116:in `_render_template'","actionpack (7.0.8.4) lib/action_controller/metal/streaming.rb:216:in `_render_template'","actionview (7.0.8.4) lib/action_view/rendering.rb:103:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:158:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'","actionpack (7.0.8.4) lib/abstract_controller/rendering.rb:27:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:139:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block (2 levels) in render'","/opt/gitlab/embedded/lib/ruby/3.2.0/benchmark.rb:311:in `realtime'","activesupport (7.0.8.4) lib/active_support/core_ext/benchmark.rb:14:in `ms'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block in render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:91:in `cleanup_view_runtime'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:34:in `cleanup_view_runtime'","elasticsearch-rails (7.2.1) lib/elasticsearch/rails/instrumentation/controller_runtime.rb:37:in `cleanup_view_runtime'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:21:in `render'","app/controllers/application_controller.rb:156:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/implicit_render.rb:35:in `default_render'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:7:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","app/controllers/application_controller.rb:552:in `block in allow_gitaly_ref_name_caching'","lib/gitlab/gitaly_client.rb:473:in `allow_ref_name_caching'","app/controllers/application_controller.rb:551:in `allow_gitaly_ref_name_caching'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:18:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:repository_service, :rpc=\u003e:has_local_branches}","user.username":"uidq9868","tags.program":"web","tags.locale":"en","tags.feature_category":"groups_and_projects","tags.correlation_id":"01JWDKN39GAMBE9VMSYXZNDCR9","extra.action":"default_branch","extra.wiki_id":33390}
{"severity":"ERROR","time":"2025-05-29T08:48:31.988Z","correlation_id":"01JWDKN39GAMBE9VMSYXZNDCR9","meta.caller_id":"ProjectsController#show","meta.feature_category":"groups_and_projects","meta.organization_id":1,"meta.remote_ip":"10.216.38.123","meta.user":"uidq9868","meta.user_id":3224,"meta.project":"ida/ad_alg_dev/codes/fusion/fusion_se_group/alg_fusion_sr","meta.root_namespace":"ida","meta.client_id":"user/3224","exception.class":"Gitlab::Git::CommandError","exception.message":"13:cmd start failed: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/90/60/9060e74b567bdc31e0f9b0ddd43a738a235dc59dae2fb9041d0fb177f6d0ebf2.wiki.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 ls-tree --full-tree --name-status -r -z --end-of-options main -- .]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","app/models/wiki.rb:445:in `capture_git_error'","app/models/wiki.rb:542:in `find_file_by_title'","app/models/wiki.rb:534:in `find_matched_file'","app/models/wiki.rb:262:in `block in find_page'","lib/gitlab/git/wraps_gitaly_errors.rb:7:in `wrapped_gitaly_errors'","app/models/wiki.rb:445:in `capture_git_error'","app/models/wiki.rb:258:in `find_page'","app/models/wiki.rb:190:in `has_home_page?'","app/presenters/project_presenter.rb:409:in `wiki_anchor_data'","app/presenters/project_presenter.rb:73:in `empty_repo_statistics_buttons'","app/views/projects/_sidebar.html.haml:4","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/show.html.haml:21","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:75:in `block in render_with_layout'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:74:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/rendering.rb:117:in `block in _render_template'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/rendering.rb:116:in `_render_template'","actionpack (7.0.8.4) lib/action_controller/metal/streaming.rb:216:in `_render_template'","actionview (7.0.8.4) lib/action_view/rendering.rb:103:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:158:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'","actionpack (7.0.8.4) lib/abstract_controller/rendering.rb:27:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:139:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block (2 levels) in render'","/opt/gitlab/embedded/lib/ruby/3.2.0/benchmark.rb:311:in `realtime'","activesupport (7.0.8.4) lib/active_support/core_ext/benchmark.rb:14:in `ms'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block in render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:91:in `cleanup_view_runtime'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:34:in `cleanup_view_runtime'","elasticsearch-rails (7.2.1) lib/elasticsearch/rails/instrumentation/controller_runtime.rb:37:in `cleanup_view_runtime'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:21:in `render'","app/controllers/application_controller.rb:156:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/implicit_render.rb:35:in `default_render'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:7:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","app/controllers/application_controller.rb:552:in `block in allow_gitaly_ref_name_caching'","lib/gitlab/gitaly_client.rb:473:in `allow_ref_name_caching'","app/controllers/application_controller.rb:551:in `allow_gitaly_ref_name_caching'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:18:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:repository_service, :rpc=\u003e:search_files_by_name}","user.username":"uidq9868","tags.program":"web","tags.locale":"en","tags.feature_category":"groups_and_projects","tags.correlation_id":"01JWDKN39GAMBE9VMSYXZNDCR9","extra.action":"find","extra.wiki_id":33390}
{"severity":"ERROR","time":"2025-05-29T08:48:31.993Z","correlation_id":"01JWDKN39GAMBE9VMSYXZNDCR9","meta.caller_id":"ProjectsController#show","meta.feature_category":"groups_and_projects","meta.organization_id":1,"meta.remote_ip":"10.216.38.123","meta.user":"uidq9868","meta.user_id":3224,"meta.project":"ida/ad_alg_dev/codes/fusion/fusion_se_group/alg_fusion_sr","meta.root_namespace":"ida","meta.client_id":"user/3224","exception.class":"Gitlab::Git::CommandError","exception.message":"13:cmd start failed: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/90/60/9060e74b567bdc31e0f9b0ddd43a738a235dc59dae2fb9041d0fb177f6d0ebf2.wiki.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 ls-tree --full-tree --name-status -r -z --end-of-options main -- .]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","app/models/wiki.rb:445:in `capture_git_error'","app/models/wiki.rb:542:in `find_file_by_title'","app/models/wiki.rb:535:in `find_matched_file'","app/models/wiki.rb:262:in `block in find_page'","lib/gitlab/git/wraps_gitaly_errors.rb:7:in `wrapped_gitaly_errors'","app/models/wiki.rb:445:in `capture_git_error'","app/models/wiki.rb:258:in `find_page'","app/models/wiki.rb:190:in `has_home_page?'","app/presenters/project_presenter.rb:409:in `wiki_anchor_data'","app/presenters/project_presenter.rb:73:in `empty_repo_statistics_buttons'","app/views/projects/_sidebar.html.haml:4","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/show.html.haml:21","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:75:in `block in render_with_layout'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:74:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/rendering.rb:117:in `block in _render_template'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/rendering.rb:116:in `_render_template'","actionpack (7.0.8.4) lib/action_controller/metal/streaming.rb:216:in `_render_template'","actionview (7.0.8.4) lib/action_view/rendering.rb:103:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:158:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'","actionpack (7.0.8.4) lib/abstract_controller/rendering.rb:27:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:139:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block (2 levels) in render'","/opt/gitlab/embedded/lib/ruby/3.2.0/benchmark.rb:311:in `realtime'","activesupport (7.0.8.4) lib/active_support/core_ext/benchmark.rb:14:in `ms'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block in render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:91:in `cleanup_view_runtime'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:34:in `cleanup_view_runtime'","elasticsearch-rails (7.2.1) lib/elasticsearch/rails/instrumentation/controller_runtime.rb:37:in `cleanup_view_runtime'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:21:in `render'","app/controllers/application_controller.rb:156:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/implicit_render.rb:35:in `default_render'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:7:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","app/controllers/application_controller.rb:552:in `block in allow_gitaly_ref_name_caching'","lib/gitlab/gitaly_client.rb:473:in `allow_ref_name_caching'","app/controllers/application_controller.rb:551:in `allow_gitaly_ref_name_caching'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:18:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:repository_service, :rpc=\u003e:search_files_by_name}","user.username":"uidq9868","tags.program":"web","tags.locale":"en","tags.feature_category":"groups_and_projects","tags.correlation_id":"01JWDKN39GAMBE9VMSYXZNDCR9","extra.action":"find","extra.wiki_id":33390}
{"severity":"ERROR","time":"2025-05-29T08:48:32.009Z","correlation_id":"01JWDKN39GAMBE9VMSYXZNDCR9","meta.caller_id":"ProjectsController#show","meta.feature_category":"groups_and_projects","meta.organization_id":1,"meta.remote_ip":"10.216.38.123","meta.user":"uidq9868","meta.user_id":3224,"meta.project":"ida/ad_alg_dev/codes/fusion/fusion_se_group/alg_fusion_sr","meta.root_namespace":"ida","meta.client_id":"user/3224","exception.class":"Gitlab::Git::CommandError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/90/60/9060e74b567bdc31e0f9b0ddd43a738a235dc59dae2fb9041d0fb177f6d0ebf2.wiki.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 for-each-ref --format=%(refname)%00%(objectname)%00%(symref) --count=1 --end-of-options refs/heads/]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:1329:in `uncached_has_local_branches?'","lib/gitlab/git/repository.rb:179:in `block in has_local_branches?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","lib/gitlab/git/repository.rb:178:in `has_local_branches?'","app/models/repository.rb:614:in `has_visible_content?'","lib/gitlab/repository_cache_adapter.rb:95:in `block (2 levels) in cache_method_asymmetrically'","lib/gitlab/repository_cache.rb:44:in `fetch_without_caching_false'","lib/gitlab/repository_cache_adapter.rb:190:in `block (2 levels) in cache_method_output_asymmetrically'","request_store (1.5.1) lib/request_store.rb:51:in `fetch'","/opt/gitlab/embedded/lib/ruby/3.2.0/forwardable.rb:240:in `fetch'","lib/gitlab/repository_cache.rb:25:in `fetch'","lib/gitlab/repository_cache_adapter.rb:189:in `block in cache_method_output_asymmetrically'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","lib/gitlab/repository_cache_adapter.rb:203:in `block in memoize_method_output'","lib/gitlab/repository_cache_adapter.rb:212:in `no_repository_fallback'","lib/gitlab/repository_cache_adapter.rb:202:in `memoize_method_output'","lib/gitlab/repository_cache_adapter.rb:188:in `cache_method_output_asymmetrically'","lib/gitlab/repository_cache_adapter.rb:94:in `block in cache_method_asymmetrically'","app/models/repository.rb:582:in `empty?'","app/models/concerns/has_repository.rb:79:in `default_branch'","app/models/wiki.rb:416:in `block in default_branch'","lib/gitlab/git/wraps_gitaly_errors.rb:7:in `wrapped_gitaly_errors'","app/models/wiki.rb:445:in `capture_git_error'","app/models/wiki.rb:415:in `default_branch'","app/models/wiki.rb:261:in `block in find_page'","lib/gitlab/git/wraps_gitaly_errors.rb:7:in `wrapped_gitaly_errors'","app/models/wiki.rb:445:in `capture_git_error'","app/models/wiki.rb:258:in `find_page'","app/models/wiki.rb:190:in `has_home_page?'","app/presenters/project_presenter.rb:409:in `wiki_anchor_data'","app/presenters/project_presenter.rb:54:in `statistics_buttons'","app/views/projects/_sidebar.html.haml:5","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/show.html.haml:21","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:75:in `block in render_with_layout'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:74:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/rendering.rb:117:in `block in _render_template'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/rendering.rb:116:in `_render_template'","actionpack (7.0.8.4) lib/action_controller/metal/streaming.rb:216:in `_render_template'","actionview (7.0.8.4) lib/action_view/rendering.rb:103:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:158:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'","actionpack (7.0.8.4) lib/abstract_controller/rendering.rb:27:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:139:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block (2 levels) in render'","/opt/gitlab/embedded/lib/ruby/3.2.0/benchmark.rb:311:in `realtime'","activesupport (7.0.8.4) lib/active_support/core_ext/benchmark.rb:14:in `ms'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block in render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:91:in `cleanup_view_runtime'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:34:in `cleanup_view_runtime'","elasticsearch-rails (7.2.1) lib/elasticsearch/rails/instrumentation/controller_runtime.rb:37:in `cleanup_view_runtime'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:21:in `render'","app/controllers/application_controller.rb:156:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/implicit_render.rb:35:in `default_render'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:7:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","app/controllers/application_controller.rb:552:in `block in allow_gitaly_ref_name_caching'","lib/gitlab/gitaly_client.rb:473:in `allow_ref_name_caching'","app/controllers/application_controller.rb:551:in `allow_gitaly_ref_name_caching'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:18:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:repository_service, :rpc=\u003e:has_local_branches}","user.username":"uidq9868","tags.program":"web","tags.locale":"en","tags.feature_category":"groups_and_projects","tags.correlation_id":"01JWDKN39GAMBE9VMSYXZNDCR9","extra.action":"default_branch","extra.wiki_id":33390}
{"severity":"ERROR","time":"2025-05-29T08:48:32.854Z","meta.feature_category":"observability","correlation_id":"37ddf19f2dd915d2f2b90852b667bd34","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"216772db7205cf917c20d6ef","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"37ddf19f2dd915d2f2b90852b667bd34"}
{"severity":"ERROR","time":"2025-05-29T08:48:49.026Z","correlation_id":"01JWDKNJ15EBB2MR0721VS5FMY","meta.caller_id":"MergeWorker","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.132.10.196","meta.user":"uidq4979","meta.user_id":2188,"meta.project":"svbic/chj/chj_racp_2026_preview","meta.root_namespace":"svbic","meta.client_id":"user/2188","meta.root_caller_id":"Projects::MergeRequestsController#merge","exception.class":"Gitlab::Git::CommandError","exception.message":"13:error when running update-ref command: exit status 128.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:873:in `write_ref'","lib/gitlab/git/keep_around.rb:43:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/models/merge_request.rb:2161:in `keep_around_commit'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:236:in `block in halting_and_conditional'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `block in invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `each'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:132:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:929:in `_run_save_callbacks'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:455:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/timestamp.rb:126:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/persistence.rb:648:in `save!'","activerecord (7.0.8.4) lib/active_record/validations.rb:53:in `save!'","activerecord (7.0.8.4) lib/active_record/transactions.rb:302:in `block in save!'","activerecord (7.0.8.4) lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:314:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:350:in `with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/transactions.rb:302:in `save!'","activerecord (7.0.8.4) lib/active_record/suppressor.rb:54:in `save!'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:515:in `block in save!'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:530:in `block in around_save'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:150:in `block in run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:170:in `catch_exceptions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:148:in `run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:133:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:212:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `block (2 levels) in perform'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `catch'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `block in perform'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:186:in `within_transaction'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:62:in `perform'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:530:in `around_save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:515:in `save!'","activerecord (7.0.8.4) lib/active_record/persistence.rb:782:in `block in update!'","activerecord (7.0.8.4) lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:316:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:350:in `with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/persistence.rb:780:in `update!'","app/services/merge_requests/merge_service.rb:85:in `commit'","app/services/merge_requests/merge_service.rb:31:in `block in execute'","app/models/merge_request.rb:1786:in `in_locked_state'","app/services/merge_requests/merge_service.rb:30:in `execute'","app/workers/merge_worker.rb:32:in `perform'","jh/app/workers/jh/merge_worker.rb:9:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executed.rb:17:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:repository_service, :rpc=\u003e:write_ref}","user.username":"uidq4979","tags.queue":"default","tags.jid":"e457a0aee1c8c0220f39fa23","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKNJ15EBB2MR0721VS5FMY","extra.object_id":"a563a775f977ab1f2cfabfc5c6b38d185f46faf5"}
{"severity":"ERROR","time":"2025-05-29T08:48:49.572Z","correlation_id":"01JWDKNJ15EBB2MR0721VS5FMY","meta.caller_id":"MergeWorker","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.132.10.196","meta.user":"uidq4979","meta.user_id":2188,"meta.project":"svbic/chj/chj_racp_2026_preview","meta.root_namespace":"svbic","meta.client_id":"user/2188","meta.root_caller_id":"Projects::MergeRequestsController#merge","exception.class":"Gitlab::Git::CommandError","exception.message":"13:error when running update-ref command: exit status 128.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:873:in `write_ref'","lib/gitlab/git/keep_around.rb:43:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/models/merge_request.rb:2161:in `keep_around_commit'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:236:in `block in halting_and_conditional'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `block in invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `each'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:132:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:929:in `_run_save_callbacks'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:455:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/timestamp.rb:126:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/persistence.rb:615:in `save'","activerecord (7.0.8.4) lib/active_record/validations.rb:47:in `save'","activerecord (7.0.8.4) lib/active_record/transactions.rb:298:in `block in save'","activerecord (7.0.8.4) lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:314:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:350:in `with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/transactions.rb:298:in `save'","activerecord (7.0.8.4) lib/active_record/suppressor.rb:50:in `save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:511:in `block in save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:530:in `block in around_save'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:150:in `block in run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:170:in `catch_exceptions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:148:in `run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:133:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:212:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `block (2 levels) in perform'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `catch'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `block in perform'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:186:in `within_transaction'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:62:in `perform'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:530:in `around_save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:511:in `save'","activerecord (7.0.8.4) lib/active_record/persistence.rb:771:in `block in update'","activerecord (7.0.8.4) lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:316:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:350:in `with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/persistence.rb:769:in `update'","app/models/merge_request.rb:1796:in `update_and_mark_in_progress_merge_commit_sha'","app/services/merge_requests/merge_service.rb:89:in `commit'","app/services/merge_requests/merge_service.rb:31:in `block in execute'","app/models/merge_request.rb:1786:in `in_locked_state'","app/services/merge_requests/merge_service.rb:30:in `execute'","app/workers/merge_worker.rb:32:in `perform'","jh/app/workers/jh/merge_worker.rb:9:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executed.rb:17:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:repository_service, :rpc=\u003e:write_ref}","user.username":"uidq4979","tags.queue":"default","tags.jid":"e457a0aee1c8c0220f39fa23","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKNJ15EBB2MR0721VS5FMY","extra.object_id":"a563a775f977ab1f2cfabfc5c6b38d185f46faf5"}
{"severity":"ERROR","time":"2025-05-29T08:48:50.237Z","correlation_id":"01JWDKNJ15EBB2MR0721VS5FMY","meta.caller_id":"MergeWorker","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.132.10.196","meta.user":"uidq4979","meta.user_id":2188,"meta.project":"svbic/chj/chj_racp_2026_preview","meta.root_namespace":"svbic","meta.client_id":"user/2188","meta.root_caller_id":"Projects::MergeRequestsController#merge","exception.class":"Gitlab::Git::CommandError","exception.message":"13:error when running update-ref command: exit status 128.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:873:in `write_ref'","lib/gitlab/git/keep_around.rb:43:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/models/merge_request.rb:2161:in `keep_around_commit'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:236:in `block in halting_and_conditional'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `block in invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `each'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:132:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:929:in `_run_save_callbacks'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:455:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/timestamp.rb:126:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/persistence.rb:615:in `save'","activerecord (7.0.8.4) lib/active_record/validations.rb:47:in `save'","activerecord (7.0.8.4) lib/active_record/transactions.rb:298:in `block in save'","activerecord (7.0.8.4) lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:314:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:350:in `with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/transactions.rb:298:in `save'","activerecord (7.0.8.4) lib/active_record/suppressor.rb:50:in `save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:511:in `block in save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:530:in `block in around_save'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:150:in `block in run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:170:in `catch_exceptions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:148:in `run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:133:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:224:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:128:in `block in run_callbacks'","state_machines (0.5.0) lib/state_machines/transition.rb:371:in `before'","state_machines (0.5.0) lib/state_machines/transition.rb:190:in `block in run_callbacks'","state_machines (0.5.0) lib/state_machines/transition.rb:292:in `block in pausable'","state_machines (0.5.0) lib/state_machines/transition.rb:292:in `catch'","state_machines (0.5.0) lib/state_machines/transition.rb:292:in `pausable'","state_machines (0.5.0) lib/state_machines/transition.rb:190:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:127:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:212:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `block (2 levels) in perform'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `catch'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `block in perform'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:182:in `block in within_transaction'","state_machines (0.5.0) lib/state_machines/transition.rb:171:in `block in within_transaction'","state_machines (0.5.0) lib/state_machines/machine.rb:1868:in `block in within_transaction'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:557:in `block in transaction'","app/models/concerns/cross_database_modification.rb:91:in `block in transaction'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:316:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:209:in `transaction'","lib/gitlab/database.rb:394:in `block in transaction'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","lib/gitlab/database.rb:393:in `transaction'","app/models/concerns/cross_database_modification.rb:82:in `transaction'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:556:in `transaction'","state_machines (0.5.0) lib/state_machines/machine.rb:1868:in `within_transaction'","state_machines (0.5.0) lib/state_machines/transition.rb:170:in `within_transaction'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:181:in `within_transaction'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:62:in `perform'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:530:in `around_save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:511:in `save'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:154:in `block (2 levels) in run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:154:in `each'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:154:in `block in run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:170:in `catch_exceptions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:148:in `run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:60:in `perform'","state_machines (0.5.0) lib/state_machines/transition.rb:163:in `perform'","state_machines (0.5.0) lib/state_machines/event.rb:155:in `fire'","state_machines (0.5.0) lib/state_machines/event.rb:219:in `block in add_actions'","state_machines (0.5.0) lib/state_machines/machine.rb:729:in `block (2 levels) in define_helper'","app/services/merge_requests/post_merge_service.rb:19:in `execute'","ee/app/services/ee/merge_requests/post_merge_service.rb:10:in `execute'","app/services/merge_requests/merge_service.rb:109:in `after_merge'","ee/app/services/ee/merge_requests/merge_service.rb:9:in `after_merge'","app/services/merge_requests/merge_service.rb:32:in `block in execute'","app/models/merge_request.rb:1786:in `in_locked_state'","app/services/merge_requests/merge_service.rb:30:in `execute'","app/workers/merge_worker.rb:32:in `perform'","jh/app/workers/jh/merge_worker.rb:9:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executed.rb:17:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:repository_service, :rpc=\u003e:write_ref}","user.username":"uidq4979","tags.queue":"default","tags.jid":"e457a0aee1c8c0220f39fa23","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKNJ15EBB2MR0721VS5FMY","extra.object_id":"a563a775f977ab1f2cfabfc5c6b38d185f46faf5"}
{"severity":"ERROR","time":"2025-05-29T08:48:53.088Z","meta.feature_category":"observability","correlation_id":"aa063881f3708d9717f5251ec85383a9","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"a8aa1c39df9c75814a5636bb","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"aa063881f3708d9717f5251ec85383a9"}
{"severity":"ERROR","time":"2025-05-29T08:48:53.499Z","correlation_id":"01JWDKNRF5MKRT3SS0PNEZK3ST","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.129.18.150","meta.user":"uidq5157","meta.user_id":2227,"meta.client_id":"user/2227","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/c1/e2/c1e20d7cfc154317fe4c769cca710227240f32856c0d2845a6e5635d9a3919d2.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/c1/e2/c1e20d7cfc154317fe4c769cca710227240f32856c0d2845a6e5635d9a3919d2.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:48:53.493372357+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 45: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uidq5157","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKNRF5MKRT3SS0PNEZK3ST"}
{"severity":"ERROR","time":"2025-05-29T08:48:55.261Z","correlation_id":"01JWDKNT8JXB20323AB0JKJ306","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.129.18.33","meta.user":"uidq2411","meta.user_id":1196,"meta.client_id":"user/1196","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/26/3d/263d9a5fa843afcb65bef807f7606e4eb0326201cfee9dbe5caa3e63484e77d6.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {created_time:\"2025-05-29T16:48:55.253223019+08:00\", grpc_status:13, grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/26/3d/263d9a5fa843afcb65bef807f7606e4eb0326201cfee9dbe5caa3e63484e77d6.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 12: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uidq2411","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKNT8JXB20323AB0JKJ306"}
{"severity":"ERROR","time":"2025-05-29T08:49:01.613Z","meta.feature_category":"observability","correlation_id":"09e451ea9b69f3840fc5e558924083bc","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"481dbc018dc583cb9e7f7a9d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"09e451ea9b69f3840fc5e558924083bc"}
{"severity":"ERROR","time":"2025-05-29T08:49:06.180Z","meta.feature_category":"observability","correlation_id":"37ddf19f2dd915d2f2b90852b667bd34","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"216772db7205cf917c20d6ef","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"37ddf19f2dd915d2f2b90852b667bd34"}
{"severity":"ERROR","time":"2025-05-29T08:49:08.202Z","correlation_id":"01JWDKP4REBPJSYSJ7Z2V1NFKV","meta.caller_id":"Projects::MergeRequests::CreationsController#new","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.218.12.36","meta.user":"ext10385","meta.user_id":3965,"meta.project":"svsap/android-repo/vendor/desaysv/g7ph/device","meta.root_namespace":"svsap","meta.client_id":"user/3965","exception.class":"Timeout::Error","exception.message":"execution expired","exception.backtrace":["\u003cinternal:/opt/gitlab/embedded/lib/ruby/site_ruby/3.2.0/rubygems/core_ext/kernel_require.rb\u003e:37:in `require'","\u003cinternal:/opt/gitlab/embedded/lib/ruby/site_ruby/3.2.0/rubygems/core_ext/kernel_require.rb\u003e:37:in `require'","zeitwerk (2.6.7) lib/zeitwerk/kernel.rb:38:in `require'","tanuki_emoji (0.13.0) lib/tanuki_emoji/index.rb:119:in `load_data_files'","tanuki_emoji (0.13.0) lib/tanuki_emoji/index.rb:107:in `initialize'","/opt/gitlab/embedded/lib/ruby/3.2.0/singleton.rb:127:in `new'","/opt/gitlab/embedded/lib/ruby/3.2.0/singleton.rb:127:in `block in instance'","/opt/gitlab/embedded/lib/ruby/3.2.0/singleton.rb:125:in `synchronize'","/opt/gitlab/embedded/lib/ruby/3.2.0/singleton.rb:125:in `instance'","tanuki_emoji (0.13.0) lib/tanuki_emoji.rb:33:in `index'","lib/banzai/filter/emoji_filter.rb:81:in `emoji_pattern'","lib/banzai/filter/emoji_filter.rb:93:in `emoji_pattern'","lib/banzai/filter/emoji_filter.rb:43:in `emoji_name_element_unicode_filter'","lib/banzai/filter/emoji_filter.rb:26:in `block in call'","nokogiri-1.16.7-x86_64 (linux) lib/nokogiri/xml/node_set.rb:235:in `block in each'","nokogiri-1.16.7-x86_64 (linux) lib/nokogiri/xml/node_set.rb:234:in `upto'","nokogiri-1.16.7-x86_64 (linux) lib/nokogiri/xml/node_set.rb:234:in `each'","lib/banzai/filter/emoji_filter.rb:19:in `call'","lib/banzai/filter/concerns/timeout_filter_handler.rb:37:in `block in call'","timeout (0.3.2) lib/timeout.rb:189:in `block in timeout'","timeout (0.3.2) lib/timeout.rb:36:in `block in catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:198:in `timeout'","lib/gitlab/render_timeout.rb:11:in `timeout'","lib/banzai/filter/concerns/timeout_filter_handler.rb:37:in `call'","lib/banzai/filter/concerns/pipeline_timing_check.rb:26:in `call'","html-pipeline (2.14.3) lib/html/pipeline/filter.rb:129:in `call'","html-pipeline (2.14.3) lib/html/pipeline.rb:134:in `block in perform_filter'","html-pipeline (2.14.3) lib/html/pipeline.rb:174:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","html-pipeline (2.14.3) lib/html/pipeline.rb:173:in `instrument'","html-pipeline (2.14.3) lib/html/pipeline.rb:133:in `perform_filter'","html-pipeline (2.14.3) lib/html/pipeline.rb:119:in `block (2 levels) in call'","html-pipeline (2.14.3) lib/html/pipeline.rb:118:in `each'","html-pipeline (2.14.3) lib/html/pipeline.rb:118:in `inject'","html-pipeline (2.14.3) lib/html/pipeline.rb:118:in `block in call'","html-pipeline (2.14.3) lib/html/pipeline.rb:174:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","html-pipeline (2.14.3) lib/html/pipeline.rb:173:in `instrument'","html-pipeline (2.14.3) lib/html/pipeline.rb:116:in `call'","lib/banzai/pipeline/base_pipeline.rb:26:in `block (2 levels) in singleton class'","lib/banzai/renderer.rb:131:in `block in render_result'","lib/banzai/renderer.rb:221:in `instrument_filters'","lib/banzai/renderer.rb:129:in `render_result'","lib/banzai/renderer.rb:165:in `cacheless_render'","lib/banzai/renderer.rb:53:in `cacheless_render_field'","app/models/concerns/cache_markdown_field.rb:52:in `rendered_field_content'","app/models/concerns/cache_markdown_field.rb:61:in `block in refresh_markdown_cache'","app/models/concerns/cache_markdown_field.rb:58:in `to_h'","app/models/concerns/cache_markdown_field.rb:58:in `refresh_markdown_cache'","app/models/concerns/cache_markdown_field.rb:71:in `refresh_markdown_cache!'","lib/banzai/renderer.rb:43:in `render_field'","lib/banzai.rb:20:in `render_field'","lib/banzai/object_renderer.rb:53:in `block in render_documents'","lib/banzai/object_renderer.rb:52:in `map'","lib/banzai/object_renderer.rb:52:in `render_documents'","lib/banzai/object_renderer.rb:35:in `render'","lib/banzai/commit_renderer.rb:10:in `block in render'","lib/banzai/commit_renderer.rb:10:in `each'","lib/banzai/commit_renderer.rb:10:in `render'","app/controllers/concerns/renders_commits.rb:28:in `prepare_commits_for_rendering'","app/controllers/concerns/renders_commits.rb:20:in `set_commits_for_rendering'","app/controllers/projects/merge_requests/creations_controller.rb:133:in `define_new_vars'","app/controllers/projects/merge_requests/creations_controller.rb:30:in `new'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:18:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"user.username":"ext10385","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKP4REBPJSYSJ7Z2V1NFKV","extra.project_id":10443,"extra.group_id":null,"extra.class_name":"EmojiFilter"}
{"severity":"ERROR","time":"2025-05-29T08:49:11.441Z","correlation_id":"01JWDKPA0NH34V04QR1K9GJXRD","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.132.9.114","meta.user":"uidq4764","meta.user_id":2099,"meta.client_id":"user/2099","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/af/89/af895eb619e7e6619f5e668b0d4184390cb8a617f3a88c8f722afa772066e0bf.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {created_time:\"2025-05-29T16:49:11.432494802+08:00\", grpc_status:13, grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/af/89/af895eb619e7e6619f5e668b0d4184390cb8a617f3a88c8f722afa772066e0bf.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 33: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uidq4764","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKPA0NH34V04QR1K9GJXRD"}
{"severity":"ERROR","time":"2025-05-29T08:49:23.385Z","meta.feature_category":"observability","correlation_id":"d860c14e5e7c17dd8f71dc685638efae","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"d79c20edf8ccecae3d29d5c0","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"d860c14e5e7c17dd8f71dc685638efae"}
{"severity":"ERROR","time":"2025-05-29T08:49:23.507Z","meta.feature_category":"observability","correlation_id":"09e451ea9b69f3840fc5e558924083bc","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"481dbc018dc583cb9e7f7a9d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"09e451ea9b69f3840fc5e558924083bc"}
{"severity":"ERROR","time":"2025-05-29T08:49:24.005Z","correlation_id":"01JWDK6RPGPQRY190F850N8ZQM","meta.caller_id":"MergeRequestResetApprovalsWorker","meta.remote_ip":"127.0.0.1","meta.feature_category":"source_code_management","meta.user":"uidq9582","meta.user_id":3166,"meta.project":"hud/dfn-pk1b-arhud/hmi","meta.root_namespace":"hud","meta.client_id":"user/3166","meta.organization_id":1,"meta.root_caller_id":"POST /api/:version/internal/post_receive","exception.class":"Gitlab::Git::CommandTimedOut","exception.message":"4:Deadline Exceeded.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:48:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:1191:in `get_patch_id'","app/models/repository.rb:1262:in `get_patch_id'","app/models/merge_request_diff.rb:245:in `set_patch_id_sha'","app/models/merge_request_diff.rb:254:in `get_patch_id_sha'","app/models/merge_request.rb:2361:in `current_patch_id_sha'","ee/app/services/merge_requests/reset_approvals_service.rb:17:in `block in reset_approvals_for_merge_requests'","ee/app/services/merge_requests/reset_approvals_service.rb:16:in `each'","ee/app/services/merge_requests/reset_approvals_service.rb:16:in `reset_approvals_for_merge_requests'","ee/app/services/merge_requests/reset_approvals_service.rb:6:in `execute'","ee/app/workers/merge_request_reset_approvals_worker.rb:22:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::DeadlineExceeded","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:diff_service, :rpc=\u003e:get_patch_id}","user.username":"uidq9582","tags.queue":"default","tags.jid":"8c80d3e6d787ad0514d450b3","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDK6RPGPQRY190F850N8ZQM","extra.project_id":45023,"extra.old_revision":"97d95f45329bd9a7b01f3ae2f14891f195ec241e","extra.new_revision":"2d18be0711bae8d382f45ac9c33172f2cbbf0c7f"}
{"severity":"ERROR","time":"2025-05-29T08:49:32.648Z","meta.feature_category":"observability","correlation_id":"92667661238d64ffd12d7b349c14dcd6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"dea2f3be88918a16eb65054d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"92667661238d64ffd12d7b349c14dcd6"}
{"severity":"ERROR","time":"2025-05-29T08:49:49.212Z","meta.feature_category":"observability","correlation_id":"aa063881f3708d9717f5251ec85383a9","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"a8aa1c39df9c75814a5636bb","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"aa063881f3708d9717f5251ec85383a9"}
{"severity":"ERROR","time":"2025-05-29T08:49:51.365Z","meta.feature_category":"observability","correlation_id":"37ddf19f2dd915d2f2b90852b667bd34","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"216772db7205cf917c20d6ef","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"37ddf19f2dd915d2f2b90852b667bd34"}
{"severity":"ERROR","time":"2025-05-29T08:49:58.342Z","meta.feature_category":"observability","correlation_id":"09e451ea9b69f3840fc5e558924083bc","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"481dbc018dc583cb9e7f7a9d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"09e451ea9b69f3840fc5e558924083bc"}
{"severity":"ERROR","time":"2025-05-29T08:50:06.604Z","meta.feature_category":"observability","correlation_id":"212a35fccea24496a2b44574ce5f5c8e","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"e3c0d07891cc6553f01cc0cd","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"212a35fccea24496a2b44574ce5f5c8e"}
{"severity":"ERROR","time":"2025-05-29T08:50:07.894Z","meta.feature_category":"observability","correlation_id":"e75cd343d69965eff1b5f8dbebc2c02c","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"31c420ba779d6393512b1876","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"e75cd343d69965eff1b5f8dbebc2c02c"}
{"severity":"ERROR","time":"2025-05-29T08:50:19.002Z","correlation_id":"01JWDK6RPGPQRY190F850N8ZQM","meta.caller_id":"MergeRequestResetApprovalsWorker","meta.remote_ip":"127.0.0.1","meta.feature_category":"source_code_management","meta.user":"uidq9582","meta.user_id":3166,"meta.project":"hud/dfn-pk1b-arhud/hmi","meta.root_namespace":"hud","meta.client_id":"user/3166","meta.organization_id":1,"meta.root_caller_id":"POST /api/:version/internal/post_receive","exception.class":"Gitlab::Git::CommandTimedOut","exception.message":"4:Deadline Exceeded.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:48:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:1191:in `get_patch_id'","app/models/repository.rb:1262:in `get_patch_id'","app/models/merge_request_diff.rb:245:in `set_patch_id_sha'","app/models/merge_request_diff.rb:254:in `get_patch_id_sha'","app/models/merge_request.rb:2361:in `current_patch_id_sha'","ee/app/services/merge_requests/reset_approvals_service.rb:17:in `block in reset_approvals_for_merge_requests'","ee/app/services/merge_requests/reset_approvals_service.rb:16:in `each'","ee/app/services/merge_requests/reset_approvals_service.rb:16:in `reset_approvals_for_merge_requests'","ee/app/services/merge_requests/reset_approvals_service.rb:6:in `execute'","ee/app/workers/merge_request_reset_approvals_worker.rb:22:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::DeadlineExceeded","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:diff_service, :rpc=\u003e:get_patch_id}","user.username":"uidq9582","tags.queue":"default","tags.jid":"8c80d3e6d787ad0514d450b3","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDK6RPGPQRY190F850N8ZQM","extra.project_id":45023,"extra.old_revision":"97d95f45329bd9a7b01f3ae2f14891f195ec241e","extra.new_revision":"2d18be0711bae8d382f45ac9c33172f2cbbf0c7f"}
{"severity":"ERROR","time":"2025-05-29T08:50:21.835Z","correlation_id":"01JWDKRBG9RW5PMAKYPR7393ME","meta.caller_id":"MergeRequests::DeleteSourceBranchWorker","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.217.8.161","meta.user":"uids0281","meta.user_id":3450,"meta.project":"ida/cd/honda_tsu/soc/sdk/hids","meta.root_namespace":"ida","meta.client_id":"user/3450","meta.root_caller_id":"Projects::MergeRequestsController#merge","exception.class":"Projects::DeleteBranchWorker::GitReferenceLockedError","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/b3/66/b366dbe775c62fc846f3576ade1c143cd059d6d698fda54af35e4f6c35acae8a.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 for-each-ref --format=%(refname)%00%(objectname)%00%(symref) --count=1 --end-of-options refs/heads/design_yangxiaoding_uid00909]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","user.username":"uids0281","tags.queue":"default","tags.jid":"83b5218676dc2a03519fba37","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKRBG9RW5PMAKYPR7393ME"}
{"severity":"ERROR","time":"2025-05-29T08:50:22.080Z","correlation_id":"01JWDKRF18AN52JZ2TVPBN5MZH","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.221.8.48","meta.user":"uida6178","meta.user_id":2298,"meta.client_id":"user/2298","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/98/9f/989f033da91ef1585175125a067058163f2bc4d17f1fcba4666ff75a8e640b5e.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/98/9f/989f033da91ef1585175125a067058163f2bc4d17f1fcba4666ff75a8e640b5e.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:50:22.074443937+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 46: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uida6178","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKRF18AN52JZ2TVPBN5MZH"}
{"severity":"ERROR","time":"2025-05-29T08:50:27.236Z","correlation_id":"01JWDKRM3D234NZJFGFW7SNK3A","meta.caller_id":"GraphqlController#execute","meta.feature_category":"source_code_management","meta.organization_id":1,"meta.remote_ip":"10.129.21.129","meta.user":"uidq4466","meta.user_id":626,"meta.client_id":"user/626","exception.class":"Gitlab::Git::CommandError","exception.message":"13:creating object reader: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/52/24/52245060154560a6d9f385bc5400762e9d5749a981532e3a6618e7b7422464d5.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/blob.rb:109:in `batch_lfs_pointers'","lib/gitlab/graphql/loaders/batch_lfs_oid_loader.rb:14:in `block in find'","batch-loader (2.0.5) lib/batch_loader.rb:92:in `__ensure_batched'","batch-loader (2.0.5) lib/batch_loader.rb:53:in `__sync'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:71:in `sync'","graphql (2.4.1) lib/graphql/schema.rb:1547:in `public_send'","graphql (2.4.1) lib/graphql/schema.rb:1547:in `sync_lazy'","graphql (2.4.1) lib/graphql/schema.rb:1531:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/schema.rb:1547:in `public_send'","graphql (2.4.1) lib/graphql/schema.rb:1547:in `sync_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:779:in `block (2 levels) in after_lazy'","graphql (2.4.1) lib/graphql/tracing/trace.rb:56:in `execute_field_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:778:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:blob_service, :rpc=\u003e:get_lfs_pointers}","user.username":"uidq4466","tags.program":"web","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDKRM3D234NZJFGFW7SNK3A"}
{"severity":"ERROR","time":"2025-05-29T08:50:27.987Z","correlation_id":"01JWDKRMXY7JH97T6TMA0RS3N6","exception.class":"ActiveRecord::DatabaseConnectionError","exception.message":"There is an issue connecting to your database with your username/password, username: gitlab.\n\nPlease check your database configuration to ensure the username/password are valid.\n","exception.backtrace":["activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'","activerecord (7.0.8.4) lib/active_record/connection_handling.rb:313:in `retrieve_connection'","lib/feature.rb:15:in `connection'","activerecord (7.0.8.4) lib/active_record/model_schema.rb:407:in `table_exists?'","lib/gitlab/database/query_analyzers/gitlab_schemas_metrics.rb:16:in `enabled?'","lib/gitlab/database/query_analyzer.rb:95:in `block in begin!'","lib/gitlab/database/query_analyzer.rb:92:in `select'","lib/gitlab/database/query_analyzer.rb:92:in `begin!'","lib/gitlab/database/query_analyzer.rb:80:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"PG::ConnectionBad","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":null,"tags.correlation_id":"01JWDKRMXY7JH97T6TMA0RS3N6"}
{"severity":"ERROR","time":"2025-05-29T08:50:28.024Z","correlation_id":"01JWDKRMXY7JH97T6TMA0RS3N6","exception.class":"ActiveRecord::DatabaseConnectionError","exception.message":"There is an issue connecting to your database with your username/password, username: gitlab.\n\nPlease check your database configuration to ensure the username/password are valid.\n","exception.backtrace":["activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'","activerecord (7.0.8.4) lib/active_record/connection_handling.rb:313:in `retrieve_connection'","lib/feature.rb:15:in `connection'","activerecord (7.0.8.4) lib/active_record/model_schema.rb:407:in `table_exists?'","lib/gitlab/database/query_analyzers/prevent_cross_database_modification.rb:52:in `enabled?'","lib/gitlab/database/query_analyzer.rb:95:in `block in begin!'","lib/gitlab/database/query_analyzer.rb:92:in `select'","lib/gitlab/database/query_analyzer.rb:92:in `begin!'","lib/gitlab/database/query_analyzer.rb:80:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"PG::ConnectionBad","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":null,"tags.correlation_id":"01JWDKRMXY7JH97T6TMA0RS3N6"}
{"severity":"ERROR","time":"2025-05-29T08:50:28.059Z","correlation_id":"01JWDKRMXY7JH97T6TMA0RS3N6","exception.class":"ActiveRecord::DatabaseConnectionError","exception.message":"There is an issue connecting to your database with your username/password, username: gitlab.\n\nPlease check your database configuration to ensure the username/password are valid.\n","exception.backtrace":["activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'","activerecord (7.0.8.4) lib/active_record/connection_handling.rb:313:in `retrieve_connection'","lib/feature.rb:15:in `connection'","activerecord (7.0.8.4) lib/active_record/model_schema.rb:407:in `table_exists?'","lib/gitlab/database/query_analyzers/ci/partitioning_routing_analyzer.rb:22:in `enabled?'","lib/gitlab/database/query_analyzer.rb:95:in `block in begin!'","lib/gitlab/database/query_analyzer.rb:92:in `select'","lib/gitlab/database/query_analyzer.rb:92:in `begin!'","lib/gitlab/database/query_analyzer.rb:80:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"PG::ConnectionBad","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":null,"tags.correlation_id":"01JWDKRMXY7JH97T6TMA0RS3N6"}
{"severity":"ERROR","time":"2025-05-29T08:50:28.068Z","correlation_id":"01JWDKRMXY7JH97T6TMA0RS3N6","exception.class":"ActiveRecord::DatabaseConnectionError","exception.message":"There is an issue connecting to your database with your username/password, username: gitlab.\n\nPlease check your database configuration to ensure the username/password are valid.\n","exception.backtrace":["activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:83:in `rescue in new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:77:in `new_client'","activerecord (7.0.8.4) lib/active_record/connection_adapters/postgresql_adapter.rb:37:in `postgresql_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `public_send'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:656:in `new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:700:in `checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:679:in `try_to_checkout_new_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:640:in `acquire_connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:341:in `checkout'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:181:in `connection'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/connection_handler.rb:211:in `retrieve_connection'","activerecord (7.0.8.4) lib/active_record/connection_handling.rb:313:in `retrieve_connection'","lib/feature.rb:15:in `connection'","activerecord (7.0.8.4) lib/active_record/model_schema.rb:407:in `table_exists?'","lib/gitlab/database/query_analyzers/log_large_in_lists.rb:24:in `enabled?'","lib/gitlab/database/query_analyzer.rb:95:in `block in begin!'","lib/gitlab/database/query_analyzer.rb:92:in `select'","lib/gitlab/database/query_analyzer.rb:92:in `begin!'","lib/gitlab/database/query_analyzer.rb:80:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.cause_class":"PG::ConnectionBad","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":null,"tags.correlation_id":"01JWDKRMXY7JH97T6TMA0RS3N6"}
{"severity":"ERROR","time":"2025-05-29T08:50:28.075Z","correlation_id":"01JWDKRMVQF4AQBG0HGJHA19TC","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.217.8.81","meta.user":"uidq8772","meta.user_id":2700,"meta.client_id":"user/2700","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/db/31/db311f6e82c332553440714dd634a0a082c2f3cba1e13d3f4d692c6f04670d50.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/db/31/db311f6e82c332553440714dd634a0a082c2f3cba1e13d3f4d692c6f04670d50.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:50:28.066725606+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 32: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uidq8772","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKRMVQF4AQBG0HGJHA19TC"}
{"severity":"ERROR","time":"2025-05-29T08:50:28.138Z","correlation_id":"01JWDKRJZN9RGP33HM7SP65H7C","meta.caller_id":"NewMergeRequestWorker","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.218.12.36","meta.user":"ext10385","meta.user_id":3965,"meta.project":"svsap/android-repo/vendor/desaysv/g7ph/device","meta.root_namespace":"svsap","meta.client_id":"user/3965","meta.root_caller_id":"Projects::MergeRequests::CreationsController#create","exception.class":"Gitlab::Git::CommandError","exception.message":"13:error when running update-ref command: exit status 128.","exception.backtrace":["lib/gitlab/git/wraps_gitaly_errors.rb:52:in `handle_default_error'","lib/gitlab/git/wraps_gitaly_errors.rb:23:in `handle_error'","lib/gitlab/git/wraps_gitaly_errors.rb:14:in `rescue in wrapped_gitaly_errors'","lib/gitlab/git/wraps_gitaly_errors.rb:6:in `wrapped_gitaly_errors'","lib/gitlab/git/repository.rb:873:in `write_ref'","lib/gitlab/git/keep_around.rb:43:in `block in execute'","lib/gitlab/git/keep_around.rb:34:in `each'","lib/gitlab/git/keep_around.rb:34:in `execute'","lib/gitlab/git/keep_around.rb:14:in `execute'","app/models/repository.rb:337:in `keep_around'","ee/app/models/ee/repository.rb:66:in `keep_around'","app/models/merge_request_diff.rb:891:in `block in keep_around_commits'","app/models/merge_request_diff.rb:890:in `each'","app/models/merge_request_diff.rb:890:in `keep_around_commits'","app/models/merge_request_diff.rb:238:in `save_git_content'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:400:in `block in make_lambda'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:236:in `block in halting_and_conditional'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `block in invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `each'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:599:in `invoke_after'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:108:in `run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:929:in `_run_create_callbacks'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:459:in `_create_record'","activerecord (7.0.8.4) lib/active_record/timestamp.rb:108:in `_create_record'","activerecord (7.0.8.4) lib/active_record/persistence.rb:1069:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:455:in `block in create_or_update'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","activerecord (7.0.8.4) lib/active_record/autosave_association.rb:370:in `around_save_collection_association'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:929:in `_run_save_callbacks'","activerecord (7.0.8.4) lib/active_record/callbacks.rb:455:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/timestamp.rb:126:in `create_or_update'","activerecord (7.0.8.4) lib/active_record/persistence.rb:648:in `save!'","activerecord (7.0.8.4) lib/active_record/validations.rb:53:in `save!'","activerecord (7.0.8.4) lib/active_record/transactions.rb:302:in `block in save!'","activerecord (7.0.8.4) lib/active_record/transactions.rb:354:in `block in with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:314:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:350:in `with_transaction_returning_status'","activerecord (7.0.8.4) lib/active_record/transactions.rb:302:in `save!'","activerecord (7.0.8.4) lib/active_record/suppressor.rb:54:in `save!'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:515:in `block in save!'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:530:in `block in around_save'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:150:in `block in run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:170:in `catch_exceptions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:148:in `run_actions'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:133:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:212:in `run_callbacks'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `block (2 levels) in perform'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `catch'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:63:in `block in perform'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:186:in `within_transaction'","state_machines (0.5.0) lib/state_machines/transition_collection.rb:62:in `perform'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:530:in `around_save'","state_machines-activerecord (0.8.0) lib/state_machines/integrations/active_record.rb:515:in `save!'","activerecord (7.0.8.4) lib/active_record/associations/collection_association.rb:365:in `insert_record'","activerecord (7.0.8.4) lib/active_record/associations/has_many_association.rb:58:in `insert_record'","activerecord (7.0.8.4) lib/active_record/associations/collection_association.rb:352:in `block (2 levels) in _create_record'","activerecord (7.0.8.4) lib/active_record/associations/collection_association.rb:456:in `replace_on_target'","activerecord (7.0.8.4) lib/active_record/associations/collection_association.rb:272:in `add_to_target'","activerecord (7.0.8.4) lib/active_record/associations/collection_association.rb:351:in `block in _create_record'","app/models/concerns/cross_database_modification.rb:91:in `block in transaction'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:319:in `block in within_new_transaction'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'","activesupport (7.0.8.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/transaction.rb:317:in `within_new_transaction'","activerecord (7.0.8.4) lib/active_record/connection_adapters/abstract/database_statements.rb:316:in `transaction'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `public_send'","lib/gitlab/database/load_balancing/connection_proxy.rb:127:in `block in write_using_load_balancer'","lib/gitlab/database/load_balancing/load_balancer.rb:141:in `block in read_write'","lib/gitlab/database/load_balancing/load_balancer.rb:228:in `retry_with_backoff'","lib/gitlab/database/load_balancing/load_balancer.rb:130:in `read_write'","lib/gitlab/database/load_balancing/connection_proxy.rb:126:in `write_using_load_balancer'","lib/gitlab/database/load_balancing/connection_proxy.rb:78:in `transaction'","activerecord (7.0.8.4) lib/active_record/transactions.rb:209:in `transaction'","lib/gitlab/database.rb:394:in `block in transaction'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","lib/gitlab/database.rb:393:in `transaction'","app/models/concerns/cross_database_modification.rb:82:in `transaction'","activerecord (7.0.8.4) lib/active_record/associations/collection_association.rb:308:in `transaction'","activerecord (7.0.8.4) lib/active_record/associations/collection_association.rb:349:in `_create_record'","activerecord (7.0.8.4) lib/active_record/associations/has_many_association.rb:140:in `_create_record'","activerecord (7.0.8.4) lib/active_record/associations/association.rb:208:in `create!'","activerecord (7.0.8.4) lib/active_record/associations/collection_proxy.rb:364:in `create!'","app/models/merge_request.rb:1178:in `block in create_merge_request_diff'","lib/gitlab/gitaly_client.rb:457:in `allow_n_plus_1_calls'","app/models/merge_request.rb:1177:in `create_merge_request_diff'","app/models/merge_request.rb:1170:in `ensure_merge_request_diff'","app/services/merge_requests/after_create_service.rb:8:in `execute'","app/workers/new_merge_request_worker.rb:27:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executed.rb:17:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"exception.cause_class":"GRPC::Internal","exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:repository_service, :rpc=\u003e:write_ref}","user.username":"ext10385","tags.queue":"default","tags.jid":"e9a257489bdb5745bbe61c09","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKRJZN9RGP33HM7SP65H7C","extra.object_id":"e255f125a458a5a34d9dfd6c73857126a7568e31"}
{"severity":"ERROR","time":"2025-05-29T08:50:29.011Z","correlation_id":"01JWDKRNSPG75EXD44JPG2WMDC","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.133.72.139","meta.user":"uidq8855","meta.user_id":2759,"meta.client_id":"user/2759","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/c1/e2/c1e20d7cfc154317fe4c769cca710227240f32856c0d2845a6e5635d9a3919d2.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/c1/e2/c1e20d7cfc154317fe4c769cca710227240f32856c0d2845a6e5635d9a3919d2.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:50:29.005503116+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 40: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uidq8855","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKRNSPG75EXD44JPG2WMDC"}
{"severity":"ERROR","time":"2025-05-29T08:50:29.627Z","correlation_id":"01JWDKRPAK0CHDKPSMS810C3W9","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.129.21.179","meta.user":"uidq9137","meta.user_id":2891,"meta.client_id":"user/2891","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a0/0e/a00e24bf93e48760d2f3e24bbec0eff259eef397798ecd9d5144713a06a6b273.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/a0/0e/a00e24bf93e48760d2f3e24bbec0eff259eef397798ecd9d5144713a06a6b273.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:50:29.619792378+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 12: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uidq9137","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKRPAK0CHDKPSMS810C3W9"}
{"severity":"ERROR","time":"2025-05-29T08:50:31.021Z","meta.feature_category":"observability","correlation_id":"212a35fccea24496a2b44574ce5f5c8e","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"e3c0d07891cc6553f01cc0cd","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"212a35fccea24496a2b44574ce5f5c8e"}
{"severity":"ERROR","time":"2025-05-29T08:50:43.499Z","correlation_id":"01JWDKS3ZNAX85EXKQRKRS1CME","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.218.12.50","meta.user":"uidq4879","meta.user_id":2094,"meta.client_id":"user/2094","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/ba/d8/bad8c2edce755348428933286163fe68a74e7921eaa064c8cf16169505322c94.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace/gitlab/git-data/repositories/@hashed/ba/d8/bad8c2edce755348428933286163fe68a74e7921eaa064c8cf16169505322c94.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:50:43.493985176+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 37: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"default\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uidq4879","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKS3ZNAX85EXKQRKRS1CME"}
{"severity":"ERROR","time":"2025-05-29T08:50:47.369Z","meta.feature_category":"observability","correlation_id":"212a35fccea24496a2b44574ce5f5c8e","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"e3c0d07891cc6553f01cc0cd","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"212a35fccea24496a2b44574ce5f5c8e"}
{"severity":"ERROR","time":"2025-05-29T08:50:53.119Z","meta.feature_category":"observability","correlation_id":"b057d2967291d4af57efd6eb09cbcd80","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"30a1b26d2784128cde23de58","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"b057d2967291d4af57efd6eb09cbcd80"}
{"severity":"ERROR","time":"2025-05-29T08:51:01.148Z","correlation_id":"01JWDKSN71FC51Z9MF6QX0SJX1","meta.caller_id":"GraphqlController#execute","meta.feature_category":"code_review_workflow","meta.organization_id":1,"meta.remote_ip":"10.129.18.33","meta.user":"uidq2411","meta.user_id":1196,"meta.client_id":"user/1196","exception.class":"GRPC::Internal","exception.message":"13:starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/26/3d/263d9a5fa843afcb65bef807f7606e4eb0326201cfee9dbe5caa3e63484e77d6.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/26/3d/263d9a5fa843afcb65bef807f7606e4eb0326201cfee9dbe5caa3e63484e77d6.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:51:01.142002744+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 41: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `each'","lib/gitlab/gitaly_client/commit_service.rb:91:in `tree_entry'","lib/gitlab/git/blob.rb:67:in `tree_entry'","lib/gitlab/git/blob.rb:50:in `find'","lib/gitlab/git/repository.rb:938:in `blob_at'","app/models/repository.rb:547:in `blob_at'","app/models/repository.rb:1181:in `blob_data_at'","app/models/project.rb:3125:in `ci_config_for'","app/models/project.rb:2514:in `block in has_ci_config_file?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/models/project.rb:2513:in `has_ci_config_file?'","app/models/project.rb:2509:in `has_ci?'","app/models/merge_request.rb:1702:in `has_ci_enabled?'","/opt/gitlab/embedded/lib/ruby/3.2.0/delegate.rb:87:in `method_missing'","grape-path-helpers (2.0.1) lib/grape-path-helpers/named_route_matcher.rb:7:in `method_missing'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:59:in `block in available_for?'","app/services/auto_merge/base_service.rb:63:in `block in available_for?'","gems/gitlab-utils/lib/gitlab/utils/strong_memoize.rb:34:in `strong_memoize'","app/services/auto_merge/base_service.rb:60:in `available_for?'","ee/app/services/auto_merge/add_to_merge_train_when_checks_pass_service.rb:56:in `available_for?'","app/services/auto_merge_service.rb:70:in `block in available_strategies'","app/services/auto_merge_service.rb:69:in `select'","app/services/auto_merge_service.rb:69:in `available_strategies'","app/graphql/types/merge_request_type.rb:358:in `available_auto_merge_strategies'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `public_send'","graphql (2.4.1) lib/graphql/schema/field.rb:738:in `block (2 levels) in resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:881:in `block in with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block (2 levels) in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:920:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","lib/gitlab/graphql/present/field_extension.rb:18:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:917:in `block in run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field_extension.rb:134:in `resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:904:in `run_extensions_before_resolve'","graphql (2.4.1) lib/graphql/schema/field.rb:876:in `with_extensions'","graphql (2.4.1) lib/graphql/schema/field.rb:707:in `block in resolve'","graphql (2.4.1) lib/graphql/schema.rb:1536:in `after_lazy'","graphql (2.4.1) lib/graphql/query.rb:426:in `after_lazy'","graphql (2.4.1) lib/graphql/schema/field.rb:705:in `resolve'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:375:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/tracing/trace.rb:52:in `execute_field'","batch-loader (2.0.5) lib/batch_loader/graphql.rb:7:in `execute_field'","graphql (2.4.1) lib/graphql/schema/timeout.rb:84:in `execute_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:374:in `block in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:363:in `evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:273:in `evaluate_selection'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:228:in `block (3 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:227:in `block (2 levels) in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:209:in `block in evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:696:in `call_method_on_directives'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:206:in `evaluate_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:623:in `block (2 levels) in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:116:in `each_gathered_selections'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:614:in `block in continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:810:in `after_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:609:in `continue_field'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:393:in `block (2 levels) in evaluate_selection_with_resolved_keyword_args'","graphql (2.4.1) lib/graphql/execution/interpreter/runtime.rb:793:in `block in after_lazy'","graphql (2.4.1) lib/graphql/execution/lazy.rb:30:in `value'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `each'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:27:in `block in resolve_each_depth'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:26:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter/resolve.rb:31:in `resolve_each_depth'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:95:in `block (3 levels) in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:48:in `execute_query_lazy'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:94:in `block (2 levels) in run_all'","graphql (2.4.1) lib/graphql/dataloader/null_dataloader.rb:19:in `append_job'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:85:in `block in run_all'","graphql (2.4.1) lib/graphql/tracing/trace.rb:40:in `execute_multiplex'","lib/gitlab/graphql/tracers/instrumentation_tracer.rb:23:in `execute_multiplex'","graphql (2.4.1) lib/graphql/schema/timeout.rb:68:in `execute_multiplex'","graphql (2.4.1) lib/graphql/execution/interpreter.rb:38:in `run_all'","graphql (2.4.1) lib/graphql/schema.rb:1492:in `multiplex'","app/graphql/gitlab_schema.rb:44:in `multiplex'","graphql (2.4.1) lib/graphql/schema.rb:1468:in `execute'","app/controllers/graphql_controller.rb:223:in `execute_query'","app/controllers/graphql_controller.rb:67:in `execute'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:commit_service, :rpc=\u003e:tree_entry}","user.username":"uidq2411","tags.program":"web","tags.locale":"en","tags.feature_category":"code_review_workflow","tags.correlation_id":"01JWDKSN71FC51Z9MF6QX0SJX1"}
{"severity":"ERROR","time":"2025-05-29T08:51:01.223Z","meta.feature_category":"observability","correlation_id":"09e451ea9b69f3840fc5e558924083bc","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"481dbc018dc583cb9e7f7a9d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"09e451ea9b69f3840fc5e558924083bc"}
{"severity":"ERROR","time":"2025-05-29T08:51:02.252Z","meta.feature_category":"observability","correlation_id":"1d94a2d6d69e006f2178084b09b6c60a","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"c267e1096fe0f90bc133f2fd","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"1d94a2d6d69e006f2178084b09b6c60a"}
{"severity":"ERROR","time":"2025-05-29T08:51:17.574Z","meta.feature_category":"observability","correlation_id":"fb7e2c3d7b282fd37fa983be2ad15418","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"d526a7a32ff3c4d3f5b244fc","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"fb7e2c3d7b282fd37fa983be2ad15418"}
{"severity":"ERROR","time":"2025-05-29T08:51:28.084Z","meta.feature_category":"observability","correlation_id":"1d94a2d6d69e006f2178084b09b6c60a","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"c267e1096fe0f90bc133f2fd","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"1d94a2d6d69e006f2178084b09b6c60a"}
{"severity":"ERROR","time":"2025-05-29T08:51:30.059Z","correlation_id":"01JWDKTHH8XMDFV608XPW74DCZ","meta.caller_id":"POST /api/:version/internal/allowed","meta.remote_ip":"127.0.0.1","meta.feature_category":"source_code_management","meta.project":"svp/cbb/swift","meta.root_namespace":"svp","meta.client_id":"user/1585","meta.organization_id":1,"exception.class":"GRPC::Internal","exception.message":"13:creating object reader: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/04/f8/04f836b1e7b8b560e576586c73cfbd261d0b4f2c78ced5833418872115ac86c2.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable. debug_error_string:{UNKNOWN:Error received from peer unix:/var/opt/gitlab/gitaly/gitaly.socket {grpc_message:\"creating object reader: starting process [/var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git --git-dir /workspace2/gitlab/git-data/repositories/@hashed/04/f8/04f836b1e7b8b560e576586c73cfbd261d0b4f2c78ced5833418872115ac86c2.git -c gc.auto=0 -c maintenance.auto=0 -c core.autocrlf=false -c core.useReplaceRefs=false -c core.bigFileThreshold=50m -c core.fsync=objects,derived-metadata,reference -c core.fsyncMethod=fsync -c core.packedRefsTimeout=10000 -c core.filesRefLockTimeout=1000 -c attr.tree=HEAD cat-file --use-mailmap -Z --batch-command --buffer --end-of-options]: fork/exec /var/opt/gitlab/gitaly/run/gitaly-4187856/git-exec-1478717777.d/git: resource temporarily unavailable\", grpc_status:13, created_time:\"2025-05-29T16:51:30.056508329+08:00\"}}","exception.backtrace":["grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:29:in `check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:189:in `attach_status_results_and_complete_call'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:174:in `receive_and_check_status'","grpc-1.63.0-x86_64 (linux) src/ruby/lib/grpc/generic/active_call.rb:344:in `each_remote_read_then_finish'","puma: cluster worker 25: 318414 [gitlab-puma-worker]:in `each'","config/initializers/enumerator_next_patch.rb:11:in `block (2 levels) in \u003cmodule:EnumeratorNextPatch\u003e'","lib/gitlab/gitaly_client/call.rb:45:in `block (3 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:60:in `recording_request'","lib/gitlab/gitaly_client/call.rb:45:in `block (2 levels) in instrument_stream'","lib/gitlab/gitaly_client/call.rb:44:in `loop'","lib/gitlab/gitaly_client/call.rb:44:in `block in instrument_stream'","lib/gitlab/gitaly_client/blob_service.rb:229:in `each'","lib/gitlab/gitaly_client/blob_service.rb:229:in `each'","lib/gitlab/gitaly_client/blob_service.rb:229:in `flat_map'","lib/gitlab/gitaly_client/blob_service.rb:229:in `map_lfs_pointers'","lib/gitlab/gitaly_client/blob_service.rb:131:in `get_new_lfs_pointers'","lib/gitlab/git/lfs_changes.rb:12:in `new_pointers'","lib/gitlab/checks/lfs_integrity.rb:19:in `objects_missing?'","lib/gitlab/checks/lfs_check.rb:16:in `block in validate!'","lib/gitlab/checks/timed_logger.rb:27:in `log_timed'","lib/gitlab/checks/lfs_check.rb:12:in `validate!'","lib/gitlab/checks/changes_access.rb:120:in `bulk_access_checks!'","ee/lib/ee/gitlab/checks/changes_access.rb:12:in `bulk_access_checks!'","lib/gitlab/checks/changes_access.rb:29:in `block in validate!'","lib/gitlab/checks/timed_logger.rb:27:in `log_timed'","lib/gitlab/checks/changes_access.rb:28:in `validate!'","lib/gitlab/git_access.rb:390:in `check_access!'","lib/gitlab/git_access.rb:378:in `check_change_access!'","ee/lib/ee/gitlab/git_access.rb:98:in `check_change_access!'","lib/gitlab/git_access.rb:359:in `check_push_access!'","lib/gitlab/git_access.rb:96:in `check'","ee/lib/ee/gitlab/git_access.rb:20:in `check'","lib/api/helpers/internal_helpers.rb:54:in `access_check!'","lib/api/helpers/internal_helpers.rb:35:in `block in access_check_result'","lib/api/helpers/internal_helpers.rb:128:in `with_admin_mode_bypass!'","lib/api/helpers/internal_helpers.rb:34:in `access_check_result'","lib/api/internal/base.rb:64:in `check_allowed'","ee/lib/ee/api/internal/base.rb:22:in `block in check_allowed'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/lib/ee/api/internal/base.rb:21:in `check_allowed'","lib/api/internal/base.rb:141:in `block (2 levels) in \u003cclass:Base\u003e'","grape (2.0.0) lib/grape/endpoint.rb:58:in `call'","grape (2.0.0) lib/grape/endpoint.rb:58:in `block (2 levels) in generate_api_method'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","grape (2.0.0) lib/grape/endpoint.rb:57:in `block in generate_api_method'","grape (2.0.0) lib/grape/endpoint.rb:328:in `execute'","grape (2.0.0) lib/grape/endpoint.rb:260:in `block in run'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","grape (2.0.0) lib/grape/endpoint.rb:240:in `run'","grape (2.0.0) lib/grape/endpoint.rb:316:in `block in build_stack'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","ee/lib/gitlab/middleware/ip_restrictor.rb:11:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","lib/api/api_guard.rb:219:in `call'","grape (2.0.0) lib/grape/middleware/base.rb:36:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/resource.rb:20:in `_call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/resource/bearer.rb:8:in `_call'","rack-oauth2 (2.2.1) lib/rack/oauth2/server/abstract/handler.rb:17:in `call'","grape (2.0.0) lib/grape/middleware/error.rb:39:in `block in call!'","grape (2.0.0) lib/grape/middleware/error.rb:38:in `catch'","grape (2.0.0) lib/grape/middleware/error.rb:38:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:60:in `block in call!'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:58:in `catch'","grape_logging (1.8.4) lib/grape_logging/middleware/request_logger.rb:58:in `call!'","grape (2.0.0) lib/grape/middleware/base.rb:29:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","grape (2.0.0) lib/grape/endpoint.rb:224:in `call!'","grape (2.0.0) lib/grape/endpoint.rb:218:in `call'","grape (2.0.0) lib/grape/router/route.rb:58:in `exec'","grape (2.0.0) lib/grape/router.rb:120:in `process_route'","grape (2.0.0) lib/grape/router.rb:74:in `block in identity'","grape (2.0.0) lib/grape/router.rb:94:in `transaction'","grape (2.0.0) lib/grape/router.rb:72:in `identity'","grape (2.0.0) lib/grape/router.rb:56:in `block in call'","grape (2.0.0) lib/grape/router.rb:136:in `with_optimization'","grape (2.0.0) lib/grape/router.rb:55:in `call'","grape (2.0.0) lib/grape/api/instance.rb:165:in `call'","grape (2.0.0) lib/grape/api/instance.rb:70:in `call!'","grape (2.0.0) lib/grape/api/instance.rb:65:in `call'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:19:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:40:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"exception.gitaly":"{:storage=\u003e\"alternative2\", :address=\u003e\"unix:/var/opt/gitlab/gitaly/gitaly.socket\", :service=\u003e:blob_service, :rpc=\u003e:list_all_lfs_pointers}","user.username":null,"tags.program":"web","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDKTHH8XMDFV608XPW74DCZ"}
{"severity":"ERROR","time":"2025-05-29T08:51:36.791Z","meta.feature_category":"observability","correlation_id":"212a35fccea24496a2b44574ce5f5c8e","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"e3c0d07891cc6553f01cc0cd","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"212a35fccea24496a2b44574ce5f5c8e"}
{"severity":"ERROR","time":"2025-05-29T08:51:52.515Z","meta.feature_category":"observability","correlation_id":"37ddf19f2dd915d2f2b90852b667bd34","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"216772db7205cf917c20d6ef","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"37ddf19f2dd915d2f2b90852b667bd34"}
{"severity":"ERROR","time":"2025-05-29T08:51:58.666Z","meta.feature_category":"observability","correlation_id":"1d94a2d6d69e006f2178084b09b6c60a","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"c267e1096fe0f90bc133f2fd","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"1d94a2d6d69e006f2178084b09b6c60a"}
{"severity":"ERROR","time":"2025-05-29T08:52:02.656Z","meta.feature_category":"observability","correlation_id":"a5c893b28818854cc65d247cc5b236eb","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ebe81d9353160051b681fa7d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a5c893b28818854cc65d247cc5b236eb"}
{"severity":"ERROR","time":"2025-05-29T08:52:03.028Z","meta.feature_category":"observability","correlation_id":"aa063881f3708d9717f5251ec85383a9","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"a8aa1c39df9c75814a5636bb","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"aa063881f3708d9717f5251ec85383a9"}
{"severity":"ERROR","time":"2025-05-29T08:52:07.480Z","meta.feature_category":"observability","correlation_id":"d3bd2f691e05844230441d1f0db0b09d","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"a5bcb81fb37c01cccefec142","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"d3bd2f691e05844230441d1f0db0b09d"}
{"severity":"ERROR","time":"2025-05-29T08:52:19.504Z","meta.feature_category":"observability","correlation_id":"a5c893b28818854cc65d247cc5b236eb","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ebe81d9353160051b681fa7d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a5c893b28818854cc65d247cc5b236eb"}
{"severity":"ERROR","time":"2025-05-29T08:52:26.883Z","meta.feature_category":"observability","correlation_id":"e1e9346c85cfcafbc85df34ebe5aa7d0","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"264c9591ccb6f6431f4d8e12","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"e1e9346c85cfcafbc85df34ebe5aa7d0"}
{"severity":"ERROR","time":"2025-05-29T08:52:44.652Z","meta.feature_category":"observability","correlation_id":"1d94a2d6d69e006f2178084b09b6c60a","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"c267e1096fe0f90bc133f2fd","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"1d94a2d6d69e006f2178084b09b6c60a"}
{"severity":"ERROR","time":"2025-05-29T08:52:49.818Z","meta.feature_category":"observability","correlation_id":"a5c893b28818854cc65d247cc5b236eb","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ebe81d9353160051b681fa7d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a5c893b28818854cc65d247cc5b236eb"}
{"severity":"ERROR","time":"2025-05-29T08:52:55.637Z","meta.feature_category":"observability","correlation_id":"09e451ea9b69f3840fc5e558924083bc","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"481dbc018dc583cb9e7f7a9d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"09e451ea9b69f3840fc5e558924083bc"}
{"severity":"ERROR","time":"2025-05-29T08:53:02.857Z","meta.feature_category":"observability","correlation_id":"690c81e46ff3441a2acbe543634d74b1","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ee224a3d16aa7aac721827fc","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"690c81e46ff3441a2acbe543634d74b1"}
{"severity":"ERROR","time":"2025-05-29T08:53:24.200Z","meta.feature_category":"observability","correlation_id":"a5c893b28818854cc65d247cc5b236eb","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ebe81d9353160051b681fa7d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a5c893b28818854cc65d247cc5b236eb"}
{"severity":"ERROR","time":"2025-05-29T08:53:30.788Z","meta.feature_category":"observability","correlation_id":"690c81e46ff3441a2acbe543634d74b1","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ee224a3d16aa7aac721827fc","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"690c81e46ff3441a2acbe543634d74b1"}
{"severity":"ERROR","time":"2025-05-29T08:53:30.811Z","meta.feature_category":"observability","correlation_id":"3c39526e314505917e338e43048b8c48","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"5db14f0932a7981c09223957","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"3c39526e314505917e338e43048b8c48"}
{"severity":"ERROR","time":"2025-05-29T08:53:42.060Z","meta.feature_category":"observability","correlation_id":"212a35fccea24496a2b44574ce5f5c8e","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"e3c0d07891cc6553f01cc0cd","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"212a35fccea24496a2b44574ce5f5c8e"}
{"severity":"ERROR","time":"2025-05-29T08:53:54.035Z","meta.feature_category":"observability","correlation_id":"690c81e46ff3441a2acbe543634d74b1","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ee224a3d16aa7aac721827fc","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"690c81e46ff3441a2acbe543634d74b1"}
{"severity":"ERROR","time":"2025-05-29T08:54:02.926Z","meta.feature_category":"observability","correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"fcf38d4a17ff9949cde1ccd5","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5"}
{"severity":"ERROR","time":"2025-05-29T08:54:21.966Z","meta.feature_category":"observability","correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"fcf38d4a17ff9949cde1ccd5","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5"}
{"severity":"ERROR","time":"2025-05-29T08:54:42.701Z","meta.feature_category":"observability","correlation_id":"690c81e46ff3441a2acbe543634d74b1","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ee224a3d16aa7aac721827fc","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"690c81e46ff3441a2acbe543634d74b1"}
{"severity":"ERROR","time":"2025-05-29T08:54:51.202Z","meta.feature_category":"observability","correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"fcf38d4a17ff9949cde1ccd5","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5"}
{"severity":"ERROR","time":"2025-05-29T08:55:01.566Z","meta.feature_category":"observability","correlation_id":"240400f098b15a3fbe2bb3eee9bc1572","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"97929070864ec09bbfce7002","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"240400f098b15a3fbe2bb3eee9bc1572"}
{"severity":"ERROR","time":"2025-05-29T08:55:26.438Z","correlation_id":"01JWDM1NZV1623Y55KYFH0QJWZ","meta.caller_id":"Projects::CommitController#diff_files","meta.feature_category":"source_code_management","meta.organization_id":1,"meta.remote_ip":"10.218.12.12","meta.user":"uidq5473","meta.user_id":2320,"meta.project":"svs/g7phr2/dsp/adsp21489","meta.root_namespace":"svs","meta.client_id":"user/2320","exception.class":"Timeout::Error","exception.message":"execution expired","exception.backtrace":["lib/rouge/formatters/html_gitlab.rb:49:in `gsub'","lib/rouge/formatters/html_gitlab.rb:49:in `replace_space_characters'","lib/rouge/formatters/html_gitlab.rb:29:in `block (2 levels) in stream'","lib/rouge/formatters/html_gitlab.rb:27:in `each'","lib/rouge/formatters/html_gitlab.rb:27:in `block in stream'","rouge (4.4.0) lib/rouge/formatter.rb:99:in `block (2 levels) in token_lines'","rouge (4.4.0) lib/rouge/formatter.rb:97:in `scan'","rouge (4.4.0) lib/rouge/formatter.rb:97:in `block in token_lines'","rouge (4.4.0) lib/rouge/formatter.rb:62:in `block in filter_escapes'","rouge (4.4.0) lib/rouge/lexer.rb:488:in `block in continue_lex'","rouge (4.4.0) lib/rouge/regex_lexer.rb:331:in `stream_tokens'","rouge (4.4.0) lib/rouge/lexer.rb:480:in `continue_lex'","rouge (4.4.0) lib/rouge/lexer.rb:470:in `lex'","rouge (4.4.0) lib/rouge/formatter.rb:58:in `each'","rouge (4.4.0) lib/rouge/formatter.rb:58:in `filter_escapes'","rouge (4.4.0) lib/rouge/formatter.rb:96:in `each'","rouge (4.4.0) lib/rouge/formatter.rb:96:in `token_lines'","lib/rouge/formatters/html_gitlab.rb:21:in `stream'","rouge (4.4.0) lib/rouge/formatter.rb:74:in `format'","rouge (4.4.0) lib/rouge/formatter.rb:46:in `format'","lib/gitlab/highlight.rb:76:in `block in highlight_rich'","timeout (0.3.2) lib/timeout.rb:189:in `block in timeout'","timeout (0.3.2) lib/timeout.rb:36:in `block in catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:198:in `timeout'","lib/gitlab/render_timeout.rb:11:in `timeout'","lib/gitlab/highlight.rb:76:in `highlight_rich'","lib/gitlab/highlight.rb:65:in `highlight_text'","lib/gitlab/highlight.rb:32:in `highlight'","lib/gitlab/highlight.rb:7:in `highlight'","app/presenters/blob_presenter.rb:29:in `highlight'","lib/gitlab/diff/highlight.rb:150:in `highlighted_blob_lines'","lib/gitlab/diff/highlight.rb:138:in `old_lines'","lib/gitlab/diff/highlight.rb:126:in `blob_highlighting'","lib/gitlab/diff/highlight.rb:88:in `highlight_line'","lib/gitlab/diff/highlight.rb:63:in `apply_syntax_highlight'","lib/gitlab/diff/highlight.rb:35:in `block in highlight'","lib/gitlab/diff/highlight.rb:30:in `map'","lib/gitlab/diff/highlight.rb:30:in `highlight'","lib/gitlab/diff/file.rb:265:in `highlighted_diff_lines'","app/views/projects/diffs/_text_file.html.haml:7","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/viewers/_text.html.haml:8","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_viewer.html.haml:14","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_content.html.haml:11","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:79:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:22:in `render'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:37:in `block in render'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:33:in `render'","jh/app/helpers/jh/application_helper.rb:19:in `render_ee'","jh/app/views/projects/diffs/_content.html.haml:10","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_file.html.haml:41","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:189:in `block in collection_with_template'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `block in each_with_info'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `each'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `each_with_info'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `each'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `map'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `collection_with_template'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:162:in `block (2 levels) in render_collection'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer/collection_caching.rb:21:in `cache_collection_render'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:161:in `block in render_collection'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:147:in `render_collection'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:119:in `render_collection_with_partial'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:72:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:27:in `render_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:22:in `render'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:37:in `block in render'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:33:in `render'","app/views/projects/commit/diff_files.html.haml:3","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:79:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/rendering.rb:117:in `block in _render_template'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/rendering.rb:116:in `_render_template'","actionpack (7.0.8.4) lib/action_controller/metal/streaming.rb:216:in `_render_template'","actionview (7.0.8.4) lib/action_view/rendering.rb:103:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:158:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'","actionpack (7.0.8.4) lib/abstract_controller/rendering.rb:27:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:139:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block (2 levels) in render'","/opt/gitlab/embedded/lib/ruby/3.2.0/benchmark.rb:311:in `realtime'","activesupport (7.0.8.4) lib/active_support/core_ext/benchmark.rb:14:in `ms'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block in render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:91:in `cleanup_view_runtime'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:34:in `cleanup_view_runtime'","elasticsearch-rails (7.2.1) lib/elasticsearch/rails/instrumentation/controller_runtime.rb:37:in `cleanup_view_runtime'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:21:in `render'","app/controllers/application_controller.rb:156:in `render'","app/controllers/projects/commit_controller.rb:59:in `block (2 levels) in diff_files'","actionpack (7.0.8.4) lib/action_controller/metal/mime_responds.rb:214:in `respond_to'","app/controllers/projects/commit_controller.rb:57:in `diff_files'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:18:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"user.username":"uidq5473","tags.program":"web","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDM1NZV1623Y55KYFH0QJWZ"}
{"severity":"ERROR","time":"2025-05-29T08:55:26.725Z","meta.feature_category":"observability","correlation_id":"a5c893b28818854cc65d247cc5b236eb","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ebe81d9353160051b681fa7d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a5c893b28818854cc65d247cc5b236eb"}
{"severity":"ERROR","time":"2025-05-29T08:55:26.844Z","meta.feature_category":"observability","correlation_id":"240400f098b15a3fbe2bb3eee9bc1572","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"97929070864ec09bbfce7002","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"240400f098b15a3fbe2bb3eee9bc1572"}
{"severity":"ERROR","time":"2025-05-29T08:55:28.319Z","correlation_id":"01JWDM1NZV1623Y55KYFH0QJWZ","meta.caller_id":"Projects::CommitController#diff_files","meta.feature_category":"source_code_management","meta.organization_id":1,"meta.remote_ip":"10.218.12.12","meta.user":"uidq5473","meta.user_id":2320,"meta.project":"svs/g7phr2/dsp/adsp21489","meta.root_namespace":"svs","meta.client_id":"user/2320","exception.class":"Timeout::Error","exception.message":"execution expired","exception.backtrace":["rouge (4.4.0) lib/rouge/formatter.rb:74:in `block in format'","lib/rouge/formatters/html_gitlab.rb:36:in `block in stream'","rouge (4.4.0) lib/rouge/formatter.rb:99:in `block (2 levels) in token_lines'","rouge (4.4.0) lib/rouge/formatter.rb:97:in `scan'","rouge (4.4.0) lib/rouge/formatter.rb:97:in `block in token_lines'","rouge (4.4.0) lib/rouge/formatter.rb:62:in `block in filter_escapes'","rouge (4.4.0) lib/rouge/lexer.rb:488:in `block in continue_lex'","rouge (4.4.0) lib/rouge/regex_lexer.rb:331:in `stream_tokens'","rouge (4.4.0) lib/rouge/lexer.rb:480:in `continue_lex'","rouge (4.4.0) lib/rouge/lexer.rb:470:in `lex'","rouge (4.4.0) lib/rouge/formatter.rb:58:in `each'","rouge (4.4.0) lib/rouge/formatter.rb:58:in `filter_escapes'","rouge (4.4.0) lib/rouge/formatter.rb:96:in `each'","rouge (4.4.0) lib/rouge/formatter.rb:96:in `token_lines'","lib/rouge/formatters/html_gitlab.rb:21:in `stream'","rouge (4.4.0) lib/rouge/formatter.rb:74:in `format'","rouge (4.4.0) lib/rouge/formatter.rb:46:in `format'","lib/gitlab/highlight.rb:76:in `block in highlight_rich'","timeout (0.3.2) lib/timeout.rb:189:in `block in timeout'","timeout (0.3.2) lib/timeout.rb:36:in `block in catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:198:in `timeout'","lib/gitlab/render_timeout.rb:11:in `timeout'","lib/gitlab/highlight.rb:76:in `highlight_rich'","lib/gitlab/highlight.rb:65:in `highlight_text'","lib/gitlab/highlight.rb:32:in `highlight'","lib/gitlab/highlight.rb:7:in `highlight'","app/presenters/blob_presenter.rb:29:in `highlight'","lib/gitlab/diff/highlight.rb:150:in `highlighted_blob_lines'","lib/gitlab/diff/highlight.rb:142:in `new_lines'","lib/gitlab/diff/highlight.rb:124:in `blob_highlighting'","lib/gitlab/diff/highlight.rb:88:in `highlight_line'","lib/gitlab/diff/highlight.rb:63:in `apply_syntax_highlight'","lib/gitlab/diff/highlight.rb:35:in `block in highlight'","lib/gitlab/diff/highlight.rb:30:in `map'","lib/gitlab/diff/highlight.rb:30:in `highlight'","lib/gitlab/diff/file.rb:265:in `highlighted_diff_lines'","app/views/projects/diffs/_text_file.html.haml:7","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/viewers/_text.html.haml:8","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_viewer.html.haml:14","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_content.html.haml:11","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:79:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:22:in `render'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:37:in `block in render'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:33:in `render'","jh/app/helpers/jh/application_helper.rb:19:in `render_ee'","jh/app/views/projects/diffs/_content.html.haml:10","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_file.html.haml:41","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:189:in `block in collection_with_template'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `block in each_with_info'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `each'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `each_with_info'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `each'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `map'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `collection_with_template'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:162:in `block (2 levels) in render_collection'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer/collection_caching.rb:21:in `cache_collection_render'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:161:in `block in render_collection'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:147:in `render_collection'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:119:in `render_collection_with_partial'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:72:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:27:in `render_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:22:in `render'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:37:in `block in render'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:33:in `render'","app/views/projects/commit/diff_files.html.haml:3","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:79:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/rendering.rb:117:in `block in _render_template'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/rendering.rb:116:in `_render_template'","actionpack (7.0.8.4) lib/action_controller/metal/streaming.rb:216:in `_render_template'","actionview (7.0.8.4) lib/action_view/rendering.rb:103:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:158:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'","actionpack (7.0.8.4) lib/abstract_controller/rendering.rb:27:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:139:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block (2 levels) in render'","/opt/gitlab/embedded/lib/ruby/3.2.0/benchmark.rb:311:in `realtime'","activesupport (7.0.8.4) lib/active_support/core_ext/benchmark.rb:14:in `ms'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block in render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:91:in `cleanup_view_runtime'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:34:in `cleanup_view_runtime'","elasticsearch-rails (7.2.1) lib/elasticsearch/rails/instrumentation/controller_runtime.rb:37:in `cleanup_view_runtime'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:21:in `render'","app/controllers/application_controller.rb:156:in `render'","app/controllers/projects/commit_controller.rb:59:in `block (2 levels) in diff_files'","actionpack (7.0.8.4) lib/action_controller/metal/mime_responds.rb:214:in `respond_to'","app/controllers/projects/commit_controller.rb:57:in `diff_files'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:18:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"user.username":"uidq5473","tags.program":"web","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDM1NZV1623Y55KYFH0QJWZ"}
{"severity":"ERROR","time":"2025-05-29T08:55:30.724Z","correlation_id":"01JWDM1NZV1623Y55KYFH0QJWZ","meta.caller_id":"Projects::CommitController#diff_files","meta.feature_category":"source_code_management","meta.organization_id":1,"meta.remote_ip":"10.218.12.12","meta.user":"uidq5473","meta.user_id":2320,"meta.project":"svs/g7phr2/dsp/adsp21489","meta.root_namespace":"svs","meta.client_id":"user/2320","exception.class":"Timeout::Error","exception.message":"execution expired","exception.backtrace":["activesupport (7.0.8.4) lib/active_support/core_ext/numeric/deprecated_conversions.rb:6:in `to_s'","activesupport (7.0.8.4) lib/active_support/core_ext/numeric/deprecated_conversions.rb:6:in `to_s'","lib/rouge/formatters/html_gitlab.rb:25:in `block in stream'","rouge (4.4.0) lib/rouge/formatter.rb:99:in `block (2 levels) in token_lines'","rouge (4.4.0) lib/rouge/formatter.rb:97:in `scan'","rouge (4.4.0) lib/rouge/formatter.rb:97:in `block in token_lines'","rouge (4.4.0) lib/rouge/formatter.rb:62:in `block in filter_escapes'","rouge (4.4.0) lib/rouge/lexer.rb:488:in `block in continue_lex'","rouge (4.4.0) lib/rouge/regex_lexer.rb:167:in `block in rule'","rouge (4.4.0) lib/rouge/regex_lexer.rb:364:in `instance_exec'","rouge (4.4.0) lib/rouge/regex_lexer.rb:364:in `block in step'","rouge (4.4.0) lib/rouge/regex_lexer.rb:346:in `each'","rouge (4.4.0) lib/rouge/regex_lexer.rb:346:in `step'","rouge (4.4.0) lib/rouge/regex_lexer.rb:349:in `block in step'","rouge (4.4.0) lib/rouge/regex_lexer.rb:346:in `each'","rouge (4.4.0) lib/rouge/regex_lexer.rb:346:in `step'","rouge (4.4.0) lib/rouge/regex_lexer.rb:327:in `stream_tokens'","rouge (4.4.0) lib/rouge/lexer.rb:480:in `continue_lex'","rouge (4.4.0) lib/rouge/lexer.rb:470:in `lex'","rouge (4.4.0) lib/rouge/formatter.rb:58:in `each'","rouge (4.4.0) lib/rouge/formatter.rb:58:in `filter_escapes'","rouge (4.4.0) lib/rouge/formatter.rb:96:in `each'","rouge (4.4.0) lib/rouge/formatter.rb:96:in `token_lines'","lib/rouge/formatters/html_gitlab.rb:21:in `stream'","rouge (4.4.0) lib/rouge/formatter.rb:74:in `format'","rouge (4.4.0) lib/rouge/formatter.rb:46:in `format'","lib/gitlab/highlight.rb:76:in `block in highlight_rich'","timeout (0.3.2) lib/timeout.rb:189:in `block in timeout'","timeout (0.3.2) lib/timeout.rb:36:in `block in catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:198:in `timeout'","lib/gitlab/render_timeout.rb:11:in `timeout'","lib/gitlab/highlight.rb:76:in `highlight_rich'","lib/gitlab/highlight.rb:65:in `highlight_text'","lib/gitlab/highlight.rb:32:in `highlight'","lib/gitlab/highlight.rb:7:in `highlight'","app/presenters/blob_presenter.rb:29:in `highlight'","lib/gitlab/diff/highlight.rb:150:in `highlighted_blob_lines'","lib/gitlab/diff/highlight.rb:142:in `new_lines'","lib/gitlab/diff/highlight.rb:124:in `blob_highlighting'","lib/gitlab/diff/highlight.rb:88:in `highlight_line'","lib/gitlab/diff/highlight.rb:63:in `apply_syntax_highlight'","lib/gitlab/diff/highlight.rb:35:in `block in highlight'","lib/gitlab/diff/highlight.rb:30:in `map'","lib/gitlab/diff/highlight.rb:30:in `highlight'","lib/gitlab/diff/file.rb:265:in `highlighted_diff_lines'","app/views/projects/diffs/_text_file.html.haml:7","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/viewers/_text.html.haml:8","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_viewer.html.haml:14","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_content.html.haml:11","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:79:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:22:in `render'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:37:in `block in render'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:33:in `render'","jh/app/helpers/jh/application_helper.rb:19:in `render_ee'","jh/app/views/projects/diffs/_content.html.haml:10","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_file.html.haml:41","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:189:in `block in collection_with_template'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `block in each_with_info'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `each'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `each_with_info'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `each'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `map'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `collection_with_template'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:162:in `block (2 levels) in render_collection'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer/collection_caching.rb:21:in `cache_collection_render'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:161:in `block in render_collection'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:147:in `render_collection'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:119:in `render_collection_with_partial'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:72:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:27:in `render_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:22:in `render'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:37:in `block in render'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:33:in `render'","app/views/projects/commit/diff_files.html.haml:3","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:79:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/rendering.rb:117:in `block in _render_template'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/rendering.rb:116:in `_render_template'","actionpack (7.0.8.4) lib/action_controller/metal/streaming.rb:216:in `_render_template'","actionview (7.0.8.4) lib/action_view/rendering.rb:103:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:158:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'","actionpack (7.0.8.4) lib/abstract_controller/rendering.rb:27:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:139:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block (2 levels) in render'","/opt/gitlab/embedded/lib/ruby/3.2.0/benchmark.rb:311:in `realtime'","activesupport (7.0.8.4) lib/active_support/core_ext/benchmark.rb:14:in `ms'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block in render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:91:in `cleanup_view_runtime'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:34:in `cleanup_view_runtime'","elasticsearch-rails (7.2.1) lib/elasticsearch/rails/instrumentation/controller_runtime.rb:37:in `cleanup_view_runtime'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:21:in `render'","app/controllers/application_controller.rb:156:in `render'","app/controllers/projects/commit_controller.rb:59:in `block (2 levels) in diff_files'","actionpack (7.0.8.4) lib/action_controller/metal/mime_responds.rb:214:in `respond_to'","app/controllers/projects/commit_controller.rb:57:in `diff_files'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:18:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"user.username":"uidq5473","tags.program":"web","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDM1NZV1623Y55KYFH0QJWZ"}
{"severity":"ERROR","time":"2025-05-29T08:55:32.526Z","correlation_id":"01JWDM1NZV1623Y55KYFH0QJWZ","meta.caller_id":"Projects::CommitController#diff_files","meta.feature_category":"source_code_management","meta.organization_id":1,"meta.remote_ip":"10.218.12.12","meta.user":"uidq5473","meta.user_id":2320,"meta.project":"svs/g7phr2/dsp/adsp21489","meta.root_namespace":"svs","meta.client_id":"user/2320","exception.class":"Timeout::Error","exception.message":"execution expired","exception.backtrace":["rouge (4.4.0) lib/rouge/formatters/html.rb:51:in `escape_special_html_chars'","rouge (4.4.0) lib/rouge/formatters/html.rb:26:in `span'","lib/rouge/formatters/html_gitlab.rb:31:in `block (2 levels) in stream'","lib/rouge/formatters/html_gitlab.rb:27:in `each'","lib/rouge/formatters/html_gitlab.rb:27:in `block in stream'","rouge (4.4.0) lib/rouge/formatter.rb:99:in `block (2 levels) in token_lines'","rouge (4.4.0) lib/rouge/formatter.rb:97:in `scan'","rouge (4.4.0) lib/rouge/formatter.rb:97:in `block in token_lines'","rouge (4.4.0) lib/rouge/formatter.rb:62:in `block in filter_escapes'","rouge (4.4.0) lib/rouge/lexer.rb:488:in `block in continue_lex'","rouge (4.4.0) lib/rouge/regex_lexer.rb:167:in `block in rule'","rouge (4.4.0) lib/rouge/regex_lexer.rb:364:in `instance_exec'","rouge (4.4.0) lib/rouge/regex_lexer.rb:364:in `block in step'","rouge (4.4.0) lib/rouge/regex_lexer.rb:346:in `each'","rouge (4.4.0) lib/rouge/regex_lexer.rb:346:in `step'","rouge (4.4.0) lib/rouge/regex_lexer.rb:349:in `block in step'","rouge (4.4.0) lib/rouge/regex_lexer.rb:346:in `each'","rouge (4.4.0) lib/rouge/regex_lexer.rb:346:in `step'","rouge (4.4.0) lib/rouge/regex_lexer.rb:327:in `stream_tokens'","rouge (4.4.0) lib/rouge/lexer.rb:480:in `continue_lex'","rouge (4.4.0) lib/rouge/lexer.rb:470:in `lex'","rouge (4.4.0) lib/rouge/formatter.rb:58:in `each'","rouge (4.4.0) lib/rouge/formatter.rb:58:in `filter_escapes'","rouge (4.4.0) lib/rouge/formatter.rb:96:in `each'","rouge (4.4.0) lib/rouge/formatter.rb:96:in `token_lines'","lib/rouge/formatters/html_gitlab.rb:21:in `stream'","rouge (4.4.0) lib/rouge/formatter.rb:74:in `format'","rouge (4.4.0) lib/rouge/formatter.rb:46:in `format'","lib/gitlab/highlight.rb:76:in `block in highlight_rich'","timeout (0.3.2) lib/timeout.rb:189:in `block in timeout'","timeout (0.3.2) lib/timeout.rb:36:in `block in catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:36:in `catch'","timeout (0.3.2) lib/timeout.rb:198:in `timeout'","lib/gitlab/render_timeout.rb:11:in `timeout'","lib/gitlab/highlight.rb:76:in `highlight_rich'","lib/gitlab/highlight.rb:65:in `highlight_text'","lib/gitlab/highlight.rb:32:in `highlight'","lib/gitlab/highlight.rb:7:in `highlight'","app/presenters/blob_presenter.rb:29:in `highlight'","lib/gitlab/diff/highlight.rb:150:in `highlighted_blob_lines'","lib/gitlab/diff/highlight.rb:138:in `old_lines'","lib/gitlab/diff/highlight.rb:126:in `blob_highlighting'","lib/gitlab/diff/highlight.rb:88:in `highlight_line'","lib/gitlab/diff/highlight.rb:63:in `apply_syntax_highlight'","lib/gitlab/diff/highlight.rb:35:in `block in highlight'","lib/gitlab/diff/highlight.rb:30:in `map'","lib/gitlab/diff/highlight.rb:30:in `highlight'","lib/gitlab/diff/file.rb:265:in `highlighted_diff_lines'","app/views/projects/diffs/_text_file.html.haml:7","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/viewers/_text.html.haml:8","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_viewer.html.haml:14","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_content.html.haml:11","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:79:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:22:in `render'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:37:in `block in render'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:33:in `render'","jh/app/helpers/jh/application_helper.rb:19:in `render_ee'","jh/app/views/projects/diffs/_content.html.haml:10","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:251:in `block in render_partial_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:246:in `render_partial_template'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer.rb:237:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:81:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:53:in `render_partial'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:44:in `render'","app/views/projects/diffs/_file.html.haml:41","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:189:in `block in collection_with_template'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `block in each_with_info'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `each'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:70:in `each_with_info'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `each'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `map'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:180:in `collection_with_template'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:162:in `block (2 levels) in render_collection'","actionview (7.0.8.4) lib/action_view/renderer/partial_renderer/collection_caching.rb:21:in `cache_collection_render'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:161:in `block in render_collection'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:147:in `render_collection'","actionview (7.0.8.4) lib/action_view/renderer/collection_renderer.rb:119:in `render_collection_with_partial'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:72:in `render_partial_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:27:in `render_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:22:in `render'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:37:in `block in render'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/helpers/rendering_helper.rb:33:in `render'","app/views/projects/commit/diff_files.html.haml:3","actionview (7.0.8.4) lib/action_view/base.rb:244:in `public_send'","actionview (7.0.8.4) lib/action_view/base.rb:244:in `_run'","actionview (7.0.8.4) lib/action_view/template.rb:157:in `block in render'","activesupport (7.0.8.4) lib/active_support/notifications.rb:208:in `instrument'","actionview (7.0.8.4) lib/action_view/template.rb:361:in `instrument_render_template'","actionview (7.0.8.4) lib/action_view/template.rb:155:in `render'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:65:in `block (2 levels) in render_template'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:60:in `block in render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:79:in `render_with_layout'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:59:in `render_template'","actionview (7.0.8.4) lib/action_view/renderer/template_renderer.rb:11:in `render'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:61:in `render_template_to_object'","actionview (7.0.8.4) lib/action_view/renderer/renderer.rb:29:in `render_to_object'","actionview (7.0.8.4) lib/action_view/rendering.rb:117:in `block in _render_template'","actionview (7.0.8.4) lib/action_view/base.rb:270:in `in_rendering_context'","actionview (7.0.8.4) lib/action_view/rendering.rb:116:in `_render_template'","actionpack (7.0.8.4) lib/action_controller/metal/streaming.rb:216:in `_render_template'","actionview (7.0.8.4) lib/action_view/rendering.rb:103:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:158:in `render_to_body'","actionpack (7.0.8.4) lib/action_controller/metal/renderers.rb:141:in `render_to_body'","actionpack (7.0.8.4) lib/abstract_controller/rendering.rb:27:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:139:in `render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block (2 levels) in render'","/opt/gitlab/embedded/lib/ruby/3.2.0/benchmark.rb:311:in `realtime'","activesupport (7.0.8.4) lib/active_support/core_ext/benchmark.rb:14:in `ms'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:22:in `block in render'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:91:in `cleanup_view_runtime'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:34:in `cleanup_view_runtime'","elasticsearch-rails (7.2.1) lib/elasticsearch/rails/instrumentation/controller_runtime.rb:37:in `cleanup_view_runtime'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:21:in `render'","app/controllers/application_controller.rb:156:in `render'","app/controllers/projects/commit_controller.rb:59:in `block (2 levels) in diff_files'","actionpack (7.0.8.4) lib/action_controller/metal/mime_responds.rb:214:in `respond_to'","app/controllers/projects/commit_controller.rb:57:in `diff_files'","actionpack (7.0.8.4) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:215:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rendering.rb:165:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:234:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:118:in `block in run_callbacks'","lib/gitlab/ip_address_state.rb:11:in `with'","ee/app/controllers/ee/application_controller.rb:45:in `set_current_ip_address'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:503:in `set_current_admin'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/session.rb:11:in `with_session'","app/controllers/application_controller.rb:494:in `set_session_storage'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","lib/gitlab/i18n.rb:114:in `with_locale'","lib/gitlab/i18n.rb:120:in `with_user_locale'","app/controllers/application_controller.rb:485:in `set_locale'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","app/controllers/application_controller.rb:478:in `set_current_context'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","marginalia (1.11.1) lib/marginalia.rb:109:in `record_query_comment'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:32:in `block in sentry_around_action'","sentry-ruby (5.21.0) lib/sentry/hub.rb:108:in `with_child_span'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:499:in `with_child_span'","sentry-rails (5.21.0) lib/sentry/rails/controller_transaction.rb:18:in `sentry_around_action'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:127:in `block in run_callbacks'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:138:in `run_callbacks'","actionpack (7.0.8.4) lib/abstract_controller/callbacks.rb:233:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/rescue.rb:23:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:67:in `block in process_action'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","actionpack (7.0.8.4) lib/action_controller/metal/instrumentation.rb:66:in `process_action'","actionpack (7.0.8.4) lib/action_controller/metal/params_wrapper.rb:259:in `process_action'","activerecord (7.0.8.4) lib/active_record/railties/controller_runtime.rb:27:in `process_action'","actionpack (7.0.8.4) lib/abstract_controller/base.rb:151:in `process'","actionview (7.0.8.4) lib/action_view/rendering.rb:39:in `process'","actionpack (7.0.8.4) lib/action_controller/metal.rb:188:in `dispatch'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `block in dispatch'","lib/gitlab/middleware/action_controller_static_context.rb:23:in `call'","actionpack (7.0.8.4) lib/action_controller/metal.rb:249:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:49:in `dispatch'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:18:in `block in \u003cclass:Constraints\u003e'","actionpack (7.0.8.4) lib/action_dispatch/routing/mapper.rb:48:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:50:in `block in serve'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `each'","actionpack (7.0.8.4) lib/action_dispatch/journey/router.rb:32:in `serve'","actionpack (7.0.8.4) lib/action_dispatch/routing/route_set.rb:852:in `call'","gitlab-experiment (0.9.1) lib/gitlab/experiment/middleware.rb:19:in `call'","omniauth (2.1.0) lib/omniauth/strategy.rb:202:in `call!'","omniauth (2.1.0) lib/omniauth/strategy.rb:169:in `call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:72:in `memoized_call'","flipper (0.26.2) lib/flipper/middleware/memoizer.rb:37:in `call'","lib/gitlab/metrics/elasticsearch_rack_middleware.rb:16:in `call'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/middleware/sidekiq_shard_awareness_validation.rb:20:in `call'","lib/gitlab/middleware/memory_report.rb:13:in `call'","lib/gitlab/middleware/speedscope.rb:13:in `call'","lib/gitlab/database/load_balancing/rack_middleware.rb:23:in `call'","lib/gitlab/middleware/rails_queue_duration.rb:33:in `call'","lib/gitlab/etag_caching/middleware.rb:21:in `call'","lib/gitlab/metrics/rack_middleware.rb:16:in `block in call'","lib/gitlab/metrics/web_transaction.rb:46:in `run'","lib/gitlab/metrics/rack_middleware.rb:16:in `call'","lib/gitlab/middleware/go.rb:21:in `call'","lib/gitlab/middleware/query_analyzer.rb:11:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/middleware/query_analyzer.rb:11:in `call'","lib/ci/job_token/middleware.rb:11:in `call'","batch-loader (2.0.5) lib/batch_loader/middleware.rb:11:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:103:in `call'","apollo_upload_server (2.1.6) lib/apollo_upload_server/middleware.rb:19:in `call'","lib/gitlab/middleware/multipart.rb:173:in `call'","rack-attack (6.7.0) lib/rack/attack.rb:127:in `call'","warden (1.2.9) lib/warden/manager.rb:36:in `block in call'","warden (1.2.9) lib/warden/manager.rb:34:in `catch'","warden (1.2.9) lib/warden/manager.rb:34:in `call'","rack-cors (2.0.2) lib/rack/cors.rb:102:in `call'","rack (2.2.10) lib/rack/tempfile_reaper.rb:15:in `call'","rack (2.2.10) lib/rack/etag.rb:27:in `call'","rack (2.2.10) lib/rack/conditional_get.rb:27:in `call'","rack (2.2.10) lib/rack/head.rb:12:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/permissions_policy.rb:38:in `call'","actionpack (7.0.8.4) lib/action_dispatch/http/content_security_policy.rb:36:in `call'","lib/gitlab/middleware/read_only/controller.rb:50:in `call'","lib/gitlab/middleware/read_only.rb:18:in `call'","lib/gitlab/middleware/unauthenticated_session_expiry.rb:18:in `call'","rack (2.2.10) lib/rack/session/abstract/id.rb:266:in `context'","rack (2.2.10) lib/rack/session/abstract/id.rb:260:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/cookies.rb:704:in `call'","lib/gitlab/middleware/same_site_cookies.rb:27:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'","activesupport (7.0.8.4) lib/active_support/callbacks.rb:99:in `run_callbacks'","actionpack (7.0.8.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'","sentry-rails (5.21.0) lib/sentry/rails/rescued_exception_interceptor.rb:14:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/debug_exceptions.rb:28:in `call'","lib/gitlab/middleware/path_traversal_check.rb:35:in `call'","lib/gitlab/middleware/handle_malformed_strings.rb:21:in `call'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:30:in `block (2 levels) in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:265:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:412:in `with_session_tracking'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:21:in `block in call'","sentry-ruby (5.21.0) lib/sentry/hub.rb:59:in `with_scope'","sentry-ruby (5.21.0) lib/sentry-ruby.rb:392:in `with_scope'","sentry-ruby (5.21.0) lib/sentry/rack/capture_exceptions.rb:20:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/show_exceptions.rb:29:in `call'","lib/gitlab/middleware/basic_health_check.rb:25:in `call'","lograge (0.11.2) lib/lograge/rails_ext/rack/logger.rb:15:in `call_app'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `block in call'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `block in tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:37:in `tagged'","activesupport (7.0.8.4) lib/active_support/tagged_logging.rb:99:in `tagged'","railties (7.0.8.4) lib/rails/rack/logger.rb:25:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/remote_ip.rb:93:in `call'","lib/gitlab/middleware/handle_ip_spoof_attack_error.rb:25:in `call'","lib/gitlab/middleware/request_context.rb:15:in `call'","lib/gitlab/middleware/webhook_recursion_detection.rb:15:in `call'","request_store (1.5.1) lib/request_store/middleware.rb:19:in `call'","rack (2.2.10) lib/rack/method_override.rb:24:in `call'","rack (2.2.10) lib/rack/runtime.rb:22:in `call'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:154:in `block in call'","rack-timeout (0.7.0) lib/rack/timeout/support/timeout.rb:19:in `timeout'","rack-timeout (0.7.0) lib/rack/timeout/core.rb:153:in `call'","config/initializers/fix_local_cache_middleware.rb:11:in `call'","lib/gitlab/middleware/compressed_json.rb:44:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/executor.rb:14:in `call'","lib/gitlab/middleware/rack_multipart_tempfile_factory.rb:19:in `call'","rack (2.2.10) lib/rack/sendfile.rb:110:in `call'","lib/gitlab/middleware/sidekiq_web_static.rb:20:in `call'","lib/gitlab/metrics/requests_rack_middleware.rb:79:in `call'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:22:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/rack.rb:21:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/request_id.rb:26:in `call'","actionpack (7.0.8.4) lib/action_dispatch/middleware/host_authorization.rb:131:in `call'","railties (7.0.8.4) lib/rails/engine.rb:530:in `call'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `public_send'","railties (7.0.8.4) lib/rails/railtie.rb:226:in `method_missing'","lib/gitlab/middleware/release_env.rb:12:in `call'","rack (2.2.10) lib/rack/urlmap.rb:74:in `block in call'","rack (2.2.10) lib/rack/urlmap.rb:58:in `each'","rack (2.2.10) lib/rack/urlmap.rb:58:in `call'","puma (6.4.3) lib/puma/configuration.rb:272:in `call'","puma (6.4.3) lib/puma/request.rb:100:in `block in handle_request'","puma (6.4.3) lib/puma/thread_pool.rb:378:in `with_force_shutdown'","puma (6.4.3) lib/puma/request.rb:99:in `handle_request'","puma (6.4.3) lib/puma/server.rb:464:in `process_client'","puma (6.4.3) lib/puma/server.rb:245:in `block in run'","puma (6.4.3) lib/puma/thread_pool.rb:155:in `block in spawn_thread'"],"user.username":"uidq5473","tags.program":"web","tags.locale":"en","tags.feature_category":"source_code_management","tags.correlation_id":"01JWDM1NZV1623Y55KYFH0QJWZ"}
{"severity":"ERROR","time":"2025-05-29T08:55:43.766Z","meta.feature_category":"observability","correlation_id":"36ca46876fd8196229197d4687730266","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"0b48ed698dcbf853f0c66c67","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"36ca46876fd8196229197d4687730266"}
{"severity":"ERROR","time":"2025-05-29T08:55:51.017Z","meta.feature_category":"observability","correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"fcf38d4a17ff9949cde1ccd5","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5"}
{"severity":"ERROR","time":"2025-05-29T08:56:02.055Z","meta.feature_category":"observability","correlation_id":"7adafadbe4780dc90ae66b405499e00c","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"d6e3c5b1f7389390b188abe9","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"7adafadbe4780dc90ae66b405499e00c"}
{"severity":"ERROR","time":"2025-05-29T08:56:02.850Z","meta.feature_category":"observability","correlation_id":"240400f098b15a3fbe2bb3eee9bc1572","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"97929070864ec09bbfce7002","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"240400f098b15a3fbe2bb3eee9bc1572"}
{"severity":"ERROR","time":"2025-05-29T08:56:14.651Z","meta.feature_category":"observability","correlation_id":"65745729817a89c434a7a808af15f155","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"39095907229d07bbb9e01c54","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"65745729817a89c434a7a808af15f155"}
{"severity":"ERROR","time":"2025-05-29T08:56:23.502Z","meta.feature_category":"observability","correlation_id":"7adafadbe4780dc90ae66b405499e00c","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"d6e3c5b1f7389390b188abe9","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"7adafadbe4780dc90ae66b405499e00c"}
{"severity":"ERROR","time":"2025-05-29T08:56:36.957Z","meta.feature_category":"observability","correlation_id":"aa063881f3708d9717f5251ec85383a9","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"a8aa1c39df9c75814a5636bb","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"aa063881f3708d9717f5251ec85383a9"}
{"severity":"ERROR","time":"2025-05-29T08:56:37.084Z","meta.feature_category":"observability","correlation_id":"690c81e46ff3441a2acbe543634d74b1","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ee224a3d16aa7aac721827fc","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"690c81e46ff3441a2acbe543634d74b1"}
{"severity":"ERROR","time":"2025-05-29T08:56:41.443Z","meta.feature_category":"observability","correlation_id":"7adafadbe4780dc90ae66b405499e00c","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"d6e3c5b1f7389390b188abe9","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"7adafadbe4780dc90ae66b405499e00c"}
{"severity":"ERROR","time":"2025-05-29T08:56:46.469Z","meta.feature_category":"observability","correlation_id":"240400f098b15a3fbe2bb3eee9bc1572","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"97929070864ec09bbfce7002","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"240400f098b15a3fbe2bb3eee9bc1572"}
{"severity":"ERROR","time":"2025-05-29T08:56:50.838Z","meta.feature_category":"observability","correlation_id":"37ddf19f2dd915d2f2b90852b667bd34","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"216772db7205cf917c20d6ef","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"37ddf19f2dd915d2f2b90852b667bd34"}
{"severity":"ERROR","time":"2025-05-29T08:57:06.577Z","meta.feature_category":"observability","correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"918f22f2b4071d90ec5a7be3","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56"}
{"severity":"ERROR","time":"2025-05-29T08:57:21.836Z","meta.feature_category":"observability","correlation_id":"7adafadbe4780dc90ae66b405499e00c","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"d6e3c5b1f7389390b188abe9","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"7adafadbe4780dc90ae66b405499e00c"}
{"severity":"ERROR","time":"2025-05-29T08:57:32.596Z","meta.feature_category":"observability","correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"918f22f2b4071d90ec5a7be3","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56"}
{"severity":"ERROR","time":"2025-05-29T08:57:32.618Z","meta.feature_category":"observability","correlation_id":"09e451ea9b69f3840fc5e558924083bc","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"481dbc018dc583cb9e7f7a9d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"09e451ea9b69f3840fc5e558924083bc"}
{"severity":"ERROR","time":"2025-05-29T08:57:42.432Z","meta.feature_category":"observability","correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"fcf38d4a17ff9949cde1ccd5","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5"}
{"severity":"ERROR","time":"2025-05-29T08:57:50.509Z","correlation_id":"01JWDM5V1Y4XM7PPDYRM4AB92E","meta.caller_id":"WebHookWorker","meta.remote_ip":"127.0.0.1","meta.feature_category":"webhooks","meta.user":"uids0057","meta.user_id":3315,"meta.project":"svp/cbb/swift","meta.root_namespace":"svp","meta.client_id":"user/3315","meta.organization_id":1,"meta.root_caller_id":"POST /api/:version/internal/post_receive","meta.related_class":"ProjectHook","meta.subscription_plan":"default","exception.class":"Net::ReadTimeout","exception.message":"Net::ReadTimeout with #\u003cTCPSocket:(closed)\u003e","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:219:in `rbuf_fill'","gems/gitlab-http/lib/gitlab/http_v2/buffered_io.rb:60:in `readuntil'","net-protocol (0.1.3) lib/net/protocol.rb:203:in `readline'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http/response.rb:158:in `read_status_line'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http/response.rb:147:in `read_new'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2342:in `block in transport_request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2333:in `catch'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2333:in `transport_request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2306:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:47:in `block in request'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:44:in `request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2299:in `block in request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1570:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:542:in `post'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `post'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","app/services/web_hook_service.rb:147:in `make_request'","app/services/web_hook_service.rb:86:in `execute'","app/workers/web_hook_worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":"uids0057","tags.queue":"default","tags.jid":"4788c1b472c32eb5c34b21eb","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"webhooks","tags.correlation_id":"01JWDM5V1Y4XM7PPDYRM4AB92E"}
{"severity":"ERROR","time":"2025-05-29T08:58:03.483Z","meta.feature_category":"observability","correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ffd284021bcb347793f60877","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6"}
{"severity":"ERROR","time":"2025-05-29T08:58:07.894Z","meta.feature_category":"observability","correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"918f22f2b4071d90ec5a7be3","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56"}
{"severity":"ERROR","time":"2025-05-29T08:58:26.120Z","meta.feature_category":"observability","correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ffd284021bcb347793f60877","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6"}
{"severity":"ERROR","time":"2025-05-29T08:58:37.816Z","meta.feature_category":"observability","correlation_id":"bd9cd30b33113ad46c6b9bbd7e5a7b84","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"0755541d049f660af0da4ca2","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"bd9cd30b33113ad46c6b9bbd7e5a7b84"}
{"severity":"ERROR","time":"2025-05-29T08:58:43.230Z","meta.feature_category":"observability","correlation_id":"240400f098b15a3fbe2bb3eee9bc1572","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"97929070864ec09bbfce7002","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"240400f098b15a3fbe2bb3eee9bc1572"}
{"severity":"ERROR","time":"2025-05-29T08:58:49.145Z","meta.feature_category":"observability","correlation_id":"212a35fccea24496a2b44574ce5f5c8e","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"e3c0d07891cc6553f01cc0cd","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"212a35fccea24496a2b44574ce5f5c8e"}
{"severity":"ERROR","time":"2025-05-29T08:58:54.131Z","meta.feature_category":"observability","correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"918f22f2b4071d90ec5a7be3","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56"}
{"severity":"ERROR","time":"2025-05-29T08:59:00.727Z","meta.feature_category":"observability","correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ffd284021bcb347793f60877","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6"}
{"severity":"ERROR","time":"2025-05-29T08:59:05.551Z","meta.feature_category":"observability","correlation_id":"cc7cb316a09318b212cfcfb3155fab69","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"da1df5b148cf600663df8456","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cc7cb316a09318b212cfcfb3155fab69"}
{"severity":"ERROR","time":"2025-05-29T08:59:28.322Z","meta.feature_category":"observability","correlation_id":"cc7cb316a09318b212cfcfb3155fab69","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"da1df5b148cf600663df8456","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cc7cb316a09318b212cfcfb3155fab69"}
{"severity":"ERROR","time":"2025-05-29T08:59:30.217Z","meta.feature_category":"observability","correlation_id":"7adafadbe4780dc90ae66b405499e00c","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"d6e3c5b1f7389390b188abe9","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"7adafadbe4780dc90ae66b405499e00c"}
{"severity":"ERROR","time":"2025-05-29T08:59:43.326Z","meta.feature_category":"observability","correlation_id":"db3789634c04eb93a55cb70ef732991e","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"601dd85e4885c72cb2ea05e4","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"db3789634c04eb93a55cb70ef732991e"}
{"severity":"ERROR","time":"2025-05-29T08:59:51.990Z","meta.feature_category":"observability","correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ffd284021bcb347793f60877","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6"}
{"severity":"ERROR","time":"2025-05-29T09:00:02.759Z","meta.feature_category":"observability","correlation_id":"d0ddfc6b7c7e700c1ddace3fcbd33b41","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"af2a19f151cb41afe13f0211","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"d0ddfc6b7c7e700c1ddace3fcbd33b41"}
{"severity":"ERROR","time":"2025-05-29T09:00:03.291Z","meta.feature_category":"observability","correlation_id":"cc7cb316a09318b212cfcfb3155fab69","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"da1df5b148cf600663df8456","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cc7cb316a09318b212cfcfb3155fab69"}
{"severity":"ERROR","time":"2025-05-29T09:00:25.756Z","meta.feature_category":"observability","correlation_id":"d0ddfc6b7c7e700c1ddace3fcbd33b41","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"af2a19f151cb41afe13f0211","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"d0ddfc6b7c7e700c1ddace3fcbd33b41"}
{"severity":"ERROR","time":"2025-05-29T09:00:26.261Z","meta.feature_category":"observability","correlation_id":"e8d61e31e041f9d6ed7f7f12465eb808","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"2abf0aebbe298de431e1fe18","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"e8d61e31e041f9d6ed7f7f12465eb808"}
{"severity":"ERROR","time":"2025-05-29T09:00:28.536Z","meta.feature_category":"observability","correlation_id":"a5c893b28818854cc65d247cc5b236eb","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ebe81d9353160051b681fa7d","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a5c893b28818854cc65d247cc5b236eb"}
{"severity":"ERROR","time":"2025-05-29T09:00:41.030Z","meta.feature_category":"observability","correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"918f22f2b4071d90ec5a7be3","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56"}
{"severity":"ERROR","time":"2025-05-29T09:00:45.414Z","meta.feature_category":"observability","correlation_id":"d0ddfc6b7c7e700c1ddace3fcbd33b41","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"af2a19f151cb41afe13f0211","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"d0ddfc6b7c7e700c1ddace3fcbd33b41"}
{"severity":"ERROR","time":"2025-05-29T09:00:58.794Z","meta.feature_category":"observability","correlation_id":"cc7cb316a09318b212cfcfb3155fab69","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"da1df5b148cf600663df8456","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cc7cb316a09318b212cfcfb3155fab69"}
{"severity":"ERROR","time":"2025-05-29T09:01:01.476Z","meta.feature_category":"observability","correlation_id":"f559aa151cd51f6862dd070b87c9bdf2","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"0224878bf5bdfefef87676b6","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"f559aa151cd51f6862dd070b87c9bdf2"}
{"severity":"ERROR","time":"2025-05-29T09:01:14.579Z","meta.feature_category":"observability","correlation_id":"04512682d0f449644882748a2d072a4e","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"6547f1b7d6729deb7f535fb4","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"04512682d0f449644882748a2d072a4e"}
{"severity":"ERROR","time":"2025-05-29T09:01:18.710Z","meta.feature_category":"observability","correlation_id":"f559aa151cd51f6862dd070b87c9bdf2","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"0224878bf5bdfefef87676b6","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"f559aa151cd51f6862dd070b87c9bdf2"}
{"severity":"ERROR","time":"2025-05-29T09:01:23.229Z","meta.feature_category":"observability","correlation_id":"c6e7a598e898420310363510679155d3","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"370dcee48617663303eed5c4","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"c6e7a598e898420310363510679155d3"}
{"severity":"ERROR","time":"2025-05-29T09:01:30.741Z","meta.feature_category":"observability","correlation_id":"d0ddfc6b7c7e700c1ddace3fcbd33b41","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"af2a19f151cb41afe13f0211","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"d0ddfc6b7c7e700c1ddace3fcbd33b41"}
{"severity":"ERROR","time":"2025-05-29T09:01:30.755Z","meta.feature_category":"observability","correlation_id":"690c81e46ff3441a2acbe543634d74b1","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ee224a3d16aa7aac721827fc","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"690c81e46ff3441a2acbe543634d74b1"}
{"severity":"ERROR","time":"2025-05-29T09:01:41.858Z","meta.feature_category":"observability","correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ffd284021bcb347793f60877","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6"}
{"severity":"ERROR","time":"2025-05-29T09:01:53.162Z","meta.feature_category":"observability","correlation_id":"f559aa151cd51f6862dd070b87c9bdf2","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"0224878bf5bdfefef87676b6","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"f559aa151cd51f6862dd070b87c9bdf2"}
{"severity":"ERROR","time":"2025-05-29T09:02:01.569Z","meta.feature_category":"observability","correlation_id":"51fabd05f735db9389af1552c9ef8be6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"2771d4d534ef1db005e44d89","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"51fabd05f735db9389af1552c9ef8be6"}
{"severity":"ERROR","time":"2025-05-29T09:02:09.816Z","correlation_id":"01JWDMDR1HPWDX1GRZ9CJT0ETH","meta.caller_id":"WebHookWorker","meta.remote_ip":"127.0.0.1","meta.feature_category":"webhooks","meta.user":"uids0210","meta.user_id":3416,"meta.project":"svp/cbb/swift","meta.root_namespace":"svp","meta.client_id":"user/3416","meta.organization_id":1,"meta.root_caller_id":"POST /api/:version/internal/post_receive","meta.related_class":"ProjectHook","meta.subscription_plan":"default","exception.class":"Net::ReadTimeout","exception.message":"Net::ReadTimeout with #\u003cTCPSocket:(closed)\u003e","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:219:in `rbuf_fill'","gems/gitlab-http/lib/gitlab/http_v2/buffered_io.rb:60:in `readuntil'","net-protocol (0.1.3) lib/net/protocol.rb:203:in `readline'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http/response.rb:158:in `read_status_line'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http/response.rb:147:in `read_new'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2342:in `block in transport_request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2333:in `catch'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2333:in `transport_request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2306:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:47:in `block in request'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:44:in `request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2299:in `block in request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1570:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:542:in `post'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `post'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","app/services/web_hook_service.rb:147:in `make_request'","app/services/web_hook_service.rb:86:in `execute'","app/workers/web_hook_worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":"uids0210","tags.queue":"default","tags.jid":"cf2cf19a356bd5ff16a1c453","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"webhooks","tags.correlation_id":"01JWDMDR1HPWDX1GRZ9CJT0ETH"}
{"severity":"ERROR","time":"2025-05-29T09:02:23.777Z","meta.feature_category":"observability","correlation_id":"51fabd05f735db9389af1552c9ef8be6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"2771d4d534ef1db005e44d89","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"51fabd05f735db9389af1552c9ef8be6"}
{"severity":"ERROR","time":"2025-05-29T09:02:24.088Z","correlation_id":"01JWDME66B827EAGAVBWASB1FH","meta.caller_id":"WebHookWorker","meta.feature_category":"webhooks","meta.organization_id":1,"meta.remote_ip":"10.217.6.102","meta.user":"uidq8253","meta.user_id":2470,"meta.project":"ida/cd/sgm_ndlb_icm/sgm_ndlb_icm_nad/framework","meta.root_namespace":"ida","meta.client_id":"user/2470","meta.related_class":"ProjectHook","meta.root_caller_id":"Projects::DiscussionsController#resolve","exception.class":"Net::ReadTimeout","exception.message":"Net::ReadTimeout with #\u003cTCPSocket:(closed)\u003e","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:219:in `rbuf_fill'","gems/gitlab-http/lib/gitlab/http_v2/buffered_io.rb:60:in `readuntil'","net-protocol (0.1.3) lib/net/protocol.rb:203:in `readline'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http/response.rb:158:in `read_status_line'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http/response.rb:147:in `read_new'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2342:in `block in transport_request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2333:in `catch'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2333:in `transport_request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2306:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:47:in `block in request'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:44:in `request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2299:in `block in request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1570:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:542:in `post'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `post'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","app/services/web_hook_service.rb:147:in `make_request'","app/services/web_hook_service.rb:86:in `execute'","app/workers/web_hook_worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":"uidq8253","tags.queue":"default","tags.jid":"0de49fd57a42cbfac6d3d7e8","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"webhooks","tags.correlation_id":"01JWDME66B827EAGAVBWASB1FH"}
{"severity":"ERROR","time":"2025-05-29T09:02:25.858Z","correlation_id":"01JWDME7W7YAREFA91NTRQ8RTG","meta.caller_id":"WebHookWorker","meta.remote_ip":"10.217.6.102","meta.feature_category":"webhooks","meta.user":"uidq8253","meta.user_id":2470,"meta.project":"ida/cd/sgm_ndlb_icm/sgm_ndlb_icm_nad/framework","meta.root_namespace":"ida","meta.client_id":"user/2470","meta.root_caller_id":"POST /api/:version/projects/:id/merge_requests/:merge_request_iid/approve","meta.related_class":"ProjectHook","exception.class":"Net::ReadTimeout","exception.message":"Net::ReadTimeout with #\u003cTCPSocket:(closed)\u003e","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:219:in `rbuf_fill'","gems/gitlab-http/lib/gitlab/http_v2/buffered_io.rb:60:in `readuntil'","net-protocol (0.1.3) lib/net/protocol.rb:203:in `readline'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http/response.rb:158:in `read_status_line'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http/response.rb:147:in `read_new'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2342:in `block in transport_request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2333:in `catch'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2333:in `transport_request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2306:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:47:in `block in request'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `block in instrument'","activesupport (7.0.8.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'","activesupport (7.0.8.4) lib/active_support/notifications.rb:206:in `instrument'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:44:in `request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2299:in `block in request'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1570:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:542:in `post'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `post'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","app/services/web_hook_service.rb:147:in `make_request'","app/services/web_hook_service.rb:86:in `execute'","app/workers/web_hook_worker.rb:29:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":"uidq8253","tags.queue":"default","tags.jid":"e4a176b6d8cc3dae7a12ec26","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"webhooks","tags.correlation_id":"01JWDME7W7YAREFA91NTRQ8RTG"}
{"severity":"ERROR","time":"2025-05-29T09:02:26.386Z","meta.feature_category":"observability","correlation_id":"6d5197050c111dea2450ec976bcd64d8","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"286846bfa21be62c28dad610","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"6d5197050c111dea2450ec976bcd64d8"}
{"severity":"ERROR","time":"2025-05-29T09:02:41.584Z","meta.feature_category":"observability","correlation_id":"f559aa151cd51f6862dd070b87c9bdf2","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"0224878bf5bdfefef87676b6","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"f559aa151cd51f6862dd070b87c9bdf2"}
{"severity":"ERROR","time":"2025-05-29T09:02:51.308Z","meta.feature_category":"observability","correlation_id":"cc7cb316a09318b212cfcfb3155fab69","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"da1df5b148cf600663df8456","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cc7cb316a09318b212cfcfb3155fab69"}
{"severity":"ERROR","time":"2025-05-29T09:02:57.904Z","meta.feature_category":"observability","correlation_id":"51fabd05f735db9389af1552c9ef8be6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"2771d4d534ef1db005e44d89","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"51fabd05f735db9389af1552c9ef8be6"}
{"severity":"ERROR","time":"2025-05-29T09:02:58.781Z","meta.feature_category":"observability","correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"fcf38d4a17ff9949cde1ccd5","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"cb0bcf92b2d0fad721d19e453571b2f5"}
{"severity":"ERROR","time":"2025-05-29T09:03:04.073Z","meta.feature_category":"observability","correlation_id":"a793026086a08d64fb02aa977aa4e2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"02a579015cdf7a47e44bd1c1","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a793026086a08d64fb02aa977aa4e2f5"}
{"severity":"ERROR","time":"2025-05-29T09:03:08.744Z","meta.feature_category":"observability","correlation_id":"7403dba120c17b2605190863b241681f","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"6d65e0c598f28f0384fc4348","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"7403dba120c17b2605190863b241681f"}
{"severity":"ERROR","time":"2025-05-29T09:03:12.320Z","meta.feature_category":"observability","correlation_id":"755fcac552ec6efa439c0f10a86d8f78","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ad8a11fe8b50e2aab35a2d39","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"755fcac552ec6efa439c0f10a86d8f78"}
{"severity":"ERROR","time":"2025-05-29T09:03:22.469Z","meta.feature_category":"observability","correlation_id":"d0ddfc6b7c7e700c1ddace3fcbd33b41","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"af2a19f151cb41afe13f0211","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"d0ddfc6b7c7e700c1ddace3fcbd33b41"}
{"severity":"ERROR","time":"2025-05-29T09:03:25.112Z","meta.feature_category":"observability","correlation_id":"a793026086a08d64fb02aa977aa4e2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"02a579015cdf7a47e44bd1c1","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a793026086a08d64fb02aa977aa4e2f5"}
{"severity":"ERROR","time":"2025-05-29T09:03:38.117Z","meta.feature_category":"observability","correlation_id":"51fabd05f735db9389af1552c9ef8be6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"2771d4d534ef1db005e44d89","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"51fabd05f735db9389af1552c9ef8be6"}
{"severity":"ERROR","time":"2025-05-29T09:03:52.391Z","meta.feature_category":"observability","correlation_id":"a793026086a08d64fb02aa977aa4e2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"02a579015cdf7a47e44bd1c1","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a793026086a08d64fb02aa977aa4e2f5"}
{"severity":"ERROR","time":"2025-05-29T09:03:57.941Z","meta.feature_category":"observability","correlation_id":"dd40435e32f1b34c10211adf094428f8","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"0c25e676d0151a37033488de","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"dd40435e32f1b34c10211adf094428f8"}
{"severity":"ERROR","time":"2025-05-29T09:04:00.790Z","meta.feature_category":"observability","correlation_id":"240400f098b15a3fbe2bb3eee9bc1572","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"97929070864ec09bbfce7002","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"240400f098b15a3fbe2bb3eee9bc1572"}
{"severity":"ERROR","time":"2025-05-29T09:04:01.957Z","meta.feature_category":"observability","correlation_id":"25e19d49641464efe29b953c51f10de4","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"08cc15bf25198a21ed21cd4e","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"25e19d49641464efe29b953c51f10de4"}
{"severity":"ERROR","time":"2025-05-29T09:04:19.619Z","meta.feature_category":"observability","correlation_id":"f559aa151cd51f6862dd070b87c9bdf2","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"0224878bf5bdfefef87676b6","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"f559aa151cd51f6862dd070b87c9bdf2"}
{"severity":"ERROR","time":"2025-05-29T09:04:32.367Z","meta.feature_category":"observability","correlation_id":"7adafadbe4780dc90ae66b405499e00c","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"d6e3c5b1f7389390b188abe9","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"7adafadbe4780dc90ae66b405499e00c"}
{"severity":"ERROR","time":"2025-05-29T09:04:44.599Z","meta.feature_category":"observability","correlation_id":"a793026086a08d64fb02aa977aa4e2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"02a579015cdf7a47e44bd1c1","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a793026086a08d64fb02aa977aa4e2f5"}
{"severity":"ERROR","time":"2025-05-29T09:05:03.090Z","meta.feature_category":"observability","correlation_id":"9231fb74438987967864689b1d7e354f","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"1b03f80e8fd5e2a2b79cc6ae","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"9231fb74438987967864689b1d7e354f"}
{"severity":"ERROR","time":"2025-05-29T09:05:31.198Z","meta.feature_category":"observability","correlation_id":"b57b8b1cc49ab7ba589decd3476100f0","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"efb6bcab1fbecbe45c11e0e0","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"b57b8b1cc49ab7ba589decd3476100f0"}
{"severity":"ERROR","time":"2025-05-29T09:05:31.222Z","meta.feature_category":"observability","correlation_id":"51fabd05f735db9389af1552c9ef8be6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"2771d4d534ef1db005e44d89","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"51fabd05f735db9389af1552c9ef8be6"}
{"severity":"ERROR","time":"2025-05-29T09:06:04.520Z","meta.feature_category":"observability","correlation_id":"425368089899e4eeb48ae569ebde32e2","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"2c3e2454289e77764c0811d7","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"425368089899e4eeb48ae569ebde32e2"}
{"severity":"ERROR","time":"2025-05-29T09:06:06.232Z","meta.feature_category":"observability","correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"918f22f2b4071d90ec5a7be3","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"584e79df6ffd2bdcebebc7ef6d531e56"}
{"severity":"ERROR","time":"2025-05-29T09:06:27.277Z","meta.feature_category":"observability","correlation_id":"425368089899e4eeb48ae569ebde32e2","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"2c3e2454289e77764c0811d7","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"425368089899e4eeb48ae569ebde32e2"}
{"severity":"ERROR","time":"2025-05-29T09:06:44.213Z","meta.feature_category":"observability","correlation_id":"a793026086a08d64fb02aa977aa4e2f5","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"02a579015cdf7a47e44bd1c1","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"a793026086a08d64fb02aa977aa4e2f5"}
{"severity":"ERROR","time":"2025-05-29T09:06:55.104Z","meta.feature_category":"observability","correlation_id":"425368089899e4eeb48ae569ebde32e2","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"2c3e2454289e77764c0811d7","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"425368089899e4eeb48ae569ebde32e2"}
{"severity":"ERROR","time":"2025-05-29T09:07:00.258Z","meta.feature_category":"observability","correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"ffd284021bcb347793f60877","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"c9b4c41e9a1d4437b2a3a370aa9c7de6"}
{"severity":"ERROR","time":"2025-05-29T09:07:07.332Z","meta.feature_category":"observability","correlation_id":"d5843ebf2ce7d3039c1a1f23e7b5d2e8","meta.caller_id":"Observability::AlertQueryWorker","exception.class":"Errno::ECONNRESET","exception.message":"Connection reset by peer - SSL_connect","exception.backtrace":["net-protocol (0.1.3) lib/net/protocol.rb:46:in `connect_nonblock'","net-protocol (0.1.3) lib/net/protocol.rb:46:in `ssl_socket_connect'","gems/gitlab-http/lib/net_http/connect_patch.rb:126:in `connect'","gems/gitlab-http/lib/gitlab/http_v2/net_http_adapter.rb:24:in `connect'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1580:in `do_start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:1569:in `start'","/opt/gitlab/embedded/lib/ruby/3.2.0/net/http.rb:2297:in `request'","gitlab-labkit (0.36.1) lib/labkit/net_http_publisher.rb:40:in `request'","httparty (0.21.0) lib/httparty/request.rb:156:in `perform'","httparty (0.21.0) lib/httparty.rb:612:in `perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:96:in `sync_perform_request'","gems/gitlab-http/lib/gitlab/http_v2/client.rb:68:in `perform_request'","httparty (0.21.0) lib/httparty.rb:526:in `get'","gems/gitlab-http/lib/gitlab/http_v2.rb:12:in `get'","lib/gitlab/http.rb:36:in `public_send'","lib/gitlab/http.rb:36:in `block (2 levels) in singleton class'","ee/app/workers/observability/alert_query_worker.rb:44:in `fetch_alerts'","ee/app/workers/observability/alert_query_worker.rb:17:in `perform'","sentry-ruby (5.21.0) lib/sentry/cron/monitor_check_ins.rb:21:in `perform'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:210:in `execute_job'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:180:in `block (4 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","ee/lib/gitlab/sidekiq_middleware/set_session/server.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/skip_jobs.rb:51:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/resource_usage_limit/middleware.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/resource_usage_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/database/load_balancing/sidekiq_server_middleware.rb:35:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/duplicate_jobs/strategies/until_executing.rb:16:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/duplicate_job.rb:44:in `perform'","lib/gitlab/sidekiq_middleware/duplicate_jobs/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/concurrency_limit/middleware.rb:37:in `perform'","lib/gitlab/sidekiq_middleware/concurrency_limit/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/click_house/migration_support/sidekiq_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/pause_control/strategies/base.rb:31:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/strategy_handler.rb:22:in `perform'","lib/gitlab/sidekiq_middleware/pause_control/server.rb:8:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/worker_context.rb:9:in `wrap_in_optional_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:19:in `block in call'","lib/gitlab/application_context.rb:162:in `block in use'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","lib/gitlab/application_context.rb:162:in `use'","lib/gitlab/application_context.rb:90:in `with_context'","lib/gitlab/sidekiq_middleware/worker_context/server.rb:17:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_status/server_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_versioning/middleware.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `block in call'","lib/gitlab/database/query_analyzer.rb:83:in `within'","lib/gitlab/sidekiq_middleware/query_analyzer.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/admin_mode/server.rb:14:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/set_ip_address.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/instrumentation_logger.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/batch_loader.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/extra_done_log_metadata.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/server_metrics.rb:111:in `block in call'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `block in instrument'","lib/gitlab/metrics/background_transaction.rb:33:in `run'","lib/gitlab/sidekiq_middleware/server_metrics.rb:139:in `instrument'","lib/gitlab/sidekiq_middleware/server_metrics.rb:110:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:8:in `block in call'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:66:in `enabling_request_store'","gems/gitlab-safe_request_store/lib/gitlab/safe_request_store.rb:59:in `ensure_request_store'","lib/gitlab/sidekiq_middleware/request_store_middleware.rb:7:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:21:in `block in call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:180:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:16:in `block in call'","gitlab-labkit (0.36.1) lib/labkit/context.rb:35:in `with_context'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/context/server.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","gitlab-labkit (0.36.1) lib/labkit/middleware/sidekiq/server.rb:20:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/monitor.rb:10:in `block in call'","lib/gitlab/sidekiq_daemon/monitor.rb:46:in `within_job'","lib/gitlab/sidekiq_middleware/monitor.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:10:in `block in call'","lib/gitlab/sidekiq_sharding/validator.rb:42:in `enabled'","lib/gitlab/sidekiq_middleware/shard_awareness_validator.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","lib/gitlab/sidekiq_middleware/size_limiter/server.rb:13:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","marginalia (1.11.1) lib/marginalia/sidekiq_instrumentation.rb:9:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","sentry-sidekiq (5.21.0) lib/sentry/sidekiq/sentry_context_middleware.rb:29:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:183:in `block in traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:26:in `track'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/metrics/tracking.rb:126:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:182:in `traverse'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/middleware/chain.rb:173:in `invoke'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:179:in `block (3 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:140:in `block (6 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:113:in `local'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:139:in `block (5 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:16:in `block in call'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:72:in `block in wrap'","activesupport (7.0.8.4) lib/active_support/execution_wrapper.rb:92:in `wrap'","activesupport (7.0.8.4) lib/active_support/reloader.rb:71:in `wrap'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/rails.rb:15:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:135:in `block (4 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:271:in `stats'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:130:in `block (3 levels) in dispatch'","lib/gitlab/sidekiq_logging/structured_logger.rb:21:in `call'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:129:in `block (2 levels) in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_retry.rb:80:in `global'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:128:in `block in dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/job_logger.rb:39:in `prepare'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:127:in `dispatch'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:178:in `block (2 levels) in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:177:in `block in process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `handle_interrupt'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:176:in `process'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:82:in `process_one'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/processor.rb:72:in `run'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:10:in `watchdog'","vendor/gems/sidekiq-7.2.4/lib/sidekiq/component.rb:19:in `block in safe_thread'"],"user.username":null,"tags.queue":"default","tags.jid":"72bc778e3e2884260192e639","tags.program":"sidekiq","tags.locale":"en","tags.feature_category":"observability","tags.correlation_id":"d5843ebf2ce7d3039c1a1f23e7b5d2e8"}
